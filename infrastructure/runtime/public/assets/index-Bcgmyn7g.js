const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/GraphView-CGw6DYPc.js","assets/graph3d-14WKAbGD.js","assets/markdown-Dtr06t2G.js","assets/GraphView-BSQetqKZ.css"])))=>i.map(i=>d[i]);
var Mi=Object.defineProperty;var Br=e=>{throw TypeError(e)};var Li=(e,t,n)=>t in e?Mi(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var Et=(e,t,n)=>Li(e,typeof t!="symbol"?t+"":t,n),ja=(e,t,n)=>t.has(e)||Br("Cannot "+n);var x=(e,t,n)=>(ja(e,t,"read from private field"),n?n.call(e):t.get(e)),fe=(e,t,n)=>t.has(e)?Br("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,n),oe=(e,t,n,a)=>(ja(e,t,"write to private field"),a?a.call(e,n):t.set(e,n),n),et=(e,t,n)=>(ja(e,t,"access private method"),n);import{H as Ie,M as Di,p as Sa}from"./markdown-Dtr06t2G.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))a(r);new MutationObserver(r=>{for(const i of r)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&a(o)}).observe(document,{childList:!0,subtree:!0});function n(r){const i={};return r.integrity&&(i.integrity=r.integrity),r.referrerPolicy&&(i.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?i.credentials="include":r.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function a(r){if(r.ep)return;r.ep=!0;const i=n(r);fetch(r.href,i)}})();const $a=!1;var fs=Array.isArray,Pi=Array.prototype.indexOf,Dn=Array.prototype.includes,Oa=Array.from,Bi=Object.defineProperty,xn=Object.getOwnPropertyDescriptor,zi=Object.getOwnPropertyDescriptors,Ui=Object.prototype,Fi=Array.prototype,vs=Object.getPrototypeOf,zr=Object.isExtensible;const ha=()=>{};function qi(e){return typeof(e==null?void 0:e.then)=="function"}function ji(e){for(var t=0;t<e.length;t++)e[t]()}function gs(){var e,t,n=new Promise((a,r)=>{e=a,t=r});return{promise:n,resolve:e,reject:t}}const Ue=2,Qn=4,Ma=8,ms=1<<24,Ht=16,wt=32,_n=64,er=128,ct=512,Le=1024,Fe=2048,yt=4096,rt=8192,zt=16384,oa=32768,mn=65536,Ur=1<<17,ps=1<<18,Un=1<<19,Hi=1<<20,Bt=1<<25,pn=65536,tr=1<<21,yr=1<<22,Yt=1<<23,Zn=Symbol("$state"),Gi=Symbol("legacy props"),Wi=Symbol(""),tn=new class extends Error{constructor(){super(...arguments);Et(this,"name","StaleReactionError");Et(this,"message","The reaction that called `getAbortSignal()` was re-run or destroyed")}};var cs;const Ki=!!((cs=globalThis.document)!=null&&cs.contentType)&&globalThis.document.contentType.includes("xml");function hs(e){throw new Error("https://svelte.dev/e/lifecycle_outside_component")}function Vi(){throw new Error("https://svelte.dev/e/async_derived_orphan")}function Zi(e,t,n){throw new Error("https://svelte.dev/e/each_key_duplicate")}function Yi(e){throw new Error("https://svelte.dev/e/effect_in_teardown")}function Ji(){throw new Error("https://svelte.dev/e/effect_in_unowned_derived")}function Xi(e){throw new Error("https://svelte.dev/e/effect_orphan")}function Qi(){throw new Error("https://svelte.dev/e/effect_update_depth_exceeded")}function $i(e){throw new Error("https://svelte.dev/e/props_invalid_value")}function eo(){throw new Error("https://svelte.dev/e/state_descriptors_fixed")}function to(){throw new Error("https://svelte.dev/e/state_prototype_fixed")}function no(){throw new Error("https://svelte.dev/e/state_unsafe_mutation")}function ao(){throw new Error("https://svelte.dev/e/svelte_boundary_reset_onerror")}const ro=1,so=2,_s=4,io=8,oo=16,lo=1,co=2,uo=4,fo=8,vo=16,go=1,mo=2,Me=Symbol(),bs="http://www.w3.org/1999/xhtml";function po(){console.warn("https://svelte.dev/e/svelte_boundary_reset_noop")}function ys(e){return e===this.v}function ho(e,t){return e!=e?t==t:e!==t||e!==null&&typeof e=="object"||typeof e=="function"}function ws(e){return!ho(e,this.v)}let Fn=!1,_o=!1;function bo(){Fn=!0}let Ce=null;function Pn(e){Ce=e}function qe(e,t=!1,n){Ce={p:Ce,i:!1,c:null,e:null,s:e,x:null,l:Fn&&!t?{s:null,u:null,$:[]}:null}}function je(e){var t=Ce,n=t.e;if(n!==null){t.e=null;for(var a of n)Hs(a)}return t.i=!0,Ce=t.p,{}}function qn(){return!Fn||Ce!==null&&Ce.l===null}let nn=[];function Es(){var e=nn;nn=[],ji(e)}function Nt(e){if(nn.length===0&&!Tn){var t=nn;queueMicrotask(()=>{t===nn&&Es()})}nn.push(e)}function yo(){for(;nn.length>0;)Es()}function Ss(e){var t=me;if(t===null)return ue.f|=Yt,e;if((t.f&oa)===0&&(t.f&Qn)===0)throw e;Bn(e,t)}function Bn(e,t){for(;t!==null;){if((t.f&er)!==0){if((t.f&oa)===0)throw e;try{t.b.error(e);return}catch(n){e=n}}t=t.parent}throw e}const wo=-7169;function Ae(e,t){e.f=e.f&wo|t}function wr(e){(e.f&ct)!==0||e.deps===null?Ae(e,Le):Ae(e,yt)}function ks(e){if(e!==null)for(const t of e)(t.f&Ue)===0||(t.f&pn)===0||(t.f^=pn,ks(t.deps))}function xs(e,t,n){(e.f&Fe)!==0?t.add(e):(e.f&yt)!==0&&n.add(e),ks(e.deps),Ae(e,Le)}const da=new Set;let le=null,nr=null,Be=null,Ye=[],La=null,ar=!1,Tn=!1;var Nn,Cn,on,Rn,aa,ra,ln,Ot,In,Rt,rr,sr,Ts;const Pr=class Pr{constructor(){fe(this,Rt);Et(this,"committed",!1);Et(this,"current",new Map);Et(this,"previous",new Map);fe(this,Nn,new Set);fe(this,Cn,new Set);fe(this,on,0);fe(this,Rn,0);fe(this,aa,null);fe(this,ra,new Set);fe(this,ln,new Set);fe(this,Ot,new Map);Et(this,"is_fork",!1);fe(this,In,!1)}is_deferred(){return this.is_fork||x(this,Rn)>0}skip_effect(t){x(this,Ot).has(t)||x(this,Ot).set(t,{d:[],m:[]})}unskip_effect(t){var n=x(this,Ot).get(t);if(n){x(this,Ot).delete(t);for(var a of n.d)Ae(a,Fe),ht(a);for(a of n.m)Ae(a,yt),ht(a)}}process(t){var r;Ye=[],this.apply();var n=[],a=[];for(const i of t)et(this,Rt,rr).call(this,i,n,a);if(this.is_deferred()){et(this,Rt,sr).call(this,a),et(this,Rt,sr).call(this,n);for(const[i,o]of x(this,Ot))Is(i,o)}else{for(const i of x(this,Nn))i();x(this,Nn).clear(),x(this,on)===0&&et(this,Rt,Ts).call(this),nr=this,le=null,Fr(a),Fr(n),nr=null,(r=x(this,aa))==null||r.resolve()}Be=null}capture(t,n){n!==Me&&!this.previous.has(t)&&this.previous.set(t,n),(t.f&Yt)===0&&(this.current.set(t,t.v),Be==null||Be.set(t,t.v))}activate(){le=this,this.apply()}deactivate(){le===this&&(le=null,Be=null)}flush(){if(this.activate(),Ye.length>0){if(Ns(),le!==null&&le!==this)return}else x(this,on)===0&&this.process([]);this.deactivate()}discard(){for(const t of x(this,Cn))t(this);x(this,Cn).clear()}increment(t){oe(this,on,x(this,on)+1),t&&oe(this,Rn,x(this,Rn)+1)}decrement(t){oe(this,on,x(this,on)-1),t&&oe(this,Rn,x(this,Rn)-1),!x(this,In)&&(oe(this,In,!0),Nt(()=>{oe(this,In,!1),this.is_deferred()?Ye.length>0&&this.flush():this.revive()}))}revive(){for(const t of x(this,ra))x(this,ln).delete(t),Ae(t,Fe),ht(t);for(const t of x(this,ln))Ae(t,yt),ht(t);this.flush()}oncommit(t){x(this,Nn).add(t)}ondiscard(t){x(this,Cn).add(t)}settled(){return(x(this,aa)??oe(this,aa,gs())).promise}static ensure(){if(le===null){const t=le=new Pr;da.add(le),Tn||Nt(()=>{le===t&&t.flush()})}return le}apply(){}};Nn=new WeakMap,Cn=new WeakMap,on=new WeakMap,Rn=new WeakMap,aa=new WeakMap,ra=new WeakMap,ln=new WeakMap,Ot=new WeakMap,In=new WeakMap,Rt=new WeakSet,rr=function(t,n,a){t.f^=Le;for(var r=t.first,i=null;r!==null;){var o=r.f,l=(o&(wt|_n))!==0,c=l&&(o&Le)!==0,u=c||(o&rt)!==0||x(this,Ot).has(r);if(!u&&r.fn!==null){l?r.f^=Le:i!==null&&(o&(Qn|Ma|ms))!==0?i.b.defer_effect(r):(o&Qn)!==0?n.push(r):ua(r)&&((o&Ht)!==0&&x(this,ln).add(r),zn(r));var f=r.first;if(f!==null){r=f;continue}}for(;r!==null;){r===i&&(i=null);var _=r.next;if(_!==null){r=_;break}r=r.parent}}},sr=function(t){for(var n=0;n<t.length;n+=1)xs(t[n],x(this,ra),x(this,ln))},Ts=function(){var r;if(da.size>1){this.previous.clear();var t=Be,n=!0;for(const i of da){if(i===this){n=!1;continue}const o=[];for(const[c,u]of this.current){if(i.current.has(c))if(n&&u!==i.current.get(c))i.current.set(c,u);else continue;o.push(c)}if(o.length===0)continue;const l=[...i.current.keys()].filter(c=>!this.current.has(c));if(l.length>0){var a=Ye;Ye=[];const c=new Set,u=new Map;for(const f of o)Cs(f,l,c,u);if(Ye.length>0){le=i,i.apply();for(const f of Ye)et(r=i,Rt,rr).call(r,f,[],[]);i.deactivate()}Ye=a}}le=null,Be=t}this.committed=!0,da.delete(this)};let Ut=Pr;function As(e){var t=Tn;Tn=!0;try{for(var n;;){if(yo(),Ye.length===0&&(le==null||le.flush(),Ye.length===0))return La=null,n;Ns()}}finally{Tn=t}}function Ns(){ar=!0;var e=null;try{for(var t=0;Ye.length>0;){var n=Ut.ensure();if(t++>1e3){var a,r;Eo()}n.process(Ye),Jt.clear()}}finally{Ye=[],ar=!1,La=null}}function Eo(){try{Qi()}catch(e){Bn(e,La)}}let vt=null;function Fr(e){var t=e.length;if(t!==0){for(var n=0;n<t;){var a=e[n++];if((a.f&(zt|rt))===0&&ua(a)&&(vt=new Set,zn(a),a.deps===null&&a.first===null&&a.nodes===null&&a.teardown===null&&a.ac===null&&Ks(a),(vt==null?void 0:vt.size)>0)){Jt.clear();for(const r of vt){if((r.f&(zt|rt))!==0)continue;const i=[r];let o=r.parent;for(;o!==null;)vt.has(o)&&(vt.delete(o),i.push(o)),o=o.parent;for(let l=i.length-1;l>=0;l--){const c=i[l];(c.f&(zt|rt))===0&&zn(c)}}vt.clear()}}vt=null}}function Cs(e,t,n,a){if(!n.has(e)&&(n.add(e),e.reactions!==null))for(const r of e.reactions){const i=r.f;(i&Ue)!==0?Cs(r,t,n,a):(i&(yr|Ht))!==0&&(i&Fe)===0&&Rs(r,t,a)&&(Ae(r,Fe),ht(r))}}function Rs(e,t,n){const a=n.get(e);if(a!==void 0)return a;if(e.deps!==null)for(const r of e.deps){if(Dn.call(t,r))return!0;if((r.f&Ue)!==0&&Rs(r,t,n))return n.set(r,!0),!0}return n.set(e,!1),!1}function ht(e){for(var t=La=e;t.parent!==null;){t=t.parent;var n=t.f;if(ar&&t===me&&(n&Ht)!==0&&(n&ps)===0)return;if((n&(_n|wt))!==0){if((n&Le)===0)return;t.f^=Le}}Ye.push(t)}function Is(e,t){if(!((e.f&wt)!==0&&(e.f&Le)!==0)){(e.f&Fe)!==0?t.d.push(e):(e.f&yt)!==0&&t.m.push(e),Ae(e,Le);for(var n=e.first;n!==null;)Is(n,t),n=n.next}}function So(e){let t=0,n=jt(0),a;return()=>{kr()&&(s(n),Ba(()=>(t===0&&(a=bn(()=>e(()=>Yn(n)))),t+=1,()=>{Nt(()=>{t-=1,t===0&&(a==null||a(),a=void 0,Yn(n))})})))}}var ko=mn|Un;function xo(e,t,n){new To(e,t,n)}var gt,br,Mt,cn,kt,xt,nt,Tt,Lt,un,Kt,On,Mn,Ln,Dt,Ra,Qe,Ao,No,ir,_a,or;class To{constructor(t,n,a){fe(this,Qe);Et(this,"parent");Et(this,"is_pending",!1);fe(this,gt);fe(this,br,null);fe(this,Mt);fe(this,cn);fe(this,kt);fe(this,xt,null);fe(this,nt,null);fe(this,Tt,null);fe(this,Lt,null);fe(this,un,0);fe(this,Kt,0);fe(this,On,!1);fe(this,Mn,new Set);fe(this,Ln,new Set);fe(this,Dt,null);fe(this,Ra,So(()=>(oe(this,Dt,jt(x(this,un))),()=>{oe(this,Dt,null)})));oe(this,gt,t),oe(this,Mt,n),oe(this,cn,r=>{var i=me;i.b=this,i.f|=er,a(r)}),this.parent=me.b,oe(this,kt,ca(()=>{et(this,Qe,ir).call(this)},ko))}defer_effect(t){xs(t,x(this,Mn),x(this,Ln))}is_rendered(){return!this.is_pending&&(!this.parent||this.parent.is_rendered())}has_pending_snippet(){return!!x(this,Mt).pending}update_pending_count(t){et(this,Qe,or).call(this,t),oe(this,un,x(this,un)+t),!(!x(this,Dt)||x(this,On))&&(oe(this,On,!0),Nt(()=>{oe(this,On,!1),x(this,Dt)&&Ft(x(this,Dt),x(this,un))}))}get_effect_pending(){return x(this,Ra).call(this),s(x(this,Dt))}error(t){var n=x(this,Mt).onerror;let a=x(this,Mt).failed;if(!n&&!a)throw t;x(this,xt)&&(Xe(x(this,xt)),oe(this,xt,null)),x(this,nt)&&(Xe(x(this,nt)),oe(this,nt,null)),x(this,Tt)&&(Xe(x(this,Tt)),oe(this,Tt,null));var r=!1,i=!1;const o=()=>{if(r){po();return}r=!0,i&&ao(),x(this,Tt)!==null&&fn(x(this,Tt),()=>{oe(this,Tt,null)}),et(this,Qe,_a).call(this,()=>{Ut.ensure(),et(this,Qe,ir).call(this)})};Nt(()=>{try{i=!0,n==null||n(t,o),i=!1}catch(l){Bn(l,x(this,kt)&&x(this,kt).parent)}a&&oe(this,Tt,et(this,Qe,_a).call(this,()=>{Ut.ensure();try{return pt(()=>{var l=me;l.b=this,l.f|=er,a(x(this,gt),()=>t,()=>o)})}catch(l){return Bn(l,x(this,kt).parent),null}}))})}}gt=new WeakMap,br=new WeakMap,Mt=new WeakMap,cn=new WeakMap,kt=new WeakMap,xt=new WeakMap,nt=new WeakMap,Tt=new WeakMap,Lt=new WeakMap,un=new WeakMap,Kt=new WeakMap,On=new WeakMap,Mn=new WeakMap,Ln=new WeakMap,Dt=new WeakMap,Ra=new WeakMap,Qe=new WeakSet,Ao=function(){try{oe(this,xt,pt(()=>x(this,cn).call(this,x(this,gt))))}catch(t){this.error(t)}},No=function(){const t=x(this,Mt).pending;t&&(this.is_pending=!0,oe(this,nt,pt(()=>t(x(this,gt)))),Nt(()=>{var n=oe(this,Lt,document.createDocumentFragment()),a=qt();n.append(a),oe(this,xt,et(this,Qe,_a).call(this,()=>(Ut.ensure(),pt(()=>x(this,cn).call(this,a))))),x(this,Kt)===0&&(x(this,gt).before(n),oe(this,Lt,null),fn(x(this,nt),()=>{oe(this,nt,null)}),this.is_pending=!1)}))},ir=function(){try{if(this.is_pending=this.has_pending_snippet(),oe(this,Kt,0),oe(this,un,0),oe(this,xt,pt(()=>{x(this,cn).call(this,x(this,gt))})),x(this,Kt)>0){var t=oe(this,Lt,document.createDocumentFragment());Ys(x(this,xt),t);const n=x(this,Mt).pending;oe(this,nt,pt(()=>n(x(this,gt))))}else this.is_pending=!1}catch(n){this.error(n)}},_a=function(t){var n=me,a=ue,r=Ce;Ct(x(this,kt)),dt(x(this,kt)),Pn(x(this,kt).ctx);try{return t()}catch(i){return Ss(i),null}finally{Ct(n),dt(a),Pn(r)}},or=function(t){var n;if(!this.has_pending_snippet()){this.parent&&et(n=this.parent,Qe,or).call(n,t);return}if(oe(this,Kt,x(this,Kt)+t),x(this,Kt)===0){this.is_pending=!1;for(const a of x(this,Mn))Ae(a,Fe),ht(a);for(const a of x(this,Ln))Ae(a,yt),ht(a);x(this,Mn).clear(),x(this,Ln).clear(),x(this,nt)&&fn(x(this,nt),()=>{oe(this,nt,null)}),x(this,Lt)&&(x(this,gt).before(x(this,Lt)),oe(this,Lt,null))}};function Co(e,t,n,a){const r=qn()?Da:Er;var i=e.filter(v=>!v.settled);if(n.length===0&&i.length===0){a(t.map(r));return}var o=le,l=me,c=Os(),u=i.length===1?i[0].promise:i.length>1?Promise.all(i.map(v=>v.promise)):null;function f(v){c();try{a(v)}catch(k){(l.f&zt)===0&&Bn(k,l)}o==null||o.deactivate(),ka()}if(n.length===0){u.then(()=>f(t.map(r)));return}function _(){c(),Promise.all(n.map(v=>Ro(v))).then(v=>f([...t.map(r),...v])).catch(v=>Bn(v,l))}u?u.then(_):_()}function Os(){var e=me,t=ue,n=Ce,a=le;return function(i=!0){Ct(e),dt(t),Pn(n),i&&(a==null||a.activate())}}function ka(){Ct(null),dt(null),Pn(null)}function Da(e){var t=Ue|Fe,n=ue!==null&&(ue.f&Ue)!==0?ue:null;return me!==null&&(me.f|=Un),{ctx:Ce,deps:null,effects:null,equals:ys,f:t,fn:e,reactions:null,rv:0,v:Me,wv:0,parent:n??me,ac:null}}function Ro(e,t,n){let a=me;a===null&&Vi();var r=a.b,i=void 0,o=jt(Me),l=!ue,c=new Map;return Ho(()=>{var k;var u=gs();i=u.promise;try{Promise.resolve(e()).then(u.resolve,u.reject).then(()=>{f===le&&f.committed&&f.deactivate(),ka()})}catch(p){u.reject(p),ka()}var f=le;if(l){var _=r.is_rendered();r.update_pending_count(1),f.increment(_),(k=c.get(f))==null||k.reject(tn),c.delete(f),c.set(f,u)}const v=(p,T=void 0)=>{if(f.activate(),T)T!==tn&&(o.f|=Yt,Ft(o,T));else{(o.f&Yt)!==0&&(o.f^=Yt),Ft(o,p);for(const[m,C]of c){if(c.delete(m),m===f)break;C.reject(tn)}}l&&(r.update_pending_count(-1),f.decrement(_))};u.promise.then(v,p=>v(null,p||"unknown"))}),js(()=>{for(const u of c.values())u.reject(tn)}),new Promise(u=>{function f(_){function v(){_===i?u(o):f(i)}_.then(v,v)}f(i)})}function K(e){const t=Da(e);return Js(t),t}function Er(e){const t=Da(e);return t.equals=ws,t}function Io(e){var t=e.effects;if(t!==null){e.effects=null;for(var n=0;n<t.length;n+=1)Xe(t[n])}}function Oo(e){for(var t=e.parent;t!==null;){if((t.f&Ue)===0)return(t.f&zt)===0?t:null;t=t.parent}return null}function Sr(e){var t,n=me;Ct(Oo(e));try{e.f&=~pn,Io(e),t=ei(e)}finally{Ct(n)}return t}function Ms(e){var t=Sr(e);if(!e.equals(t)&&(e.wv=Qs(),(!(le!=null&&le.is_fork)||e.deps===null)&&(e.v=t,e.deps===null))){Ae(e,Le);return}Xt||(Be!==null?(kr()||le!=null&&le.is_fork)&&Be.set(e,t):wr(e))}function Mo(e){var t,n;if(e.effects!==null)for(const a of e.effects)(a.teardown||a.ac)&&((t=a.teardown)==null||t.call(a),(n=a.ac)==null||n.abort(tn),a.teardown=ha,a.ac=null,$n(a,0),xr(a))}function Ls(e){if(e.effects!==null)for(const t of e.effects)t.teardown&&zn(t)}let lr=new Set;const Jt=new Map;let Ds=!1;function jt(e,t){var n={f:0,v:e,reactions:null,equals:ys,rv:0,wv:0};return n}function G(e,t){const n=jt(e);return Js(n),n}function cr(e,t=!1,n=!0){var r;const a=jt(e);return t||(a.equals=ws),Fn&&n&&Ce!==null&&Ce.l!==null&&((r=Ce.l).s??(r.s=[])).push(a),a}function I(e,t,n=!1){ue!==null&&(!_t||(ue.f&Ur)!==0)&&qn()&&(ue.f&(Ue|Ht|yr|Ur))!==0&&(ut===null||!Dn.call(ut,e))&&no();let a=n?Ne(t):t;return Ft(e,a)}function Ft(e,t){if(!e.equals(t)){var n=e.v;Xt?Jt.set(e,t):Jt.set(e,n),e.v=t;var a=Ut.ensure();if(a.capture(e,n),(e.f&Ue)!==0){const r=e;(e.f&Fe)!==0&&Sr(r),wr(r)}e.wv=Qs(),Ps(e,Fe),qn()&&me!==null&&(me.f&Le)!==0&&(me.f&(wt|_n))===0&&(lt===null?Wo([e]):lt.push(e)),!a.is_fork&&lr.size>0&&!Ds&&Lo()}return t}function Lo(){Ds=!1;for(const e of lr)(e.f&Le)!==0&&Ae(e,yt),ua(e)&&zn(e);lr.clear()}function Yn(e){I(e,e.v+1)}function Ps(e,t){var n=e.reactions;if(n!==null)for(var a=qn(),r=n.length,i=0;i<r;i++){var o=n[i],l=o.f;if(!(!a&&o===me)){var c=(l&Fe)===0;if(c&&Ae(o,t),(l&Ue)!==0){var u=o;Be==null||Be.delete(u),(l&pn)===0&&(l&ct&&(o.f|=pn),Ps(u,yt))}else c&&((l&Ht)!==0&&vt!==null&&vt.add(o),ht(o))}}}function Ne(e){if(typeof e!="object"||e===null||Zn in e)return e;const t=vs(e);if(t!==Ui&&t!==Fi)return e;var n=new Map,a=fs(e),r=G(0),i=vn,o=l=>{if(vn===i)return l();var c=ue,u=vn;dt(null),Hr(i);var f=l();return dt(c),Hr(u),f};return a&&n.set("length",G(e.length)),new Proxy(e,{defineProperty(l,c,u){(!("value"in u)||u.configurable===!1||u.enumerable===!1||u.writable===!1)&&eo();var f=n.get(c);return f===void 0?o(()=>{var _=G(u.value);return n.set(c,_),_}):I(f,u.value,!0),!0},deleteProperty(l,c){var u=n.get(c);if(u===void 0){if(c in l){const f=o(()=>G(Me));n.set(c,f),Yn(r)}}else I(u,Me),Yn(r);return!0},get(l,c,u){var k;if(c===Zn)return e;var f=n.get(c),_=c in l;if(f===void 0&&(!_||(k=xn(l,c))!=null&&k.writable)&&(f=o(()=>{var p=Ne(_?l[c]:Me),T=G(p);return T}),n.set(c,f)),f!==void 0){var v=s(f);return v===Me?void 0:v}return Reflect.get(l,c,u)},getOwnPropertyDescriptor(l,c){var u=Reflect.getOwnPropertyDescriptor(l,c);if(u&&"value"in u){var f=n.get(c);f&&(u.value=s(f))}else if(u===void 0){var _=n.get(c),v=_==null?void 0:_.v;if(_!==void 0&&v!==Me)return{enumerable:!0,configurable:!0,value:v,writable:!0}}return u},has(l,c){var v;if(c===Zn)return!0;var u=n.get(c),f=u!==void 0&&u.v!==Me||Reflect.has(l,c);if(u!==void 0||me!==null&&(!f||(v=xn(l,c))!=null&&v.writable)){u===void 0&&(u=o(()=>{var k=f?Ne(l[c]):Me,p=G(k);return p}),n.set(c,u));var _=s(u);if(_===Me)return!1}return f},set(l,c,u,f){var P;var _=n.get(c),v=c in l;if(a&&c==="length")for(var k=u;k<_.v;k+=1){var p=n.get(k+"");p!==void 0?I(p,Me):k in l&&(p=o(()=>G(Me)),n.set(k+"",p))}if(_===void 0)(!v||(P=xn(l,c))!=null&&P.writable)&&(_=o(()=>G(void 0)),I(_,Ne(u)),n.set(c,_));else{v=_.v!==Me;var T=o(()=>Ne(u));I(_,T)}var m=Reflect.getOwnPropertyDescriptor(l,c);if(m!=null&&m.set&&m.set.call(f,u),!v){if(a&&typeof c=="string"){var C=n.get("length"),z=Number(c);Number.isInteger(z)&&z>=C.v&&I(C,z+1)}Yn(r)}return!0},ownKeys(l){s(r);var c=Reflect.ownKeys(l).filter(_=>{var v=n.get(_);return v===void 0||v.v!==Me});for(var[u,f]of n)f.v!==Me&&!(u in l)&&c.push(u);return c},setPrototypeOf(){to()}})}var ur,Bs,zs,Us;function Do(){if(ur===void 0){ur=window,Bs=/Firefox/.test(navigator.userAgent);var e=Element.prototype,t=Node.prototype,n=Text.prototype;zs=xn(t,"firstChild").get,Us=xn(t,"nextSibling").get,zr(e)&&(e.__click=void 0,e.__className=void 0,e.__attributes=null,e.__style=void 0,e.__e=void 0),zr(n)&&(n.__t=void 0)}}function qt(e=""){return document.createTextNode(e)}function Vt(e){return zs.call(e)}function la(e){return Us.call(e)}function d(e,t){return Vt(e)}function ze(e,t=!1){{var n=Vt(e);return n instanceof Comment&&n.data===""?la(n):n}}function h(e,t=1,n=!1){let a=e;for(;t--;)a=la(a);return a}function Po(e){e.textContent=""}function Fs(){return!1}function Bo(e,t,n){return document.createElementNS(bs,e,void 0)}let qr=!1;function zo(){qr||(qr=!0,document.addEventListener("reset",e=>{Promise.resolve().then(()=>{var t;if(!e.defaultPrevented)for(const n of e.target.elements)(t=n.__on_r)==null||t.call(n)})},{capture:!0}))}function Pa(e){var t=ue,n=me;dt(null),Ct(null);try{return e()}finally{dt(t),Ct(n)}}function qs(e,t,n,a=n){e.addEventListener(t,()=>Pa(n));const r=e.__on_r;r?e.__on_r=()=>{r(),a(!0)}:e.__on_r=()=>a(!0),zo()}function Uo(e){me===null&&(ue===null&&Xi(),Ji()),Xt&&Yi()}function Fo(e,t){var n=t.last;n===null?t.last=t.first=e:(n.next=e,e.prev=n,t.last=e)}function Gt(e,t,n){var a=me;a!==null&&(a.f&rt)!==0&&(e|=rt);var r={ctx:Ce,deps:null,nodes:null,f:e|Fe|ct,first:null,fn:t,last:null,next:null,parent:a,b:a&&a.b,prev:null,teardown:null,wv:0,ac:null};if(n)try{zn(r)}catch(l){throw Xe(r),l}else t!==null&&ht(r);var i=r;if(n&&i.deps===null&&i.teardown===null&&i.nodes===null&&i.first===i.last&&(i.f&Un)===0&&(i=i.first,(e&Ht)!==0&&(e&mn)!==0&&i!==null&&(i.f|=mn)),i!==null&&(i.parent=a,a!==null&&Fo(i,a),ue!==null&&(ue.f&Ue)!==0&&(e&_n)===0)){var o=ue;(o.effects??(o.effects=[])).push(i)}return r}function kr(){return ue!==null&&!_t}function js(e){const t=Gt(Ma,null,!1);return Ae(t,Le),t.teardown=e,t}function bt(e){Uo();var t=me.f,n=!ue&&(t&wt)!==0&&(t&oa)===0;if(n){var a=Ce;(a.e??(a.e=[])).push(e)}else return Hs(e)}function Hs(e){return Gt(Qn|Hi,e,!1)}function qo(e){Ut.ensure();const t=Gt(_n|Un,e,!0);return(n={})=>new Promise(a=>{n.outro?fn(t,()=>{Xe(t),a(void 0)}):(Xe(t),a(void 0))})}function jo(e){return Gt(Qn,e,!1)}function Ho(e){return Gt(yr|Un,e,!0)}function Ba(e,t=0){return Gt(Ma|t,e,!0)}function q(e,t=[],n=[],a=[]){Co(a,t,n,r=>{Gt(Ma,()=>e(...r.map(s)),!0)})}function ca(e,t=0){var n=Gt(Ht|t,e,!0);return n}function pt(e){return Gt(wt|Un,e,!0)}function Gs(e){var t=e.teardown;if(t!==null){const n=Xt,a=ue;jr(!0),dt(null);try{t.call(null)}finally{jr(n),dt(a)}}}function xr(e,t=!1){var n=e.first;for(e.first=e.last=null;n!==null;){const r=n.ac;r!==null&&Pa(()=>{r.abort(tn)});var a=n.next;(n.f&_n)!==0?n.parent=null:Xe(n,t),n=a}}function Go(e){for(var t=e.first;t!==null;){var n=t.next;(t.f&wt)===0&&Xe(t),t=n}}function Xe(e,t=!0){var n=!1;(t||(e.f&ps)!==0)&&e.nodes!==null&&e.nodes.end!==null&&(Ws(e.nodes.start,e.nodes.end),n=!0),xr(e,t&&!n),$n(e,0),Ae(e,zt);var a=e.nodes&&e.nodes.t;if(a!==null)for(const i of a)i.stop();Gs(e);var r=e.parent;r!==null&&r.first!==null&&Ks(e),e.next=e.prev=e.teardown=e.ctx=e.deps=e.fn=e.nodes=e.ac=null}function Ws(e,t){for(;e!==null;){var n=e===t?null:la(e);e.remove(),e=n}}function Ks(e){var t=e.parent,n=e.prev,a=e.next;n!==null&&(n.next=a),a!==null&&(a.prev=n),t!==null&&(t.first===e&&(t.first=a),t.last===e&&(t.last=n))}function fn(e,t,n=!0){var a=[];Vs(e,a,!0);var r=()=>{n&&Xe(e),t&&t()},i=a.length;if(i>0){var o=()=>--i||r();for(var l of a)l.out(o)}else r()}function Vs(e,t,n){if((e.f&rt)===0){e.f^=rt;var a=e.nodes&&e.nodes.t;if(a!==null)for(const l of a)(l.is_global||n)&&t.push(l);for(var r=e.first;r!==null;){var i=r.next,o=(r.f&mn)!==0||(r.f&wt)!==0&&(e.f&Ht)!==0;Vs(r,t,o?n:!1),r=i}}}function Tr(e){Zs(e,!0)}function Zs(e,t){if((e.f&rt)!==0){e.f^=rt,(e.f&Le)===0&&(Ae(e,Fe),ht(e));for(var n=e.first;n!==null;){var a=n.next,r=(n.f&mn)!==0||(n.f&wt)!==0;Zs(n,r?t:!1),n=a}var i=e.nodes&&e.nodes.t;if(i!==null)for(const o of i)(o.is_global||t)&&o.in()}}function Ys(e,t){if(e.nodes)for(var n=e.nodes.start,a=e.nodes.end;n!==null;){var r=n===a?null:la(n);t.append(n),n=r}}let ba=!1,Xt=!1;function jr(e){Xt=e}let ue=null,_t=!1;function dt(e){ue=e}let me=null;function Ct(e){me=e}let ut=null;function Js(e){ue!==null&&(ut===null?ut=[e]:ut.push(e))}let Je=null,tt=0,lt=null;function Wo(e){lt=e}let Xs=1,an=0,vn=an;function Hr(e){vn=e}function Qs(){return++Xs}function ua(e){var t=e.f;if((t&Fe)!==0)return!0;if(t&Ue&&(e.f&=~pn),(t&yt)!==0){for(var n=e.deps,a=n.length,r=0;r<a;r++){var i=n[r];if(ua(i)&&Ms(i),i.wv>e.wv)return!0}(t&ct)!==0&&Be===null&&Ae(e,Le)}return!1}function $s(e,t,n=!0){var a=e.reactions;if(a!==null&&!(ut!==null&&Dn.call(ut,e)))for(var r=0;r<a.length;r++){var i=a[r];(i.f&Ue)!==0?$s(i,t,!1):t===i&&(n?Ae(i,Fe):(i.f&Le)!==0&&Ae(i,yt),ht(i))}}function ei(e){var T;var t=Je,n=tt,a=lt,r=ue,i=ut,o=Ce,l=_t,c=vn,u=e.f;Je=null,tt=0,lt=null,ue=(u&(wt|_n))===0?e:null,ut=null,Pn(e.ctx),_t=!1,vn=++an,e.ac!==null&&(Pa(()=>{e.ac.abort(tn)}),e.ac=null);try{e.f|=tr;var f=e.fn,_=f();e.f|=oa;var v=e.deps,k=le==null?void 0:le.is_fork;if(Je!==null){var p;if(k||$n(e,tt),v!==null&&tt>0)for(v.length=tt+Je.length,p=0;p<Je.length;p++)v[tt+p]=Je[p];else e.deps=v=Je;if(kr()&&(e.f&ct)!==0)for(p=tt;p<v.length;p++)((T=v[p]).reactions??(T.reactions=[])).push(e)}else!k&&v!==null&&tt<v.length&&($n(e,tt),v.length=tt);if(qn()&&lt!==null&&!_t&&v!==null&&(e.f&(Ue|yt|Fe))===0)for(p=0;p<lt.length;p++)$s(lt[p],e);if(r!==null&&r!==e){if(an++,r.deps!==null)for(let m=0;m<n;m+=1)r.deps[m].rv=an;if(t!==null)for(const m of t)m.rv=an;lt!==null&&(a===null?a=lt:a.push(...lt))}return(e.f&Yt)!==0&&(e.f^=Yt),_}catch(m){return Ss(m)}finally{e.f^=tr,Je=t,tt=n,lt=a,ue=r,ut=i,Pn(o),_t=l,vn=c}}function Ko(e,t){let n=t.reactions;if(n!==null){var a=Pi.call(n,e);if(a!==-1){var r=n.length-1;r===0?n=t.reactions=null:(n[a]=n[r],n.pop())}}if(n===null&&(t.f&Ue)!==0&&(Je===null||!Dn.call(Je,t))){var i=t;(i.f&ct)!==0&&(i.f^=ct,i.f&=~pn),wr(i),Mo(i),$n(i,0)}}function $n(e,t){var n=e.deps;if(n!==null)for(var a=t;a<n.length;a++)Ko(e,n[a])}function zn(e){var t=e.f;if((t&zt)===0){Ae(e,Le);var n=me,a=ba;me=e,ba=!0;try{(t&(Ht|ms))!==0?Go(e):xr(e),Gs(e);var r=ei(e);e.teardown=typeof r=="function"?r:null,e.wv=Xs;var i;$a&&_o&&(e.f&Fe)!==0&&e.deps}finally{ba=a,me=n}}}async function Vo(){await Promise.resolve(),As()}function s(e){var t=e.f,n=(t&Ue)!==0;if(ue!==null&&!_t){var a=me!==null&&(me.f&zt)!==0;if(!a&&(ut===null||!Dn.call(ut,e))){var r=ue.deps;if((ue.f&tr)!==0)e.rv<an&&(e.rv=an,Je===null&&r!==null&&r[tt]===e?tt++:Je===null?Je=[e]:Je.push(e));else{(ue.deps??(ue.deps=[])).push(e);var i=e.reactions;i===null?e.reactions=[ue]:Dn.call(i,ue)||i.push(ue)}}}if(Xt&&Jt.has(e))return Jt.get(e);if(n){var o=e;if(Xt){var l=o.v;return((o.f&Le)===0&&o.reactions!==null||ni(o))&&(l=Sr(o)),Jt.set(o,l),l}var c=(o.f&ct)===0&&!_t&&ue!==null&&(ba||(ue.f&ct)!==0),u=(o.f&oa)===0;ua(o)&&(c&&(o.f|=ct),Ms(o)),c&&!u&&(Ls(o),ti(o))}if(Be!=null&&Be.has(e))return Be.get(e);if((e.f&Yt)!==0)throw e.v;return e.v}function ti(e){if(e.f|=ct,e.deps!==null)for(const t of e.deps)(t.reactions??(t.reactions=[])).push(e),(t.f&Ue)!==0&&(t.f&ct)===0&&(Ls(t),ti(t))}function ni(e){if(e.v===Me)return!0;if(e.deps===null)return!1;for(const t of e.deps)if(Jt.has(t)||(t.f&Ue)!==0&&ni(t))return!0;return!1}function bn(e){var t=_t;try{return _t=!0,e()}finally{_t=t}}const Zo=["touchstart","touchmove"];function Yo(e){return Zo.includes(e)}const rn=Symbol("events"),ai=new Set,dr=new Set;function Jo(e,t,n,a={}){function r(i){if(a.capture||fr.call(t,i),!i.cancelBubble)return Pa(()=>n==null?void 0:n.call(this,i))}return e.startsWith("pointer")||e.startsWith("touch")||e==="wheel"?Nt(()=>{t.addEventListener(e,r,a)}):t.addEventListener(e,r,a),r}function sn(e,t,n,a,r){var i={capture:a,passive:r},o=Jo(e,t,n,i);(t===document.body||t===window||t===document||t instanceof HTMLMediaElement)&&js(()=>{t.removeEventListener(e,o,i)})}function te(e,t,n){(t[rn]??(t[rn]={}))[e]=n}function ft(e){for(var t=0;t<e.length;t++)ai.add(e[t]);for(var n of dr)n(e)}let Gr=null;function fr(e){var m,C;var t=this,n=t.ownerDocument,a=e.type,r=((m=e.composedPath)==null?void 0:m.call(e))||[],i=r[0]||e.target;Gr=e;var o=0,l=Gr===e&&e[rn];if(l){var c=r.indexOf(l);if(c!==-1&&(t===document||t===window)){e[rn]=t;return}var u=r.indexOf(t);if(u===-1)return;c<=u&&(o=c)}if(i=r[o]||e.target,i!==t){Bi(e,"currentTarget",{configurable:!0,get(){return i||n}});var f=ue,_=me;dt(null),Ct(null);try{for(var v,k=[];i!==null;){var p=i.assignedSlot||i.parentNode||i.host||null;try{var T=(C=i[rn])==null?void 0:C[a];T!=null&&(!i.disabled||e.target===i)&&T.call(i,e)}catch(z){v?k.push(z):v=z}if(e.cancelBubble||p===t||p===null)break;i=p}if(v){for(let z of k)queueMicrotask(()=>{throw z});throw v}}finally{e[rn]=t,delete e.currentTarget,dt(f),Ct(_)}}}var us;const Ha=((us=globalThis==null?void 0:globalThis.window)==null?void 0:us.trustedTypes)&&globalThis.window.trustedTypes.createPolicy("svelte-trusted-html",{createHTML:e=>e});function Xo(e){return(Ha==null?void 0:Ha.createHTML(e))??e}function ri(e,t=!1){var n=Bo("template");return e=e.replaceAll("<!>","<!---->"),n.innerHTML=t?Xo(e):e,n.content}function ea(e,t){var n=me;n.nodes===null&&(n.nodes={start:e,end:t,a:null,t:null})}function N(e,t){var n=(t&go)!==0,a=(t&mo)!==0,r,i=!e.startsWith("<!>");return()=>{r===void 0&&(r=ri(i?e:"<!>"+e,!0),n||(r=Vt(r)));var o=a||Bs?document.importNode(r,!0):r.cloneNode(!0);if(n){var l=Vt(o),c=o.lastChild;ea(l,c)}else ea(o,o);return o}}function ta(e=""){{var t=qt(e+"");return ea(t,t),t}}function Pt(){var e=document.createDocumentFragment(),t=document.createComment(""),n=qt();return e.append(t,n),ea(t,n),e}function S(e,t){e!==null&&e.before(t)}function L(e,t){var n=t==null?"":typeof t=="object"?t+"":t;n!==(e.__t??(e.__t=e.nodeValue))&&(e.__t=n,e.nodeValue=n+"")}function Qo(e,t){return $o(e,t)}const fa=new Map;function $o(e,{target:t,anchor:n,props:a={},events:r,context:i,intro:o=!0}){Do();var l=void 0,c=qo(()=>{var u=n??t.appendChild(qt());xo(u,{pending:()=>{}},v=>{qe({});var k=Ce;i&&(k.c=i),r&&(a.$$events=r),l=e(v,a)||{},je()});var f=new Set,_=v=>{for(var k=0;k<v.length;k++){var p=v[k];if(!f.has(p)){f.add(p);var T=Yo(p);for(const z of[t,document]){var m=fa.get(z);m===void 0&&(m=new Map,fa.set(z,m));var C=m.get(p);C===void 0?(z.addEventListener(p,fr,{passive:T}),m.set(p,1)):m.set(p,C+1)}}}};return _(Oa(ai)),dr.add(_),()=>{var T;for(var v of f)for(const m of[t,document]){var k=fa.get(m),p=k.get(v);--p==0?(m.removeEventListener(v,fr),k.delete(v),k.size===0&&fa.delete(m)):k.set(v,p)}dr.delete(_),u!==n&&((T=u.parentNode)==null||T.removeChild(u))}});return el.set(l,c),l}let el=new WeakMap;var mt,At,at,dn,sa,ia,Ia;class Ar{constructor(t,n=!0){Et(this,"anchor");fe(this,mt,new Map);fe(this,At,new Map);fe(this,at,new Map);fe(this,dn,new Set);fe(this,sa,!0);fe(this,ia,()=>{var t=le;if(x(this,mt).has(t)){var n=x(this,mt).get(t),a=x(this,At).get(n);if(a)Tr(a),x(this,dn).delete(n);else{var r=x(this,at).get(n);r&&(x(this,At).set(n,r.effect),x(this,at).delete(n),r.fragment.lastChild.remove(),this.anchor.before(r.fragment),a=r.effect)}for(const[i,o]of x(this,mt)){if(x(this,mt).delete(i),i===t)break;const l=x(this,at).get(o);l&&(Xe(l.effect),x(this,at).delete(o))}for(const[i,o]of x(this,At)){if(i===n||x(this,dn).has(i))continue;const l=()=>{if(Array.from(x(this,mt).values()).includes(i)){var u=document.createDocumentFragment();Ys(o,u),u.append(qt()),x(this,at).set(i,{effect:o,fragment:u})}else Xe(o);x(this,dn).delete(i),x(this,At).delete(i)};x(this,sa)||!a?(x(this,dn).add(i),fn(o,l,!1)):l()}}});fe(this,Ia,t=>{x(this,mt).delete(t);const n=Array.from(x(this,mt).values());for(const[a,r]of x(this,at))n.includes(a)||(Xe(r.effect),x(this,at).delete(a))});this.anchor=t,oe(this,sa,n)}ensure(t,n){var a=le,r=Fs();if(n&&!x(this,At).has(t)&&!x(this,at).has(t))if(r){var i=document.createDocumentFragment(),o=qt();i.append(o),x(this,at).set(t,{effect:pt(()=>n(o)),fragment:i})}else x(this,At).set(t,pt(()=>n(this.anchor)));if(x(this,mt).set(a,t),r){for(const[l,c]of x(this,At))l===t?a.unskip_effect(c):a.skip_effect(c);for(const[l,c]of x(this,at))l===t?a.unskip_effect(c.effect):a.skip_effect(c.effect);a.oncommit(x(this,ia)),a.ondiscard(x(this,Ia))}else x(this,ia).call(this)}}mt=new WeakMap,At=new WeakMap,at=new WeakMap,dn=new WeakMap,sa=new WeakMap,ia=new WeakMap,Ia=new WeakMap;const tl=0,Ga=1;function nl(e,t,n,a,r){var i=qn(),o=Me,l=i?jt(o):cr(o,!1,!1),c=i?jt(o):cr(o,!1,!1),u=new Ar(e);ca(()=>{var f=t(),_=!1;if(qi(f)){var v=Os(),k=!1;const p=T=>{if(!_){k=!0,v(!1),Ut.ensure();try{T()}finally{ka(),Tn||As()}}};f.then(T=>{p(()=>{Ft(l,T),u.ensure(Ga,a&&(m=>a(m,l)))})},T=>{p(()=>{if(Ft(c,T),u.ensure(Ga,r&&(m=>r(m,c))),!r)throw c.v})}),Nt(()=>{k||p(()=>{u.ensure(tl,n)})})}else Ft(l,f),u.ensure(Ga,a&&(p=>a(p,l)));return()=>{_=!0}})}function F(e,t,n=!1){var a=new Ar(e),r=n?mn:0;function i(o,l){a.ensure(o,l)}ca(()=>{var o=!1;t((l,c=0)=>{o=!0,i(c,l)}),o||i(!1,null)},r)}function gn(e,t){return t}function al(e,t,n){for(var a=[],r=t.length,i,o=t.length,l=0;l<r;l++){let _=t[l];fn(_,()=>{if(i){if(i.pending.delete(_),i.done.add(_),i.pending.size===0){var v=e.outrogroups;vr(Oa(i.done)),v.delete(i),v.size===0&&(e.outrogroups=null)}}else o-=1},!1)}if(o===0){var c=a.length===0&&n!==null;if(c){var u=n,f=u.parentNode;Po(f),f.append(u),e.items.clear()}vr(t,!c)}else i={pending:new Set(t),done:new Set},(e.outrogroups??(e.outrogroups=new Set)).add(i)}function vr(e,t=!0){for(var n=0;n<e.length;n++)Xe(e[n],t)}var Wr;function st(e,t,n,a,r,i=null){var o=e,l=new Map,c=(t&_s)!==0;if(c){var u=e;o=u.appendChild(qt())}var f=null,_=Er(()=>{var C=n();return fs(C)?C:C==null?[]:Oa(C)}),v,k=!0;function p(){m.fallback=f,rl(m,v,o,t,a),f!==null&&(v.length===0?(f.f&Bt)===0?Tr(f):(f.f^=Bt,Kn(f,null,o)):fn(f,()=>{f=null}))}var T=ca(()=>{v=s(_);for(var C=v.length,z=new Set,P=le,R=Fs(),B=0;B<C;B+=1){var j=v[B],J=a(j,B),V=k?null:l.get(J);V?(V.v&&Ft(V.v,j),V.i&&Ft(V.i,B),R&&P.unskip_effect(V.e)):(V=sl(l,k?o:Wr??(Wr=qt()),j,J,B,r,t,n),k||(V.e.f|=Bt),l.set(J,V)),z.add(J)}if(C===0&&i&&!f&&(k?f=pt(()=>i(o)):(f=pt(()=>i(Wr??(Wr=qt()))),f.f|=Bt)),C>z.size&&Zi(),!k)if(R){for(const[ne,de]of l)z.has(ne)||P.skip_effect(de.e);P.oncommit(p),P.ondiscard(()=>{})}else p();s(_)}),m={effect:T,items:l,outrogroups:null,fallback:f};k=!1}function Gn(e){for(;e!==null&&(e.f&wt)===0;)e=e.next;return e}function rl(e,t,n,a,r){var de,pe,Z,se,b,M,w,O,E;var i=(a&io)!==0,o=t.length,l=e.items,c=Gn(e.effect.first),u,f=null,_,v=[],k=[],p,T,m,C;if(i)for(C=0;C<o;C+=1)p=t[C],T=r(p,C),m=l.get(T).e,(m.f&Bt)===0&&((pe=(de=m.nodes)==null?void 0:de.a)==null||pe.measure(),(_??(_=new Set)).add(m));for(C=0;C<o;C+=1){if(p=t[C],T=r(p,C),m=l.get(T).e,e.outrogroups!==null)for(const D of e.outrogroups)D.pending.delete(m),D.done.delete(m);if((m.f&Bt)!==0)if(m.f^=Bt,m===c)Kn(m,null,n);else{var z=f?f.next:c;m===e.effect.last&&(e.effect.last=m.prev),m.prev&&(m.prev.next=m.next),m.next&&(m.next.prev=m.prev),Wt(e,f,m),Wt(e,m,z),Kn(m,z,n),f=m,v=[],k=[],c=Gn(f.next);continue}if((m.f&rt)!==0&&(Tr(m),i&&((se=(Z=m.nodes)==null?void 0:Z.a)==null||se.unfix(),(_??(_=new Set)).delete(m))),m!==c){if(u!==void 0&&u.has(m)){if(v.length<k.length){var P=k[0],R;f=P.prev;var B=v[0],j=v[v.length-1];for(R=0;R<v.length;R+=1)Kn(v[R],P,n);for(R=0;R<k.length;R+=1)u.delete(k[R]);Wt(e,B.prev,j.next),Wt(e,f,B),Wt(e,j,P),c=P,f=j,C-=1,v=[],k=[]}else u.delete(m),Kn(m,c,n),Wt(e,m.prev,m.next),Wt(e,m,f===null?e.effect.first:f.next),Wt(e,f,m),f=m;continue}for(v=[],k=[];c!==null&&c!==m;)(u??(u=new Set)).add(c),k.push(c),c=Gn(c.next);if(c===null)continue}(m.f&Bt)===0&&v.push(m),f=m,c=Gn(m.next)}if(e.outrogroups!==null){for(const D of e.outrogroups)D.pending.size===0&&(vr(Oa(D.done)),(b=e.outrogroups)==null||b.delete(D));e.outrogroups.size===0&&(e.outrogroups=null)}if(c!==null||u!==void 0){var J=[];if(u!==void 0)for(m of u)(m.f&rt)===0&&J.push(m);for(;c!==null;)(c.f&rt)===0&&c!==e.fallback&&J.push(c),c=Gn(c.next);var V=J.length;if(V>0){var ne=(a&_s)!==0&&o===0?n:null;if(i){for(C=0;C<V;C+=1)(w=(M=J[C].nodes)==null?void 0:M.a)==null||w.measure();for(C=0;C<V;C+=1)(E=(O=J[C].nodes)==null?void 0:O.a)==null||E.fix()}al(e,J,ne)}}i&&Nt(()=>{var D,H;if(_!==void 0)for(m of _)(H=(D=m.nodes)==null?void 0:D.a)==null||H.apply()})}function sl(e,t,n,a,r,i,o,l){var c=(o&ro)!==0?(o&oo)===0?cr(n,!1,!1):jt(n):null,u=(o&so)!==0?jt(r):null;return{v:c,i:u,e:pt(()=>(i(t,c??n,u??r,l),()=>{e.delete(a)}))}}function Kn(e,t,n){if(e.nodes)for(var a=e.nodes.start,r=e.nodes.end,i=t&&(t.f&Bt)===0?t.nodes.start:n;a!==null;){var o=la(a);if(i.before(a),a===r)return;a=o}}function Wt(e,t,n){t===null?e.effect.first=n:t.next=n,n===null?e.effect.last=t:n.prev=t}function Nr(e,t,n=!1,a=!1,r=!1){var i=e,o="";q(()=>{var l=me;if(o!==(o=t()??"")&&(l.nodes!==null&&(Ws(l.nodes.start,l.nodes.end),l.nodes=null),o!=="")){var c=o+"";n?c=`<svg>${c}</svg>`:a&&(c=`<math>${c}</math>`);var u=ri(c);if((n||a)&&(u=Vt(u)),ea(Vt(u),u.lastChild),n||a)for(;Vt(u);)i.before(Vt(u));else i.before(u)}})}function il(e,t,n){var a=new Ar(e);ca(()=>{var r=t()??null;a.ensure(r,r&&(i=>n(i,r)))},mn)}const Kr=[...` 	
\r\f \v\uFEFF`];function ol(e,t,n){var a=e==null?"":""+e;if(t&&(a=a?a+" "+t:t),n){for(var r in n)if(n[r])a=a?a+" "+r:r;else if(a.length)for(var i=r.length,o=0;(o=a.indexOf(r,o))>=0;){var l=o+i;(o===0||Kr.includes(a[o-1]))&&(l===a.length||Kr.includes(a[l]))?a=(o===0?"":a.substring(0,o))+a.substring(l+1):o=l}}return a===""?null:a}function ll(e,t){return e==null?null:String(e)}function Se(e,t,n,a,r,i){var o=e.__className;if(o!==n||o===void 0){var l=ol(n,a,i);l==null?e.removeAttribute("class"):e.className=l,e.__className=n}else if(i&&r!==i)for(var c in i){var u=!!i[c];(r==null||u!==!!r[c])&&e.classList.toggle(c,u)}return i}function xa(e,t,n,a){var r=e.__style;if(r!==t){var i=ll(t);i==null?e.removeAttribute("style"):e.style.cssText=i,e.__style=t}return a}const cl=Symbol("is custom element"),ul=Symbol("is html"),dl=Ki?"progress":"PROGRESS";function Jd(e,t){var n=si(e);n.value===(n.value=t??void 0)||e.value===t&&(t!==0||e.nodeName!==dl)||(e.value=t??"")}function Xd(e,t){t?e.hasAttribute("selected")||e.setAttribute("selected",""):e.removeAttribute("selected")}function Zt(e,t,n,a){var r=si(e);r[t]!==(r[t]=n)&&(t==="loading"&&(e[Wi]=n),n==null?e.removeAttribute(t):typeof n!="string"&&fl(e).includes(t)?e[t]=n:e.setAttribute(t,n))}function si(e){return e.__attributes??(e.__attributes={[cl]:e.nodeName.includes("-"),[ul]:e.namespaceURI===bs})}var Vr=new Map;function fl(e){var t=e.getAttribute("is")||e.nodeName,n=Vr.get(t);if(n)return n;Vr.set(t,n=[]);for(var a,r=e,i=Element.prototype;i!==r;){a=zi(r);for(var o in a)a[o].set&&n.push(o);r=vs(r)}return n}function za(e,t,n=t){var a=new WeakSet;qs(e,"input",async r=>{var i=r?e.defaultValue:e.value;if(i=Wa(e)?Ka(i):i,n(i),le!==null&&a.add(le),await Vo(),i!==(i=t())){var o=e.selectionStart,l=e.selectionEnd,c=e.value.length;if(e.value=i??"",l!==null){var u=e.value.length;o===l&&l===c&&u>c?(e.selectionStart=u,e.selectionEnd=u):(e.selectionStart=o,e.selectionEnd=Math.min(l,u))}}}),bn(t)==null&&e.value&&(n(Wa(e)?Ka(e.value):e.value),le!==null&&a.add(le)),Ba(()=>{var r=t();if(e===document.activeElement){var i=nr??le;if(a.has(i))return}Wa(e)&&r===Ka(e.value)||e.type==="date"&&!r&&!e.value||r!==e.value&&(e.value=r??"")})}function vl(e,t,n=t){qs(e,"change",a=>{var r=a?e.defaultChecked:e.checked;n(r)}),bn(t)==null&&n(e.checked),Ba(()=>{var a=t();e.checked=!!a})}function Wa(e){var t=e.type;return t==="number"||t==="range"}function Ka(e){return e===""?null:+e}function Zr(e,t){return e===t||(e==null?void 0:e[Zn])===t}function Ta(e={},t,n,a){return jo(()=>{var r,i;return Ba(()=>{r=i,i=[],bn(()=>{e!==n(...i)&&(t(e,...i),r&&Zr(n(...r),e)&&t(null,...r))})}),()=>{Nt(()=>{i&&Zr(n(...i),e)&&t(null,...i)})}}),e}let va=!1;function gl(e){var t=va;try{return va=!1,[e(),va]}finally{va=t}}function Qt(e,t,n,a){var P;var r=!Fn||(n&co)!==0,i=(n&fo)!==0,o=(n&vo)!==0,l=a,c=!0,u=()=>(c&&(c=!1,l=o?bn(a):a),l),f;if(i){var _=Zn in e||Gi in e;f=((P=xn(e,t))==null?void 0:P.set)??(_&&t in e?R=>e[t]=R:void 0)}var v,k=!1;i?[v,k]=gl(()=>e[t]):v=e[t],v===void 0&&a!==void 0&&(v=u(),f&&(r&&$i(),f(v)));var p;if(r?p=()=>{var R=e[t];return R===void 0?u():(c=!0,R)}:p=()=>{var R=e[t];return R!==void 0&&(l=void 0),R===void 0?l:R},r&&(n&uo)===0)return p;if(f){var T=e.$$legacy;return(function(R,B){return arguments.length>0?((!r||!B||T||k)&&f(B?p():R),R):p()})}var m=!1,C=((n&lo)!==0?Da:Er)(()=>(m=!1,p()));i&&s(C);var z=me;return(function(R,B){if(arguments.length>0){const j=B?s(C):r&&i?Ne(R):R;return I(C,j),m=!0,l!==void 0&&(l=j),R}return Xt&&m||(z.f&zt)!==0?C.v:s(C)})}function Ua(e){Ce===null&&hs(),Fn&&Ce.l!==null?pl(Ce).m.push(e):bt(()=>{const t=bn(e);if(typeof t=="function")return t})}function ml(e){Ce===null&&hs(),Ua(()=>()=>bn(e))}function pl(e){var t=e.l;return t.u??(t.u={a:[],b:[],m:[]})}const hl="5";var ds;typeof window<"u"&&((ds=window.__svelte??(window.__svelte={})).v??(ds.v=new Set)).add(hl);const _l="modulepreload",bl=function(e){return"/ui/"+e},Yr={},yl=function(t,n,a){let r=Promise.resolve();if(n&&n.length>0){let o=function(u){return Promise.all(u.map(f=>Promise.resolve(f).then(_=>({status:"fulfilled",value:_}),_=>({status:"rejected",reason:_}))))};document.getElementsByTagName("link");const l=document.querySelector("meta[property=csp-nonce]"),c=(l==null?void 0:l.nonce)||(l==null?void 0:l.getAttribute("nonce"));r=o(n.map(u=>{if(u=bl(u),u in Yr)return;Yr[u]=!0;const f=u.endsWith(".css"),_=f?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${u}"]${_}`))return;const v=document.createElement("link");if(v.rel=f?"stylesheet":_l,f||(v.as="script"),v.crossOrigin="",v.href=u,c&&v.setAttribute("nonce",c),document.head.appendChild(v),f)return new Promise((k,p)=>{v.addEventListener("load",k),v.addEventListener("error",()=>p(new Error(`Unable to preload CSS for ${u}`)))})}))}function i(o){const l=new Event("vite:preloadError",{cancelable:!0});if(l.payload=o,window.dispatchEvent(l),!l.defaultPrevented)throw o}return r.then(o=>{for(const l of o||[])l.status==="rejected"&&i(l.reason);return t().catch(i)})},Cr="aletheia_token";function jn(){return localStorage.getItem(Cr)}function ii(e){localStorage.setItem(Cr,e)}function wl(){localStorage.removeItem(Cr)}function El(){const e=jn();return{...e?{Authorization:`Bearer ${e}`}:{},"Content-Type":"application/json"}}async function Ge(e,t){const n=window.location.origin,a=await fetch(`${n}${e}`,{...t,headers:{...El(),...t==null?void 0:t.headers}});if(a.status===401)throw new Error("Unauthorized — check your token");if(!a.ok){const r=await a.text();throw new Error(`API error ${a.status}: ${r}`)}return a.json()}async function Sl(){return Ge("/api/branding")}async function kl(){return(await Ge("/api/agents")).agents}async function xl(e){return Ge(`/api/agents/${e}/identity`)}async function Tl(e){const t=e?`?nousId=${e}`:"";return(await Ge(`/api/sessions${t}`)).sessions}async function Al(e,t=100){return(await Ge(`/api/sessions/${e}/history?limit=${t}`)).messages}async function Nl(e){await Ge(`/api/sessions/${e}/distill`,{method:"POST"})}async function oi(){return Ge("/api/metrics")}async function Cl(){return Ge("/api/costs/summary")}async function Qd(e){const t=new URLSearchParams;e!=null&&e.mode&&t.set("mode",e.mode),e!=null&&e.limit&&t.set("limit",String(e.limit)),(e==null?void 0:e.community)!==void 0&&t.set("community",String(e.community));const n=t.toString(),a=await Ge(`/api/memory/graph/export${n?`?${n}`:""}`);return{nodes:a.nodes,edges:a.edges,communities:a.communities,community_meta:a.community_meta??[],total_nodes:a.total_nodes??a.nodes.length}}async function Rl(){return(await Ge("/api/commands")).commands}async function Il(e,t){return(await Ge("/api/command",{method:"POST",body:JSON.stringify({command:e,sessionId:t})})).result}async function Ol(e,t,n=!1){await Ge(`/api/turns/${encodeURIComponent(e)}/tools/${encodeURIComponent(t)}/approve`,{method:"POST",body:JSON.stringify({alwaysAllow:n})})}async function Ml(e,t){await Ge(`/api/turns/${encodeURIComponent(e)}/tools/${encodeURIComponent(t)}/deny`,{method:"POST"})}async function Ll(e,t,n=2){const a=new URLSearchParams;return e&&a.set("agentId",e),a.set("depth",String(n)),Ge(`/api/workspace/tree?${a.toString()}`)}async function Dl(e,t){const n=new URLSearchParams({path:e});return t&&n.set("agentId",t),Ge(`/api/workspace/file?${n.toString()}`)}async function Pl(e){const t=new URLSearchParams;return e&&t.set("agentId",e),Ge(`/api/workspace/git-status?${t.toString()}`)}let St=null,Va=null,ya=1e3;const Bl=3e4,gr=new Set;function li(e){return gr.add(e),()=>gr.delete(e)}function ga(e,t){for(const n of gr)try{n(e,t)}catch{}}function zl(){St||ci()}function ci(){const e=jn(),n=`${window.location.origin}/api/events${e?`?token=${encodeURIComponent(e)}`:""}`;St=new EventSource(n),St.onopen=()=>{ya=1e3,ga("connection",{status:"connected"})},St.onerror=()=>{ga("connection",{status:"disconnected"}),St==null||St.close(),St=null,Ul()},St.addEventListener("init",r=>{try{ga("init",JSON.parse(r.data))}catch{}});const a=["turn:before","turn:after","turn:text_delta","turn:tool_start","turn:tool_result","tool:called","tool:failed","session:created","session:archived"];for(const r of a)St.addEventListener(r,i=>{try{ga(r,JSON.parse(i.data))}catch{}})}function Ul(){Va||(Va=setTimeout(()=>{Va=null,ya=Math.min(ya*2,Bl),ci()},ya))}let ui=G("disconnected");function Jr(){return s(ui)}function Fl(){li((e,t)=>{e==="connection"&&I(ui,t.status,!0)}),zl()}let Rr=G(Ne([])),na=G(null),Xr=G(!1);const wa=new Map;function Ir(){return s(Rr)}function di(){return s(Rr).find(e=>e.id===s(na))??null}function We(){return s(na)}async function ql(){I(Xr,!0);try{const e=await kl(),t=e.filter(n=>!wa.has(n.id));if(t.length>0){const n=await Promise.allSettled(t.map(a=>xl(a.id).then(r=>({id:a.id,identity:r}))));for(const a of n)a.status==="fulfilled"&&wa.set(a.value.id,a.value.identity)}for(const n of e){const a=wa.get(n.id);a&&(n.name=a.name||n.name,n.emoji=a.emoji)}I(Rr,e,!0),!s(na)&&e.length>0&&I(na,e[0].id,!0)}finally{I(Xr,!1)}}function fi(e){I(na,e,!0)}function jl(e){var t;return((t=wa.get(e))==null?void 0:t.emoji)??null}const Hl={name:"Aletheia"};let Vn=G(Ne({...Hl})),Qr=G(!1);function Or(){return s(Vn).name}async function vi(){if(!s(Qr)){try{if(I(Vn,await Sl(),!0),document.title=s(Vn).name,s(Vn).favicon){const e=document.querySelector("link[rel='icon']");e&&(e.href=s(Vn).favicon)}}catch{}I(Qr,!0)}}var Gl=N('<span class="agent-emoji svelte-mc3eh3"> </span>'),Wl=N('<span class="active-agent svelte-mc3eh3"><!> </span>'),Kl=N('<header class="topbar svelte-mc3eh3"><div class="left svelte-mc3eh3"><button aria-label="Toggle sidebar"><svg width="18" height="18" viewBox="0 0 18 18" fill="none" class="svelte-mc3eh3"><rect x="1" y="2" width="16" height="14" rx="2" stroke="currentColor" stroke-width="1.5" fill="none" class="svelte-mc3eh3"></rect><line x1="6.5" y1="2" x2="6.5" y2="16" stroke="currentColor" stroke-width="1.5" class="svelte-mc3eh3"></line></svg></button> <h1 class="title svelte-mc3eh3"> </h1> <span></span> <!></div> <div class="right svelte-mc3eh3"><button>Files</button> <button>Metrics</button> <button>Graph</button> <button>Settings</button></div></header>');function Vl(e,t){qe(t,!0);let n=Qt(t,"sidebarCollapsed",3,!1),a=K(di);var r=Kl(),i=d(r),o=d(i);let l;var c=h(o,2),u=d(c),f=h(c,2);let _;var v=h(f,2);{var k=J=>{var V=Wl(),ne=d(V);{var de=Z=>{var se=Gl(),b=d(se);q(()=>L(b,s(a).emoji)),S(Z,se)};F(ne,Z=>{s(a).emoji&&Z(de)})}var pe=h(ne);q(()=>L(pe,` ${s(a).name??""}`)),S(J,V)};F(v,J=>{s(a)&&J(k)})}var p=h(i,2),T=d(p);let m;var C=h(T,2);let z;var P=h(C,2);let R;var B=h(P,2);let j;q((J,V)=>{l=Se(o,1,"sidebar-toggle svelte-mc3eh3",null,l,{open:!n()}),Zt(o,"title",n()?"Show agents":"Hide agents"),L(u,J),_=Se(f,1,"status-dot svelte-mc3eh3",null,_,V),m=Se(T,1,"topbar-btn svelte-mc3eh3",null,m,{active:t.activeView==="files"}),z=Se(C,1,"topbar-btn svelte-mc3eh3",null,z,{active:t.activeView==="metrics"}),R=Se(P,1,"topbar-btn svelte-mc3eh3",null,R,{active:t.activeView==="graph"}),j=Se(B,1,"topbar-btn svelte-mc3eh3",null,j,{active:t.activeView==="settings"})},[Or,()=>({connected:Jr()==="connected",connecting:Jr()==="connecting"})]),te("click",o,function(...J){var V;(V=t.onToggleSidebar)==null||V.apply(this,J)}),te("click",T,()=>t.onSetView(t.activeView==="files"?"chat":"files")),te("click",C,()=>t.onSetView(t.activeView==="metrics"?"chat":"metrics")),te("click",P,()=>t.onSetView(t.activeView==="graph"?"chat":"graph")),te("click",B,()=>t.onSetView(t.activeView==="settings"?"chat":"settings")),S(e,r),je()}ft(["click"]);function Wn(e){return e?e>=1e6?(e/1e6).toFixed(1)+"M":e>=1e3?Math.round(e/1e3)+"k":String(e):"0"}function Zl(e){const t=Math.floor(e/3600),n=Math.floor(e%3600/60);return t>0?`${t}h ${n}m`:`${n}m`}function Ea(e){if(!e)return"never";const t=Date.now()-new Date(e).getTime(),n=Math.floor(t/6e4);if(n<1)return"just now";if(n<60)return`${n}m ago`;const a=Math.floor(n/60);return a<24?`${a}h ago`:`${Math.floor(a/24)}d ago`}function $r(e){return`$${e.toFixed(4)}`}function es(e){return e<1e3?`${e}ms`:`${(e/1e3).toFixed(1)}s`}function Yl(e){try{return new Date(e).toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit",hour12:!0})}catch{return""}}var Jl=N('<span class="emoji svelte-9yl1a2"> </span>'),Xl=N('<span class="initials svelte-9yl1a2"> </span>'),Ql=N('<span class="activity svelte-9yl1a2"> </span>'),$l=N('<button><span class="avatar svelte-9yl1a2"><!></span> <span class="info svelte-9yl1a2"><span class="name svelte-9yl1a2"> </span> <!></span></button>');function ec(e,t){qe(t,!0);let n=Qt(t,"isActive",3,!1);var a=$l();let r;var i=d(a),o=d(i);{var l=p=>{var T=Jl(),m=d(T);q(()=>L(m,t.agent.emoji)),S(p,T)},c=p=>{var T=Xl(),m=d(T);q(C=>L(m,C),[()=>t.agent.name.slice(0,2).toUpperCase()]),S(p,T)};F(o,p=>{t.agent.emoji?p(l):p(c,!1)})}var u=h(i,2),f=d(u),_=d(f),v=h(f,2);{var k=p=>{var T=Ql(),m=d(T);q(C=>L(m,C),[()=>Ea(t.lastActivity)]),S(p,T)};F(v,p=>{t.lastActivity&&p(k)})}q(()=>{r=Se(a,1,"agent-card svelte-9yl1a2",null,r,{active:n()}),L(_,t.agent.name)}),te("click",a,function(...p){var T;(T=t.onclick)==null||T.apply(this,p)}),S(e,a),je()}ft(["click"]);let kn=G(Ne([])),An=G(null),ts=G(!1);function gi(){return s(kn).find(e=>e.id===s(An))??null}function ma(){return s(An)}async function Aa(e){I(ts,!0);try{const t=await Tl(e);if(I(kn,t.filter(n=>!n.sessionKey.startsWith("cron:")&&!n.sessionKey.startsWith("agent:")&&!n.sessionKey.startsWith("prosoche")),!0),s(kn).length>0){if(!s(kn).find(a=>a.id===s(An))){const a=s(kn).find(r=>r.sessionKey.startsWith("signal:"));I(An,(a==null?void 0:a.id)??s(kn)[0].id,!0)}}else I(An,null)}finally{I(ts,!1)}}function tc(){const e=gi();return(e==null?void 0:e.sessionKey)??`web:${Date.now()}`}function nc(e){const t=`web:${Date.now()}`;return I(An,null),t}function Za(e){Aa(e)}var ac=N('<aside><div class="agent-list svelte-1m85e6v"></div></aside>');function rc(e,t){qe(t,!0);let n=Qt(t,"collapsed",3,!1);function a(l){var c;fi(l),Aa(l),(c=t.onAgentSelect)==null||c.call(t)}bt(()=>{const l=We();l&&Aa(l)});var r=ac();let i;var o=d(r);st(o,21,Ir,gn,(l,c)=>{{let u=K(()=>s(c).id===We());ec(l,{get agent(){return s(c)},get isActive(){return s(u)},onclick:()=>a(s(c).id)})}}),q(()=>i=Se(r,1,"sidebar svelte-1m85e6v",null,i,{collapsed:n()})),S(e,r),je()}const Na="[A-Za-z$_][0-9A-Za-z$_]*",mi=["as","in","of","if","for","while","finally","var","new","function","do","return","void","else","break","catch","instanceof","with","throw","case","default","try","switch","continue","typeof","delete","let","yield","const","class","debugger","async","await","static","import","from","export","extends","using"],pi=["true","false","null","undefined","NaN","Infinity"],hi=["Object","Function","Boolean","Symbol","Math","Date","Number","BigInt","String","RegExp","Array","Float32Array","Float64Array","Int8Array","Uint8Array","Uint8ClampedArray","Int16Array","Int32Array","Uint16Array","Uint32Array","BigInt64Array","BigUint64Array","Set","Map","WeakSet","WeakMap","ArrayBuffer","SharedArrayBuffer","Atomics","DataView","JSON","Promise","Generator","GeneratorFunction","AsyncFunction","Reflect","Proxy","Intl","WebAssembly"],_i=["Error","EvalError","InternalError","RangeError","ReferenceError","SyntaxError","TypeError","URIError"],bi=["setInterval","setTimeout","clearInterval","clearTimeout","require","exports","eval","isFinite","isNaN","parseFloat","parseInt","decodeURI","decodeURIComponent","encodeURI","encodeURIComponent","escape","unescape"],yi=["arguments","this","super","console","window","document","localStorage","sessionStorage","module","global"],wi=[].concat(bi,hi,_i);function sc(e){const t=e.regex,n=(E,{after:D})=>{const H="</"+E[0].slice(1);return E.input.indexOf(H,D)!==-1},a=Na,r={begin:"<>",end:"</>"},i=/<[A-Za-z0-9\\._:-]+\s*\/>/,o={begin:/<[A-Za-z0-9\\._:-]+/,end:/\/[A-Za-z0-9\\._:-]+>|\/>/,isTrulyOpeningTag:(E,D)=>{const H=E[0].length+E.index,Q=E.input[H];if(Q==="<"||Q===","){D.ignoreMatch();return}Q===">"&&(n(E,{after:H})||D.ignoreMatch());let g;const y=E.input.substring(H);if(g=y.match(/^\s*=/)){D.ignoreMatch();return}if((g=y.match(/^\s+extends\s+/))&&g.index===0){D.ignoreMatch();return}}},l={$pattern:Na,keyword:mi,literal:pi,built_in:wi,"variable.language":yi},c="[0-9](_?[0-9])*",u=`\\.(${c})`,f="0|[1-9](_?[0-9])*|0[0-7]*[89][0-9]*",_={className:"number",variants:[{begin:`(\\b(${f})((${u})|\\.)?|(${u}))[eE][+-]?(${c})\\b`},{begin:`\\b(${f})\\b((${u})\\b|\\.)?|(${u})\\b`},{begin:"\\b(0|[1-9](_?[0-9])*)n\\b"},{begin:"\\b0[xX][0-9a-fA-F](_?[0-9a-fA-F])*n?\\b"},{begin:"\\b0[bB][0-1](_?[0-1])*n?\\b"},{begin:"\\b0[oO][0-7](_?[0-7])*n?\\b"},{begin:"\\b0[0-7]+n?\\b"}],relevance:0},v={className:"subst",begin:"\\$\\{",end:"\\}",keywords:l,contains:[]},k={begin:".?html`",end:"",starts:{end:"`",returnEnd:!1,contains:[e.BACKSLASH_ESCAPE,v],subLanguage:"xml"}},p={begin:".?css`",end:"",starts:{end:"`",returnEnd:!1,contains:[e.BACKSLASH_ESCAPE,v],subLanguage:"css"}},T={begin:".?gql`",end:"",starts:{end:"`",returnEnd:!1,contains:[e.BACKSLASH_ESCAPE,v],subLanguage:"graphql"}},m={className:"string",begin:"`",end:"`",contains:[e.BACKSLASH_ESCAPE,v]},z={className:"comment",variants:[e.COMMENT(/\/\*\*(?!\/)/,"\\*/",{relevance:0,contains:[{begin:"(?=@[A-Za-z]+)",relevance:0,contains:[{className:"doctag",begin:"@[A-Za-z]+"},{className:"type",begin:"\\{",end:"\\}",excludeEnd:!0,excludeBegin:!0,relevance:0},{className:"variable",begin:a+"(?=\\s*(-)|$)",endsParent:!0,relevance:0},{begin:/(?=[^\n])\s/,relevance:0}]}]}),e.C_BLOCK_COMMENT_MODE,e.C_LINE_COMMENT_MODE]},P=[e.APOS_STRING_MODE,e.QUOTE_STRING_MODE,k,p,T,m,{match:/\$\d+/},_];v.contains=P.concat({begin:/\{/,end:/\}/,keywords:l,contains:["self"].concat(P)});const R=[].concat(z,v.contains),B=R.concat([{begin:/(\s*)\(/,end:/\)/,keywords:l,contains:["self"].concat(R)}]),j={className:"params",begin:/(\s*)\(/,end:/\)/,excludeBegin:!0,excludeEnd:!0,keywords:l,contains:B},J={variants:[{match:[/class/,/\s+/,a,/\s+/,/extends/,/\s+/,t.concat(a,"(",t.concat(/\./,a),")*")],scope:{1:"keyword",3:"title.class",5:"keyword",7:"title.class.inherited"}},{match:[/class/,/\s+/,a],scope:{1:"keyword",3:"title.class"}}]},V={relevance:0,match:t.either(/\bJSON/,/\b[A-Z][a-z]+([A-Z][a-z]*|\d)*/,/\b[A-Z]{2,}([A-Z][a-z]+|\d)+([A-Z][a-z]*)*/,/\b[A-Z]{2,}[a-z]+([A-Z][a-z]+|\d)*([A-Z][a-z]*)*/),className:"title.class",keywords:{_:[...hi,..._i]}},ne={label:"use_strict",className:"meta",relevance:10,begin:/^\s*['"]use (strict|asm)['"]/},de={variants:[{match:[/function/,/\s+/,a,/(?=\s*\()/]},{match:[/function/,/\s*(?=\()/]}],className:{1:"keyword",3:"title.function"},label:"func.def",contains:[j],illegal:/%/},pe={relevance:0,match:/\b[A-Z][A-Z_0-9]+\b/,className:"variable.constant"};function Z(E){return t.concat("(?!",E.join("|"),")")}const se={match:t.concat(/\b/,Z([...bi,"super","import"].map(E=>`${E}\\s*\\(`)),a,t.lookahead(/\s*\(/)),className:"title.function",relevance:0},b={begin:t.concat(/\./,t.lookahead(t.concat(a,/(?![0-9A-Za-z$_(])/))),end:a,excludeBegin:!0,keywords:"prototype",className:"property",relevance:0},M={match:[/get|set/,/\s+/,a,/(?=\()/],className:{1:"keyword",3:"title.function"},contains:[{begin:/\(\)/},j]},w="(\\([^()]*(\\([^()]*(\\([^()]*\\)[^()]*)*\\)[^()]*)*\\)|"+e.UNDERSCORE_IDENT_RE+")\\s*=>",O={match:[/const|var|let/,/\s+/,a,/\s*/,/=\s*/,/(async\s*)?/,t.lookahead(w)],keywords:"async",className:{1:"keyword",3:"title.function"},contains:[j]};return{name:"JavaScript",aliases:["js","jsx","mjs","cjs"],keywords:l,exports:{PARAMS_CONTAINS:B,CLASS_REFERENCE:V},illegal:/#(?![$_A-z])/,contains:[e.SHEBANG({label:"shebang",binary:"node",relevance:5}),ne,e.APOS_STRING_MODE,e.QUOTE_STRING_MODE,k,p,T,m,z,{match:/\$\d+/},_,V,{scope:"attr",match:a+t.lookahead(":"),relevance:0},O,{begin:"("+e.RE_STARTERS_RE+"|\\b(case|return|throw)\\b)\\s*",keywords:"return throw case",relevance:0,contains:[z,e.REGEXP_MODE,{className:"function",begin:w,returnBegin:!0,end:"\\s*=>",contains:[{className:"params",variants:[{begin:e.UNDERSCORE_IDENT_RE,relevance:0},{className:null,begin:/\(\s*\)/,skip:!0},{begin:/(\s*)\(/,end:/\)/,excludeBegin:!0,excludeEnd:!0,keywords:l,contains:B}]}]},{begin:/,/,relevance:0},{match:/\s+/,relevance:0},{variants:[{begin:r.begin,end:r.end},{match:i},{begin:o.begin,"on:begin":o.isTrulyOpeningTag,end:o.end}],subLanguage:"xml",contains:[{begin:o.begin,end:o.end,skip:!0,contains:["self"]}]}]},de,{beginKeywords:"while if switch catch for"},{begin:"\\b(?!function)"+e.UNDERSCORE_IDENT_RE+"\\([^()]*(\\([^()]*(\\([^()]*\\)[^()]*)*\\)[^()]*)*\\)\\s*\\{",returnBegin:!0,label:"func.def",contains:[j,e.inherit(e.TITLE_MODE,{begin:a,className:"title.function"})]},{match:/\.\.\./,relevance:0},b,{match:"\\$"+a,relevance:0},{match:[/\bconstructor(?=\s*\()/],className:{1:"title.function"},contains:[j]},se,pe,J,M,{match:/\$[(.]/}]}}function Ei(e){const t=e.regex,n=sc(e),a=Na,r=["any","void","number","boolean","string","object","never","symbol","bigint","unknown"],i={begin:[/namespace/,/\s+/,e.IDENT_RE],beginScope:{1:"keyword",3:"title.class"}},o={beginKeywords:"interface",end:/\{/,excludeEnd:!0,keywords:{keyword:"interface extends",built_in:r},contains:[n.exports.CLASS_REFERENCE]},l={className:"meta",relevance:10,begin:/^\s*['"]use strict['"]/},c=["type","interface","public","private","protected","implements","declare","abstract","readonly","enum","override","satisfies"],u={$pattern:Na,keyword:mi.concat(c),literal:pi,built_in:wi.concat(r),"variable.language":yi},f={className:"meta",begin:"@"+a},_=(T,m,C)=>{const z=T.contains.findIndex(P=>P.label===m);if(z===-1)throw new Error("can not find mode to replace");T.contains.splice(z,1,C)};Object.assign(n.keywords,u),n.exports.PARAMS_CONTAINS.push(f);const v=n.contains.find(T=>T.scope==="attr"),k=Object.assign({},v,{match:t.concat(a,t.lookahead(/\s*\?:/))});n.exports.PARAMS_CONTAINS.push([n.exports.CLASS_REFERENCE,v,k]),n.contains=n.contains.concat([f,i,o,k]),_(n,"shebang",e.SHEBANG()),_(n,"use_strict",l);const p=n.contains.find(T=>T.label==="func.def");return p.relevance=0,Object.assign(n,{name:"TypeScript",aliases:["ts","tsx","mts","cts"]}),n}const ns="[A-Za-z$_][0-9A-Za-z$_]*",ic=["as","in","of","if","for","while","finally","var","new","function","do","return","void","else","break","catch","instanceof","with","throw","case","default","try","switch","continue","typeof","delete","let","yield","const","class","debugger","async","await","static","import","from","export","extends","using"],oc=["true","false","null","undefined","NaN","Infinity"],Si=["Object","Function","Boolean","Symbol","Math","Date","Number","BigInt","String","RegExp","Array","Float32Array","Float64Array","Int8Array","Uint8Array","Uint8ClampedArray","Int16Array","Int32Array","Uint16Array","Uint32Array","BigInt64Array","BigUint64Array","Set","Map","WeakSet","WeakMap","ArrayBuffer","SharedArrayBuffer","Atomics","DataView","JSON","Promise","Generator","GeneratorFunction","AsyncFunction","Reflect","Proxy","Intl","WebAssembly"],ki=["Error","EvalError","InternalError","RangeError","ReferenceError","SyntaxError","TypeError","URIError"],xi=["setInterval","setTimeout","clearInterval","clearTimeout","require","exports","eval","isFinite","isNaN","parseFloat","parseInt","decodeURI","decodeURIComponent","encodeURI","encodeURIComponent","escape","unescape"],lc=["arguments","this","super","console","window","document","localStorage","sessionStorage","module","global"],cc=[].concat(xi,Si,ki);function Ti(e){const t=e.regex,n=(E,{after:D})=>{const H="</"+E[0].slice(1);return E.input.indexOf(H,D)!==-1},a=ns,r={begin:"<>",end:"</>"},i=/<[A-Za-z0-9\\._:-]+\s*\/>/,o={begin:/<[A-Za-z0-9\\._:-]+/,end:/\/[A-Za-z0-9\\._:-]+>|\/>/,isTrulyOpeningTag:(E,D)=>{const H=E[0].length+E.index,Q=E.input[H];if(Q==="<"||Q===","){D.ignoreMatch();return}Q===">"&&(n(E,{after:H})||D.ignoreMatch());let g;const y=E.input.substring(H);if(g=y.match(/^\s*=/)){D.ignoreMatch();return}if((g=y.match(/^\s+extends\s+/))&&g.index===0){D.ignoreMatch();return}}},l={$pattern:ns,keyword:ic,literal:oc,built_in:cc,"variable.language":lc},c="[0-9](_?[0-9])*",u=`\\.(${c})`,f="0|[1-9](_?[0-9])*|0[0-7]*[89][0-9]*",_={className:"number",variants:[{begin:`(\\b(${f})((${u})|\\.)?|(${u}))[eE][+-]?(${c})\\b`},{begin:`\\b(${f})\\b((${u})\\b|\\.)?|(${u})\\b`},{begin:"\\b(0|[1-9](_?[0-9])*)n\\b"},{begin:"\\b0[xX][0-9a-fA-F](_?[0-9a-fA-F])*n?\\b"},{begin:"\\b0[bB][0-1](_?[0-1])*n?\\b"},{begin:"\\b0[oO][0-7](_?[0-7])*n?\\b"},{begin:"\\b0[0-7]+n?\\b"}],relevance:0},v={className:"subst",begin:"\\$\\{",end:"\\}",keywords:l,contains:[]},k={begin:".?html`",end:"",starts:{end:"`",returnEnd:!1,contains:[e.BACKSLASH_ESCAPE,v],subLanguage:"xml"}},p={begin:".?css`",end:"",starts:{end:"`",returnEnd:!1,contains:[e.BACKSLASH_ESCAPE,v],subLanguage:"css"}},T={begin:".?gql`",end:"",starts:{end:"`",returnEnd:!1,contains:[e.BACKSLASH_ESCAPE,v],subLanguage:"graphql"}},m={className:"string",begin:"`",end:"`",contains:[e.BACKSLASH_ESCAPE,v]},z={className:"comment",variants:[e.COMMENT(/\/\*\*(?!\/)/,"\\*/",{relevance:0,contains:[{begin:"(?=@[A-Za-z]+)",relevance:0,contains:[{className:"doctag",begin:"@[A-Za-z]+"},{className:"type",begin:"\\{",end:"\\}",excludeEnd:!0,excludeBegin:!0,relevance:0},{className:"variable",begin:a+"(?=\\s*(-)|$)",endsParent:!0,relevance:0},{begin:/(?=[^\n])\s/,relevance:0}]}]}),e.C_BLOCK_COMMENT_MODE,e.C_LINE_COMMENT_MODE]},P=[e.APOS_STRING_MODE,e.QUOTE_STRING_MODE,k,p,T,m,{match:/\$\d+/},_];v.contains=P.concat({begin:/\{/,end:/\}/,keywords:l,contains:["self"].concat(P)});const R=[].concat(z,v.contains),B=R.concat([{begin:/(\s*)\(/,end:/\)/,keywords:l,contains:["self"].concat(R)}]),j={className:"params",begin:/(\s*)\(/,end:/\)/,excludeBegin:!0,excludeEnd:!0,keywords:l,contains:B},J={variants:[{match:[/class/,/\s+/,a,/\s+/,/extends/,/\s+/,t.concat(a,"(",t.concat(/\./,a),")*")],scope:{1:"keyword",3:"title.class",5:"keyword",7:"title.class.inherited"}},{match:[/class/,/\s+/,a],scope:{1:"keyword",3:"title.class"}}]},V={relevance:0,match:t.either(/\bJSON/,/\b[A-Z][a-z]+([A-Z][a-z]*|\d)*/,/\b[A-Z]{2,}([A-Z][a-z]+|\d)+([A-Z][a-z]*)*/,/\b[A-Z]{2,}[a-z]+([A-Z][a-z]+|\d)*([A-Z][a-z]*)*/),className:"title.class",keywords:{_:[...Si,...ki]}},ne={label:"use_strict",className:"meta",relevance:10,begin:/^\s*['"]use (strict|asm)['"]/},de={variants:[{match:[/function/,/\s+/,a,/(?=\s*\()/]},{match:[/function/,/\s*(?=\()/]}],className:{1:"keyword",3:"title.function"},label:"func.def",contains:[j],illegal:/%/},pe={relevance:0,match:/\b[A-Z][A-Z_0-9]+\b/,className:"variable.constant"};function Z(E){return t.concat("(?!",E.join("|"),")")}const se={match:t.concat(/\b/,Z([...xi,"super","import"].map(E=>`${E}\\s*\\(`)),a,t.lookahead(/\s*\(/)),className:"title.function",relevance:0},b={begin:t.concat(/\./,t.lookahead(t.concat(a,/(?![0-9A-Za-z$_(])/))),end:a,excludeBegin:!0,keywords:"prototype",className:"property",relevance:0},M={match:[/get|set/,/\s+/,a,/(?=\()/],className:{1:"keyword",3:"title.function"},contains:[{begin:/\(\)/},j]},w="(\\([^()]*(\\([^()]*(\\([^()]*\\)[^()]*)*\\)[^()]*)*\\)|"+e.UNDERSCORE_IDENT_RE+")\\s*=>",O={match:[/const|var|let/,/\s+/,a,/\s*/,/=\s*/,/(async\s*)?/,t.lookahead(w)],keywords:"async",className:{1:"keyword",3:"title.function"},contains:[j]};return{name:"JavaScript",aliases:["js","jsx","mjs","cjs"],keywords:l,exports:{PARAMS_CONTAINS:B,CLASS_REFERENCE:V},illegal:/#(?![$_A-z])/,contains:[e.SHEBANG({label:"shebang",binary:"node",relevance:5}),ne,e.APOS_STRING_MODE,e.QUOTE_STRING_MODE,k,p,T,m,z,{match:/\$\d+/},_,V,{scope:"attr",match:a+t.lookahead(":"),relevance:0},O,{begin:"("+e.RE_STARTERS_RE+"|\\b(case|return|throw)\\b)\\s*",keywords:"return throw case",relevance:0,contains:[z,e.REGEXP_MODE,{className:"function",begin:w,returnBegin:!0,end:"\\s*=>",contains:[{className:"params",variants:[{begin:e.UNDERSCORE_IDENT_RE,relevance:0},{className:null,begin:/\(\s*\)/,skip:!0},{begin:/(\s*)\(/,end:/\)/,excludeBegin:!0,excludeEnd:!0,keywords:l,contains:B}]}]},{begin:/,/,relevance:0},{match:/\s+/,relevance:0},{variants:[{begin:r.begin,end:r.end},{match:i},{begin:o.begin,"on:begin":o.isTrulyOpeningTag,end:o.end}],subLanguage:"xml",contains:[{begin:o.begin,end:o.end,skip:!0,contains:["self"]}]}]},de,{beginKeywords:"while if switch catch for"},{begin:"\\b(?!function)"+e.UNDERSCORE_IDENT_RE+"\\([^()]*(\\([^()]*(\\([^()]*\\)[^()]*)*\\)[^()]*)*\\)\\s*\\{",returnBegin:!0,label:"func.def",contains:[j,e.inherit(e.TITLE_MODE,{begin:a,className:"title.function"})]},{match:/\.\.\./,relevance:0},b,{match:"\\$"+a,relevance:0},{match:[/\bconstructor(?=\s*\()/],className:{1:"title.function"},contains:[j]},se,pe,J,M,{match:/\$[(.]/}]}}function uc(e){const t=e.regex,n=new RegExp("[\\p{XID_Start}_]\\p{XID_Continue}*","u"),a=["and","as","assert","async","await","break","case","class","continue","def","del","elif","else","except","finally","for","from","global","if","import","in","is","lambda","match","nonlocal|10","not","or","pass","raise","return","try","while","with","yield"],l={$pattern:/[A-Za-z]\w+|__\w+__/,keyword:a,built_in:["__import__","abs","all","any","ascii","bin","bool","breakpoint","bytearray","bytes","callable","chr","classmethod","compile","complex","delattr","dict","dir","divmod","enumerate","eval","exec","filter","float","format","frozenset","getattr","globals","hasattr","hash","help","hex","id","input","int","isinstance","issubclass","iter","len","list","locals","map","max","memoryview","min","next","object","oct","open","ord","pow","print","property","range","repr","reversed","round","set","setattr","slice","sorted","staticmethod","str","sum","super","tuple","type","vars","zip"],literal:["__debug__","Ellipsis","False","None","NotImplemented","True"],type:["Any","Callable","Coroutine","Dict","List","Literal","Generic","Optional","Sequence","Set","Tuple","Type","Union"]},c={className:"meta",begin:/^(>>>|\.\.\.) /},u={className:"subst",begin:/\{/,end:/\}/,keywords:l,illegal:/#/},f={begin:/\{\{/,relevance:0},_={className:"string",contains:[e.BACKSLASH_ESCAPE],variants:[{begin:/([uU]|[bB]|[rR]|[bB][rR]|[rR][bB])?'''/,end:/'''/,contains:[e.BACKSLASH_ESCAPE,c],relevance:10},{begin:/([uU]|[bB]|[rR]|[bB][rR]|[rR][bB])?"""/,end:/"""/,contains:[e.BACKSLASH_ESCAPE,c],relevance:10},{begin:/([fF][rR]|[rR][fF]|[fF])'''/,end:/'''/,contains:[e.BACKSLASH_ESCAPE,c,f,u]},{begin:/([fF][rR]|[rR][fF]|[fF])"""/,end:/"""/,contains:[e.BACKSLASH_ESCAPE,c,f,u]},{begin:/([uU]|[rR])'/,end:/'/,relevance:10},{begin:/([uU]|[rR])"/,end:/"/,relevance:10},{begin:/([bB]|[bB][rR]|[rR][bB])'/,end:/'/},{begin:/([bB]|[bB][rR]|[rR][bB])"/,end:/"/},{begin:/([fF][rR]|[rR][fF]|[fF])'/,end:/'/,contains:[e.BACKSLASH_ESCAPE,f,u]},{begin:/([fF][rR]|[rR][fF]|[fF])"/,end:/"/,contains:[e.BACKSLASH_ESCAPE,f,u]},e.APOS_STRING_MODE,e.QUOTE_STRING_MODE]},v="[0-9](_?[0-9])*",k=`(\\b(${v}))?\\.(${v})|\\b(${v})\\.`,p=`\\b|${a.join("|")}`,T={className:"number",relevance:0,variants:[{begin:`(\\b(${v})|(${k}))[eE][+-]?(${v})[jJ]?(?=${p})`},{begin:`(${k})[jJ]?`},{begin:`\\b([1-9](_?[0-9])*|0+(_?0)*)[lLjJ]?(?=${p})`},{begin:`\\b0[bB](_?[01])+[lL]?(?=${p})`},{begin:`\\b0[oO](_?[0-7])+[lL]?(?=${p})`},{begin:`\\b0[xX](_?[0-9a-fA-F])+[lL]?(?=${p})`},{begin:`\\b(${v})[jJ](?=${p})`}]},m={className:"comment",begin:t.lookahead(/# type:/),end:/$/,keywords:l,contains:[{begin:/# type:/},{begin:/#/,end:/\b\B/,endsWithParent:!0}]},C={className:"params",variants:[{className:"",begin:/\(\s*\)/,skip:!0},{begin:/\(/,end:/\)/,excludeBegin:!0,excludeEnd:!0,keywords:l,contains:["self",c,T,_,e.HASH_COMMENT_MODE]}]};return u.contains=[_,T,c],{name:"Python",aliases:["py","gyp","ipython"],unicodeRegex:!0,keywords:l,illegal:/(<\/|\?)|=>/,contains:[c,T,{scope:"variable.language",match:/\bself\b/},{beginKeywords:"if",relevance:0},{match:/\bor\b/,scope:"keyword"},_,m,e.HASH_COMMENT_MODE,{match:[/\bdef/,/\s+/,n],scope:{1:"keyword",3:"title.function"},contains:[C]},{variants:[{match:[/\bclass/,/\s+/,n,/\s*/,/\(\s*/,n,/\s*\)/]},{match:[/\bclass/,/\s+/,n]}],scope:{1:"keyword",3:"title.class",6:"title.class.inherited"}},{className:"meta",begin:/^[\t ]*@/,end:/(?=#)|$/,contains:[T,C,_]}]}}function Mr(e){const t=e.regex,n={},a={begin:/\$\{/,end:/\}/,contains:["self",{begin:/:-/,contains:[n]}]};Object.assign(n,{className:"variable",variants:[{begin:t.concat(/\$[\w\d#@][\w\d_]*/,"(?![\\w\\d])(?![$])")},a]});const r={className:"subst",begin:/\$\(/,end:/\)/,contains:[e.BACKSLASH_ESCAPE]},i=e.inherit(e.COMMENT(),{match:[/(^|\s)/,/#.*$/],scope:{2:"comment"}}),o={begin:/<<-?\s*(?=\w+)/,starts:{contains:[e.END_SAME_AS_BEGIN({begin:/(\w+)/,end:/(\w+)/,className:"string"})]}},l={className:"string",begin:/"/,end:/"/,contains:[e.BACKSLASH_ESCAPE,n,r]};r.contains.push(l);const c={match:/\\"/},u={className:"string",begin:/'/,end:/'/},f={match:/\\'/},_={begin:/\$?\(\(/,end:/\)\)/,contains:[{begin:/\d+#[0-9a-f]+/,className:"number"},e.NUMBER_MODE,n]},v=["fish","bash","zsh","sh","csh","ksh","tcsh","dash","scsh"],k=e.SHEBANG({binary:`(${v.join("|")})`,relevance:10}),p={className:"function",begin:/\w[\w\d_]*\s*\(\s*\)\s*\{/,returnBegin:!0,contains:[e.inherit(e.TITLE_MODE,{begin:/\w[\w\d_]*/})],relevance:0},T=["if","then","else","elif","fi","time","for","while","until","in","do","done","case","esac","coproc","function","select"],m=["true","false"],C={match:/(\/[a-z._-]+)+/},z=["break","cd","continue","eval","exec","exit","export","getopts","hash","pwd","readonly","return","shift","test","times","trap","umask","unset"],P=["alias","bind","builtin","caller","command","declare","echo","enable","help","let","local","logout","mapfile","printf","read","readarray","source","sudo","type","typeset","ulimit","unalias"],R=["autoload","bg","bindkey","bye","cap","chdir","clone","comparguments","compcall","compctl","compdescribe","compfiles","compgroups","compquote","comptags","comptry","compvalues","dirs","disable","disown","echotc","echoti","emulate","fc","fg","float","functions","getcap","getln","history","integer","jobs","kill","limit","log","noglob","popd","print","pushd","pushln","rehash","sched","setcap","setopt","stat","suspend","ttyctl","unfunction","unhash","unlimit","unsetopt","vared","wait","whence","where","which","zcompile","zformat","zftp","zle","zmodload","zparseopts","zprof","zpty","zregexparse","zsocket","zstyle","ztcp"],B=["chcon","chgrp","chown","chmod","cp","dd","df","dir","dircolors","ln","ls","mkdir","mkfifo","mknod","mktemp","mv","realpath","rm","rmdir","shred","sync","touch","truncate","vdir","b2sum","base32","base64","cat","cksum","comm","csplit","cut","expand","fmt","fold","head","join","md5sum","nl","numfmt","od","paste","ptx","pr","sha1sum","sha224sum","sha256sum","sha384sum","sha512sum","shuf","sort","split","sum","tac","tail","tr","tsort","unexpand","uniq","wc","arch","basename","chroot","date","dirname","du","echo","env","expr","factor","groups","hostid","id","link","logname","nice","nohup","nproc","pathchk","pinky","printenv","printf","pwd","readlink","runcon","seq","sleep","stat","stdbuf","stty","tee","test","timeout","tty","uname","unlink","uptime","users","who","whoami","yes"];return{name:"Bash",aliases:["sh","zsh"],keywords:{$pattern:/\b[a-z][a-z0-9._-]+\b/,keyword:T,literal:m,built_in:[...z,...P,"set","shopt",...R,...B]},contains:[k,e.SHEBANG(),p,_,i,o,C,l,c,u,f,n]}}function dc(e){const t={className:"attr",begin:/"(\\.|[^\\"\r\n])*"(?=\s*:)/,relevance:1.01},n={match:/[{}[\],:]/,className:"punctuation",relevance:0},a=["true","false","null"],r={scope:"literal",beginKeywords:a.join(" ")};return{name:"JSON",aliases:["jsonc"],keywords:{literal:a},contains:[t,n,e.QUOTE_STRING_MODE,r,e.C_NUMBER_MODE,e.C_LINE_COMMENT_MODE,e.C_BLOCK_COMMENT_MODE],illegal:"\\S"}}function Ai(e){const t="true false yes no null",n="[\\w#;/?:@&=+$,.~*'()[\\]]+",a={className:"attr",variants:[{begin:/[\w*@][\w*@ :()\./-]*:(?=[ \t]|$)/},{begin:/"[\w*@][\w*@ :()\./-]*":(?=[ \t]|$)/},{begin:/'[\w*@][\w*@ :()\./-]*':(?=[ \t]|$)/}]},r={className:"template-variable",variants:[{begin:/\{\{/,end:/\}\}/},{begin:/%\{/,end:/\}/}]},i={className:"string",relevance:0,begin:/'/,end:/'/,contains:[{match:/''/,scope:"char.escape",relevance:0}]},o={className:"string",relevance:0,variants:[{begin:/"/,end:/"/},{begin:/\S+/}],contains:[e.BACKSLASH_ESCAPE,r]},l=e.inherit(o,{variants:[{begin:/'/,end:/'/,contains:[{begin:/''/,relevance:0}]},{begin:/"/,end:/"/},{begin:/[^\s,{}[\]]+/}]}),v={className:"number",begin:"\\b"+"[0-9]{4}(-[0-9][0-9]){0,2}"+"([Tt \\t][0-9][0-9]?(:[0-9][0-9]){2})?"+"(\\.[0-9]*)?"+"([ \\t])*(Z|[-+][0-9][0-9]?(:[0-9][0-9])?)?"+"\\b"},k={end:",",endsWithParent:!0,excludeEnd:!0,keywords:t,relevance:0},p={begin:/\{/,end:/\}/,contains:[k],illegal:"\\n",relevance:0},T={begin:"\\[",end:"\\]",contains:[k],illegal:"\\n",relevance:0},m=[a,{className:"meta",begin:"^---\\s*$",relevance:10},{className:"string",begin:"[\\|>]([1-9]?[+-])?[ ]*\\n( +)[^ ][^\\n]*\\n(\\2[^\\n]+\\n?)*"},{begin:"<%[%=-]?",end:"[%-]?%>",subLanguage:"ruby",excludeBegin:!0,excludeEnd:!0,relevance:0},{className:"type",begin:"!\\w+!"+n},{className:"type",begin:"!<"+n+">"},{className:"type",begin:"!"+n},{className:"type",begin:"!!"+n},{className:"meta",begin:"&"+e.UNDERSCORE_IDENT_RE+"$"},{className:"meta",begin:"\\*"+e.UNDERSCORE_IDENT_RE+"$"},{className:"bullet",begin:"-(?=[ ]|$)",relevance:0},e.HASH_COMMENT_MODE,{beginKeywords:t,keywords:{literal:t}},v,{className:"number",begin:e.C_NUMBER_RE+"\\b",relevance:0},p,T,i,o],C=[...m];return C.pop(),C.push(l),k.contains=C,{name:"YAML",case_insensitive:!0,aliases:["yml"],contains:m}}function fc(e){const t=e.regex,n=e.COMMENT("--","$"),a={scope:"string",variants:[{begin:/'/,end:/'/,contains:[{match:/''/}]}]},r={begin:/"/,end:/"/,contains:[{match:/""/}]},i=["true","false","unknown"],o=["double precision","large object","with timezone","without timezone"],l=["bigint","binary","blob","boolean","char","character","clob","date","dec","decfloat","decimal","float","int","integer","interval","nchar","nclob","national","numeric","real","row","smallint","time","timestamp","varchar","varying","varbinary"],c=["add","asc","collation","desc","final","first","last","view"],u=["abs","acos","all","allocate","alter","and","any","are","array","array_agg","array_max_cardinality","as","asensitive","asin","asymmetric","at","atan","atomic","authorization","avg","begin","begin_frame","begin_partition","between","bigint","binary","blob","boolean","both","by","call","called","cardinality","cascaded","case","cast","ceil","ceiling","char","char_length","character","character_length","check","classifier","clob","close","coalesce","collate","collect","column","commit","condition","connect","constraint","contains","convert","copy","corr","corresponding","cos","cosh","count","covar_pop","covar_samp","create","cross","cube","cume_dist","current","current_catalog","current_date","current_default_transform_group","current_path","current_role","current_row","current_schema","current_time","current_timestamp","current_path","current_role","current_transform_group_for_type","current_user","cursor","cycle","date","day","deallocate","dec","decimal","decfloat","declare","default","define","delete","dense_rank","deref","describe","deterministic","disconnect","distinct","double","drop","dynamic","each","element","else","empty","end","end_frame","end_partition","end-exec","equals","escape","every","except","exec","execute","exists","exp","external","extract","false","fetch","filter","first_value","float","floor","for","foreign","frame_row","free","from","full","function","fusion","get","global","grant","group","grouping","groups","having","hold","hour","identity","in","indicator","initial","inner","inout","insensitive","insert","int","integer","intersect","intersection","interval","into","is","join","json_array","json_arrayagg","json_exists","json_object","json_objectagg","json_query","json_table","json_table_primitive","json_value","lag","language","large","last_value","lateral","lead","leading","left","like","like_regex","listagg","ln","local","localtime","localtimestamp","log","log10","lower","match","match_number","match_recognize","matches","max","member","merge","method","min","minute","mod","modifies","module","month","multiset","national","natural","nchar","nclob","new","no","none","normalize","not","nth_value","ntile","null","nullif","numeric","octet_length","occurrences_regex","of","offset","old","omit","on","one","only","open","or","order","out","outer","over","overlaps","overlay","parameter","partition","pattern","per","percent","percent_rank","percentile_cont","percentile_disc","period","portion","position","position_regex","power","precedes","precision","prepare","primary","procedure","ptf","range","rank","reads","real","recursive","ref","references","referencing","regr_avgx","regr_avgy","regr_count","regr_intercept","regr_r2","regr_slope","regr_sxx","regr_sxy","regr_syy","release","result","return","returns","revoke","right","rollback","rollup","row","row_number","rows","running","savepoint","scope","scroll","search","second","seek","select","sensitive","session_user","set","show","similar","sin","sinh","skip","smallint","some","specific","specifictype","sql","sqlexception","sqlstate","sqlwarning","sqrt","start","static","stddev_pop","stddev_samp","submultiset","subset","substring","substring_regex","succeeds","sum","symmetric","system","system_time","system_user","table","tablesample","tan","tanh","then","time","timestamp","timezone_hour","timezone_minute","to","trailing","translate","translate_regex","translation","treat","trigger","trim","trim_array","true","truncate","uescape","union","unique","unknown","unnest","update","upper","user","using","value","values","value_of","var_pop","var_samp","varbinary","varchar","varying","versioning","when","whenever","where","width_bucket","window","with","within","without","year"],f=["abs","acos","array_agg","asin","atan","avg","cast","ceil","ceiling","coalesce","corr","cos","cosh","count","covar_pop","covar_samp","cume_dist","dense_rank","deref","element","exp","extract","first_value","floor","json_array","json_arrayagg","json_exists","json_object","json_objectagg","json_query","json_table","json_table_primitive","json_value","lag","last_value","lead","listagg","ln","log","log10","lower","max","min","mod","nth_value","ntile","nullif","percent_rank","percentile_cont","percentile_disc","position","position_regex","power","rank","regr_avgx","regr_avgy","regr_count","regr_intercept","regr_r2","regr_slope","regr_sxx","regr_sxy","regr_syy","row_number","sin","sinh","sqrt","stddev_pop","stddev_samp","substring","substring_regex","sum","tan","tanh","translate","translate_regex","treat","trim","trim_array","unnest","upper","value_of","var_pop","var_samp","width_bucket"],_=["current_catalog","current_date","current_default_transform_group","current_path","current_role","current_schema","current_transform_group_for_type","current_user","session_user","system_time","system_user","current_time","localtime","current_timestamp","localtimestamp"],v=["create table","insert into","primary key","foreign key","not null","alter table","add constraint","grouping sets","on overflow","character set","respect nulls","ignore nulls","nulls first","nulls last","depth first","breadth first"],k=f,p=[...u,...c].filter(B=>!f.includes(B)),T={scope:"variable",match:/@[a-z0-9][a-z0-9_]*/},m={scope:"operator",match:/[-+*/=%^~]|&&?|\|\|?|!=?|<(?:=>?|<|>)?|>[>=]?/,relevance:0},C={match:t.concat(/\b/,t.either(...k),/\s*\(/),relevance:0,keywords:{built_in:k}};function z(B){return t.concat(/\b/,t.either(...B.map(j=>j.replace(/\s+/,"\\s+"))),/\b/)}const P={scope:"keyword",match:z(v),relevance:0};function R(B,{exceptions:j,when:J}={}){const V=J;return j=j||[],B.map(ne=>ne.match(/\|\d+$/)||j.includes(ne)?ne:V(ne)?`${ne}|0`:ne)}return{name:"SQL",case_insensitive:!0,illegal:/[{}]|<\//,keywords:{$pattern:/\b[\w\.]+/,keyword:R(p,{when:B=>B.length<3}),literal:i,type:l,built_in:_},contains:[{scope:"type",match:z(o)},P,C,T,a,r,e.C_NUMBER_MODE,e.C_BLOCK_COMMENT_MODE,n,m]}}function Ni(e){const t=e.regex,n={begin:/<\/?[A-Za-z_]/,end:">",subLanguage:"xml",relevance:0},a={begin:"^[-\\*]{3,}",end:"$"},r={className:"code",variants:[{begin:"(`{3,})[^`](.|\\n)*?\\1`*[ ]*"},{begin:"(~{3,})[^~](.|\\n)*?\\1~*[ ]*"},{begin:"```",end:"```+[ ]*$"},{begin:"~~~",end:"~~~+[ ]*$"},{begin:"`.+?`"},{begin:"(?=^( {4}|\\t))",contains:[{begin:"^( {4}|\\t)",end:"(\\n)$"}],relevance:0}]},i={className:"bullet",begin:"^[ 	]*([*+-]|(\\d+\\.))(?=\\s+)",end:"\\s+",excludeEnd:!0},o={begin:/^\[[^\n]+\]:/,returnBegin:!0,contains:[{className:"symbol",begin:/\[/,end:/\]/,excludeBegin:!0,excludeEnd:!0},{className:"link",begin:/:\s*/,end:/$/,excludeBegin:!0}]},l=/[A-Za-z][A-Za-z0-9+.-]*/,c={variants:[{begin:/\[.+?\]\[.*?\]/,relevance:0},{begin:/\[.+?\]\(((data|javascript|mailto):|(?:http|ftp)s?:\/\/).*?\)/,relevance:2},{begin:t.concat(/\[.+?\]\(/,l,/:\/\/.*?\)/),relevance:2},{begin:/\[.+?\]\([./?&#].*?\)/,relevance:1},{begin:/\[.*?\]\(.*?\)/,relevance:0}],returnBegin:!0,contains:[{match:/\[(?=\])/},{className:"string",relevance:0,begin:"\\[",end:"\\]",excludeBegin:!0,returnEnd:!0},{className:"link",relevance:0,begin:"\\]\\(",end:"\\)",excludeBegin:!0,excludeEnd:!0},{className:"symbol",relevance:0,begin:"\\]\\[",end:"\\]",excludeBegin:!0,excludeEnd:!0}]},u={className:"strong",contains:[],variants:[{begin:/_{2}(?!\s)/,end:/_{2}/},{begin:/\*{2}(?!\s)/,end:/\*{2}/}]},f={className:"emphasis",contains:[],variants:[{begin:/\*(?![*\s])/,end:/\*/},{begin:/_(?![_\s])/,end:/_/,relevance:0}]},_=e.inherit(u,{contains:[]}),v=e.inherit(f,{contains:[]});u.contains.push(v),f.contains.push(_);let k=[n,c];return[u,f,_,v].forEach(C=>{C.contains=C.contains.concat(k)}),k=k.concat(u,f),{name:"Markdown",aliases:["md","mkdown","mkd"],contains:[{className:"section",variants:[{begin:"^#{1,6}",end:"$",contains:k},{begin:"(?=^.+?\\n[=-]{2,}$)",contains:[{begin:"^[=-]*$"},{begin:"^",end:"\\n",contains:k}]}]},n,i,u,f,{className:"quote",begin:"^>\\s+",contains:k,end:"$"},r,a,c,o,{scope:"literal",match:/&([a-zA-Z0-9]+|#[0-9]{1,7}|#[Xx][0-9a-fA-F]{1,6});/}]}}function Ci(e){const t=e.regex,n=t.concat(/[\p{L}_]/u,t.optional(/[\p{L}0-9_.-]*:/u),/[\p{L}0-9_.-]*/u),a=/[\p{L}0-9._:-]+/u,r={className:"symbol",begin:/&[a-z]+;|&#[0-9]+;|&#x[a-f0-9]+;/},i={begin:/\s/,contains:[{className:"keyword",begin:/#?[a-z_][a-z1-9_-]+/,illegal:/\n/}]},o=e.inherit(i,{begin:/\(/,end:/\)/}),l=e.inherit(e.APOS_STRING_MODE,{className:"string"}),c=e.inherit(e.QUOTE_STRING_MODE,{className:"string"}),u={endsWithParent:!0,illegal:/</,relevance:0,contains:[{className:"attr",begin:a,relevance:0},{begin:/=\s*/,relevance:0,contains:[{className:"string",endsParent:!0,variants:[{begin:/"/,end:/"/,contains:[r]},{begin:/'/,end:/'/,contains:[r]},{begin:/[^\s"'=<>`]+/}]}]}]};return{name:"HTML, XML",aliases:["html","xhtml","rss","atom","xjb","xsd","xsl","plist","wsf","svg"],case_insensitive:!0,unicodeRegex:!0,contains:[{className:"meta",begin:/<![a-z]/,end:/>/,relevance:10,contains:[i,c,l,o,{begin:/\[/,end:/\]/,contains:[{className:"meta",begin:/<![a-z]/,end:/>/,contains:[i,o,c,l]}]}]},e.COMMENT(/<!--/,/-->/,{relevance:10}),{begin:/<!\[CDATA\[/,end:/\]\]>/,relevance:10},r,{className:"meta",end:/\?>/,variants:[{begin:/<\?xml/,relevance:10,contains:[c]},{begin:/<\?[a-z][a-z0-9]+/}]},{className:"tag",begin:/<style(?=\s|>)/,end:/>/,keywords:{name:"style"},contains:[u],starts:{end:/<\/style>/,returnEnd:!0,subLanguage:["css","xml"]}},{className:"tag",begin:/<script(?=\s|>)/,end:/>/,keywords:{name:"script"},contains:[u],starts:{end:/<\/script>/,returnEnd:!0,subLanguage:["javascript","handlebars","xml"]}},{className:"tag",begin:/<>|<\/>/},{className:"tag",begin:t.concat(/</,t.lookahead(t.concat(n,t.either(/\/>/,/>/,/\s/)))),end:/\/?>/,contains:[{className:"name",begin:n,relevance:0,starts:u}]},{className:"tag",begin:t.concat(/<\//,t.lookahead(t.concat(n,/>/))),contains:[{className:"name",begin:n,relevance:0},{begin:/>/,relevance:0,endsParent:!0}]}]}}const vc=e=>({IMPORTANT:{scope:"meta",begin:"!important"},BLOCK_COMMENT:e.C_BLOCK_COMMENT_MODE,HEXCOLOR:{scope:"number",begin:/#(([0-9a-fA-F]{3,4})|(([0-9a-fA-F]{2}){3,4}))\b/},FUNCTION_DISPATCH:{className:"built_in",begin:/[\w-]+(?=\()/},ATTRIBUTE_SELECTOR_MODE:{scope:"selector-attr",begin:/\[/,end:/\]/,illegal:"$",contains:[e.APOS_STRING_MODE,e.QUOTE_STRING_MODE]},CSS_NUMBER_MODE:{scope:"number",begin:e.NUMBER_RE+"(%|em|ex|ch|rem|vw|vh|vmin|vmax|cm|mm|in|pt|pc|px|deg|grad|rad|turn|s|ms|Hz|kHz|dpi|dpcm|dppx)?",relevance:0},CSS_VARIABLE:{className:"attr",begin:/--[A-Za-z_][A-Za-z0-9_-]*/}}),gc=["a","abbr","address","article","aside","audio","b","blockquote","body","button","canvas","caption","cite","code","dd","del","details","dfn","div","dl","dt","em","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","header","hgroup","html","i","iframe","img","input","ins","kbd","label","legend","li","main","mark","menu","nav","object","ol","optgroup","option","p","picture","q","quote","samp","section","select","source","span","strong","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","tr","ul","var","video"],mc=["defs","g","marker","mask","pattern","svg","switch","symbol","feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feFlood","feGaussianBlur","feImage","feMerge","feMorphology","feOffset","feSpecularLighting","feTile","feTurbulence","linearGradient","radialGradient","stop","circle","ellipse","image","line","path","polygon","polyline","rect","text","use","textPath","tspan","foreignObject","clipPath"],pc=[...gc,...mc],hc=["any-hover","any-pointer","aspect-ratio","color","color-gamut","color-index","device-aspect-ratio","device-height","device-width","display-mode","forced-colors","grid","height","hover","inverted-colors","monochrome","orientation","overflow-block","overflow-inline","pointer","prefers-color-scheme","prefers-contrast","prefers-reduced-motion","prefers-reduced-transparency","resolution","scan","scripting","update","width","min-width","max-width","min-height","max-height"].sort().reverse(),_c=["active","any-link","blank","checked","current","default","defined","dir","disabled","drop","empty","enabled","first","first-child","first-of-type","fullscreen","future","focus","focus-visible","focus-within","has","host","host-context","hover","indeterminate","in-range","invalid","is","lang","last-child","last-of-type","left","link","local-link","not","nth-child","nth-col","nth-last-child","nth-last-col","nth-last-of-type","nth-of-type","only-child","only-of-type","optional","out-of-range","past","placeholder-shown","read-only","read-write","required","right","root","scope","target","target-within","user-invalid","valid","visited","where"].sort().reverse(),bc=["after","backdrop","before","cue","cue-region","first-letter","first-line","grammar-error","marker","part","placeholder","selection","slotted","spelling-error"].sort().reverse(),yc=["accent-color","align-content","align-items","align-self","alignment-baseline","all","anchor-name","animation","animation-composition","animation-delay","animation-direction","animation-duration","animation-fill-mode","animation-iteration-count","animation-name","animation-play-state","animation-range","animation-range-end","animation-range-start","animation-timeline","animation-timing-function","appearance","aspect-ratio","backdrop-filter","backface-visibility","background","background-attachment","background-blend-mode","background-clip","background-color","background-image","background-origin","background-position","background-position-x","background-position-y","background-repeat","background-size","baseline-shift","block-size","border","border-block","border-block-color","border-block-end","border-block-end-color","border-block-end-style","border-block-end-width","border-block-start","border-block-start-color","border-block-start-style","border-block-start-width","border-block-style","border-block-width","border-bottom","border-bottom-color","border-bottom-left-radius","border-bottom-right-radius","border-bottom-style","border-bottom-width","border-collapse","border-color","border-end-end-radius","border-end-start-radius","border-image","border-image-outset","border-image-repeat","border-image-slice","border-image-source","border-image-width","border-inline","border-inline-color","border-inline-end","border-inline-end-color","border-inline-end-style","border-inline-end-width","border-inline-start","border-inline-start-color","border-inline-start-style","border-inline-start-width","border-inline-style","border-inline-width","border-left","border-left-color","border-left-style","border-left-width","border-radius","border-right","border-right-color","border-right-style","border-right-width","border-spacing","border-start-end-radius","border-start-start-radius","border-style","border-top","border-top-color","border-top-left-radius","border-top-right-radius","border-top-style","border-top-width","border-width","bottom","box-align","box-decoration-break","box-direction","box-flex","box-flex-group","box-lines","box-ordinal-group","box-orient","box-pack","box-shadow","box-sizing","break-after","break-before","break-inside","caption-side","caret-color","clear","clip","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","color-scheme","column-count","column-fill","column-gap","column-rule","column-rule-color","column-rule-style","column-rule-width","column-span","column-width","columns","contain","contain-intrinsic-block-size","contain-intrinsic-height","contain-intrinsic-inline-size","contain-intrinsic-size","contain-intrinsic-width","container","container-name","container-type","content","content-visibility","counter-increment","counter-reset","counter-set","cue","cue-after","cue-before","cursor","cx","cy","direction","display","dominant-baseline","empty-cells","enable-background","field-sizing","fill","fill-opacity","fill-rule","filter","flex","flex-basis","flex-direction","flex-flow","flex-grow","flex-shrink","flex-wrap","float","flood-color","flood-opacity","flow","font","font-display","font-family","font-feature-settings","font-kerning","font-language-override","font-optical-sizing","font-palette","font-size","font-size-adjust","font-smooth","font-smoothing","font-stretch","font-style","font-synthesis","font-synthesis-position","font-synthesis-small-caps","font-synthesis-style","font-synthesis-weight","font-variant","font-variant-alternates","font-variant-caps","font-variant-east-asian","font-variant-emoji","font-variant-ligatures","font-variant-numeric","font-variant-position","font-variation-settings","font-weight","forced-color-adjust","gap","glyph-orientation-horizontal","glyph-orientation-vertical","grid","grid-area","grid-auto-columns","grid-auto-flow","grid-auto-rows","grid-column","grid-column-end","grid-column-start","grid-gap","grid-row","grid-row-end","grid-row-start","grid-template","grid-template-areas","grid-template-columns","grid-template-rows","hanging-punctuation","height","hyphenate-character","hyphenate-limit-chars","hyphens","icon","image-orientation","image-rendering","image-resolution","ime-mode","initial-letter","initial-letter-align","inline-size","inset","inset-area","inset-block","inset-block-end","inset-block-start","inset-inline","inset-inline-end","inset-inline-start","isolation","justify-content","justify-items","justify-self","kerning","left","letter-spacing","lighting-color","line-break","line-height","line-height-step","list-style","list-style-image","list-style-position","list-style-type","margin","margin-block","margin-block-end","margin-block-start","margin-bottom","margin-inline","margin-inline-end","margin-inline-start","margin-left","margin-right","margin-top","margin-trim","marker","marker-end","marker-mid","marker-start","marks","mask","mask-border","mask-border-mode","mask-border-outset","mask-border-repeat","mask-border-slice","mask-border-source","mask-border-width","mask-clip","mask-composite","mask-image","mask-mode","mask-origin","mask-position","mask-repeat","mask-size","mask-type","masonry-auto-flow","math-depth","math-shift","math-style","max-block-size","max-height","max-inline-size","max-width","min-block-size","min-height","min-inline-size","min-width","mix-blend-mode","nav-down","nav-index","nav-left","nav-right","nav-up","none","normal","object-fit","object-position","offset","offset-anchor","offset-distance","offset-path","offset-position","offset-rotate","opacity","order","orphans","outline","outline-color","outline-offset","outline-style","outline-width","overflow","overflow-anchor","overflow-block","overflow-clip-margin","overflow-inline","overflow-wrap","overflow-x","overflow-y","overlay","overscroll-behavior","overscroll-behavior-block","overscroll-behavior-inline","overscroll-behavior-x","overscroll-behavior-y","padding","padding-block","padding-block-end","padding-block-start","padding-bottom","padding-inline","padding-inline-end","padding-inline-start","padding-left","padding-right","padding-top","page","page-break-after","page-break-before","page-break-inside","paint-order","pause","pause-after","pause-before","perspective","perspective-origin","place-content","place-items","place-self","pointer-events","position","position-anchor","position-visibility","print-color-adjust","quotes","r","resize","rest","rest-after","rest-before","right","rotate","row-gap","ruby-align","ruby-position","scale","scroll-behavior","scroll-margin","scroll-margin-block","scroll-margin-block-end","scroll-margin-block-start","scroll-margin-bottom","scroll-margin-inline","scroll-margin-inline-end","scroll-margin-inline-start","scroll-margin-left","scroll-margin-right","scroll-margin-top","scroll-padding","scroll-padding-block","scroll-padding-block-end","scroll-padding-block-start","scroll-padding-bottom","scroll-padding-inline","scroll-padding-inline-end","scroll-padding-inline-start","scroll-padding-left","scroll-padding-right","scroll-padding-top","scroll-snap-align","scroll-snap-stop","scroll-snap-type","scroll-timeline","scroll-timeline-axis","scroll-timeline-name","scrollbar-color","scrollbar-gutter","scrollbar-width","shape-image-threshold","shape-margin","shape-outside","shape-rendering","speak","speak-as","src","stop-color","stop-opacity","stroke","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke-width","tab-size","table-layout","text-align","text-align-all","text-align-last","text-anchor","text-combine-upright","text-decoration","text-decoration-color","text-decoration-line","text-decoration-skip","text-decoration-skip-ink","text-decoration-style","text-decoration-thickness","text-emphasis","text-emphasis-color","text-emphasis-position","text-emphasis-style","text-indent","text-justify","text-orientation","text-overflow","text-rendering","text-shadow","text-size-adjust","text-transform","text-underline-offset","text-underline-position","text-wrap","text-wrap-mode","text-wrap-style","timeline-scope","top","touch-action","transform","transform-box","transform-origin","transform-style","transition","transition-behavior","transition-delay","transition-duration","transition-property","transition-timing-function","translate","unicode-bidi","user-modify","user-select","vector-effect","vertical-align","view-timeline","view-timeline-axis","view-timeline-inset","view-timeline-name","view-transition-name","visibility","voice-balance","voice-duration","voice-family","voice-pitch","voice-range","voice-rate","voice-stress","voice-volume","white-space","white-space-collapse","widows","width","will-change","word-break","word-spacing","word-wrap","writing-mode","x","y","z-index","zoom"].sort().reverse();function wc(e){const t=e.regex,n=vc(e),a={begin:/-(webkit|moz|ms|o)-(?=[a-z])/},r="and or not only",i=/@-?\w[\w]*(-\w+)*/,o="[a-zA-Z-][a-zA-Z0-9_-]*",l=[e.APOS_STRING_MODE,e.QUOTE_STRING_MODE];return{name:"CSS",case_insensitive:!0,illegal:/[=|'\$]/,keywords:{keyframePosition:"from to"},classNameAliases:{keyframePosition:"selector-tag"},contains:[n.BLOCK_COMMENT,a,n.CSS_NUMBER_MODE,{className:"selector-id",begin:/#[A-Za-z0-9_-]+/,relevance:0},{className:"selector-class",begin:"\\."+o,relevance:0},n.ATTRIBUTE_SELECTOR_MODE,{className:"selector-pseudo",variants:[{begin:":("+_c.join("|")+")"},{begin:":(:)?("+bc.join("|")+")"}]},n.CSS_VARIABLE,{className:"attribute",begin:"\\b("+yc.join("|")+")\\b"},{begin:/:/,end:/[;}{]/,contains:[n.BLOCK_COMMENT,n.HEXCOLOR,n.IMPORTANT,n.CSS_NUMBER_MODE,...l,{begin:/(url|data-uri)\(/,end:/\)/,relevance:0,keywords:{built_in:"url data-uri"},contains:[...l,{className:"string",begin:/[^)]/,endsWithParent:!0,excludeEnd:!0}]},n.FUNCTION_DISPATCH]},{begin:t.lookahead(/@/),end:"[{;]",relevance:0,illegal:/:/,contains:[{className:"keyword",begin:i},{begin:/\s/,endsWithParent:!0,excludeEnd:!0,relevance:0,keywords:{$pattern:/[a-z-]+/,keyword:r,attribute:hc.join(" ")},contains:[{begin:/[a-z-]+(?=:)/,className:"attribute"},...l,n.CSS_NUMBER_MODE]}]},{className:"selector-tag",begin:"\\b("+pc.join("|")+")\\b"}]}}Ie.registerLanguage("typescript",Ei);Ie.registerLanguage("javascript",Ti);Ie.registerLanguage("python",uc);Ie.registerLanguage("bash",Mr);Ie.registerLanguage("shell",Mr);Ie.registerLanguage("sh",Mr);Ie.registerLanguage("json",dc);Ie.registerLanguage("yaml",Ai);Ie.registerLanguage("yml",Ai);Ie.registerLanguage("sql",fc);Ie.registerLanguage("markdown",Ni);Ie.registerLanguage("md",Ni);Ie.registerLanguage("xml",Ci);Ie.registerLanguage("html",Ci);Ie.registerLanguage("css",wc);Ie.registerLanguage("ts",Ei);Ie.registerLanguage("js",Ti);function Lr(e,t){return t&&Ie.getLanguage(t)?Ie.highlight(e,{language:t}).value:Ie.highlightAuto(e).value}const Ec=new Di({breaks:!0,gfm:!0,renderer:{code({text:e,lang:t}){const n=(t==null?void 0:t.split(/\s/)[0])??"",a=Lr(e,n||void 0);return`<pre class="code-block">${n?`<span class="code-lang">${n}</span>`:""}<code class="hljs">${a}</code></pre>`}}});function Sc(e){const t=Ec.parse(e,{async:!1});return Sa.sanitize(t,{ADD_ATTR:["class"]})}function kc(e,t){var i,o;if(e==="exec")return"bash";if(e==="web_fetch")return"html";if(e==="web_search"||e==="ls")return;const a=(o=(i=(typeof t=="string"?t:"").match(/\.(\w+)$/))==null?void 0:i[1])==null?void 0:o.toLowerCase();return a?{ts:"typescript",tsx:"typescript",js:"javascript",jsx:"javascript",py:"python",sh:"bash",bash:"bash",fish:"bash",json:"json",yaml:"yaml",yml:"yaml",toml:"yaml",sql:"sql",md:"markdown",html:"html",xml:"xml",css:"css",svelte:"html"}[a]:void 0}function xc(e){var a,r;const t=(r=(a=e.match(/\.(\w+)$/))==null?void 0:a[1])==null?void 0:r.toLowerCase();return t?{ts:"typescript",tsx:"typescript",js:"javascript",jsx:"javascript",py:"python",sh:"bash",bash:"bash",fish:"bash",json:"json",yaml:"yaml",yml:"yaml",toml:"yaml",sql:"sql",md:"markdown",html:"html",xml:"xml",css:"css",svelte:"html"}[t]:void 0}var Tc=N('<div class="markdown-body svelte-xioz66"><!></div>');function Ri(e,t){qe(t,!0);let n=K(()=>Sc(t.content)),a=G(null);bt(()=>{s(n),s(a)&&requestAnimationFrame(()=>{const o=s(a).querySelectorAll("pre");for(const l of o){if(l.querySelector(".copy-btn"))continue;const c=document.createElement("button");c.className="copy-btn",c.textContent="Copy",c.setAttribute("aria-label","Copy code to clipboard"),c.addEventListener("click",()=>{var f;const u=((f=l.querySelector("code"))==null?void 0:f.textContent)??l.textContent??"";navigator.clipboard.writeText(u).then(()=>{c.textContent="Copied!",c.classList.add("copied"),setTimeout(()=>{c.textContent="Copy",c.classList.remove("copied")},2e3)})}),l.style.position="relative",l.appendChild(c)}})});var r=Tc(),i=d(r);Nr(i,()=>s(n)),Ta(r,o=>I(a,o),()=>s(a)),S(e,r),je()}var Ac=N('<span class="spinner svelte-1ctlpsp"></span>');function hn(e,t){let n=Qt(t,"size",3,16);var a=Ac();q(()=>xa(a,`width: ${n()??""}px; height: ${n()??""}px;`)),S(e,a)}var Nc=N('<span class="icon-error svelte-7snhhp">!</span>'),Cc=N('<span class="icon-done svelte-7snhhp">✓</span>'),Rc=N('<span class="status-count svelte-7snhhp"> </span>'),Ic=N('<button title="Click to view tool details"><span class="status-indicator svelte-7snhhp"><!></span> <span class="status-text svelte-7snhhp"> </span> <!> <span class="chevron svelte-7snhhp">›</span></button>');function Ii(e,t){qe(t,!0);let n=K(()=>t.tools.filter(R=>R.status==="running")),a=K(()=>t.tools.filter(R=>R.status!=="running").length),r=K(()=>t.tools.filter(R=>R.status==="error").length),i=K(()=>t.tools.length);function o(R){switch(R){case"exec":return"Running command";case"read":return"Reading file";case"write":return"Writing file";case"edit":return"Editing file";case"grep":return"Searching files";case"find":return"Finding files";case"ls":return"Listing directory";case"web_search":return"Searching the web";case"web_fetch":return"Fetching page";case"mem0_search":return"Searching memory";case"blackboard":return"Checking blackboard";case"sessions_send":return"Messaging agent";case"sessions_ask":return"Asking agent";case"sessions_spawn":return"Spawning worker";case"message":return"Sending message";case"enable_tool":return"Enabling tool";case"voice_reply":return"Sending voice message";default:return R.replace(/_/g," ").replace(/\b\w/g,B=>B.toUpperCase())}}let l=K(()=>s(n).length>0?o(s(n)[s(n).length-1].name):s(r)>0?`${s(i)} tool${s(i)===1?"":"s"} · ${s(r)} failed`:`${s(i)} tool${s(i)===1?"":"s"} completed`),c=K(()=>s(n).length>0);var u=Ic();let f;var _=d(u),v=d(_);{var k=R=>{hn(R,{size:12})},p=R=>{var B=Nc();S(R,B)},T=R=>{var B=Cc();S(R,B)};F(v,R=>{s(c)?R(k):s(r)>0?R(p,1):R(T,!1)})}var m=h(_,2),C=d(m),z=h(m,2);{var P=R=>{var B=Rc(),j=d(B);q(()=>L(j,`${s(a)??""}/${s(i)??""}`)),S(R,B)};F(z,R=>{s(i)>1&&R(P)})}q(()=>{f=Se(u,1,"tool-status-line svelte-7snhhp",null,f,{active:s(c),"has-errors":s(r)>0&&!s(c)}),L(C,s(l))}),te("click",u,()=>{var R;return(R=t.onclick)==null?void 0:R.call(t)}),S(e,u),je()}ft(["click"]);var Oc=N('<span class="chat-avatar-text">You</span>'),Mc=N('<span class="chat-avatar-emoji"> </span>'),Lc=N('<span class="chat-avatar-text"> </span>'),Dc=N('<button class="media-thumb svelte-dfflq6"><img class="svelte-dfflq6"/></button>'),Pc=N('<div class="file-attachment svelte-dfflq6"><span class="file-att-icon svelte-dfflq6">📄</span> <span class="file-att-name svelte-dfflq6"> </span></div>'),Bc=N('<div class="file-attachment svelte-dfflq6"><span class="file-att-icon svelte-dfflq6">📝</span> <span class="file-att-name svelte-dfflq6"> </span></div>'),zc=N("<div></div>"),Uc=N('<details class="thinking-block svelte-dfflq6"><summary class="thinking-summary svelte-dfflq6">Thought process</summary> <div class="thinking-content svelte-dfflq6"> </div></details>'),Fc=N('<div class="user-text svelte-dfflq6"> </div>'),qc=N('<div class="chat-content"><!></div>'),jc=N('<div class="lightbox svelte-dfflq6" role="dialog" tabindex="-1"><img alt="Expanded view" class="svelte-dfflq6"/> <button class="lightbox-close svelte-dfflq6" aria-label="Close">×</button></div>'),Hc=N('<div><div><!></div> <div class="chat-body"><!> <!> <!> <!> <div class="timestamp svelte-dfflq6"> </div></div></div> <!>',1);function Gc(e,t){qe(t,!0);let n=K(()=>t.message.role==="user"),a=K(()=>t.agentName?t.agentName.slice(0,2).toUpperCase():"AI"),r=K(()=>t.message.media&&t.message.media.length>0),i=G(null);function o(b){I(i,b,!0)}function l(){I(i,null)}var c=Hc(),u=ze(c);let f;var _=d(u);let v;var k=d(_);{var p=b=>{var M=Oc();S(b,M)},T=b=>{var M=Mc(),w=d(M);q(()=>L(w,t.agentEmoji)),S(b,M)},m=b=>{var M=Lc(),w=d(M);q(()=>L(w,s(a))),S(b,M)};F(k,b=>{s(n)?b(p):t.agentEmoji?b(T,1):b(m,!1)})}var C=h(_,2),z=d(C);{var P=b=>{Ii(b,{get tools(){return t.message.toolCalls},onclick:()=>{var M;return(M=t.onToolClick)==null?void 0:M.call(t,t.message.toolCalls)}})};F(z,b=>{t.message.toolCalls&&t.message.toolCalls.length>0&&b(P)})}var R=h(z,2);{var B=b=>{var M=zc();let w;st(M,21,()=>t.message.media,gn,(O,E)=>{var D=Pt(),H=ze(D);{var Q=X=>{var he=Dc(),be=d(he);q(()=>{Zt(be,"src",`data:${s(E).contentType??""};base64,${s(E).data??""}`),Zt(be,"alt",s(E).filename??"image")}),te("click",he,()=>o(`data:${s(E).contentType};base64,${s(E).data}`)),S(X,he)},g=K(()=>s(E).contentType.startsWith("image/")),y=X=>{var he=Pc(),be=h(d(he),2),ye=d(be);q(()=>L(ye,s(E).filename??"document.pdf")),S(X,he)},Y=X=>{var he=Bc(),be=h(d(he),2),ye=d(be);q(()=>L(ye,s(E).filename??"file")),S(X,he)};F(H,X=>{s(g)?X(Q):s(E).contentType==="application/pdf"?X(y,1):X(Y,!1)})}S(O,D)}),q(()=>w=Se(M,1,"msg-media svelte-dfflq6",null,w,{single:t.message.media.length===1,grid:t.message.media.length>1})),S(b,M)};F(R,b=>{s(r)&&b(B)})}var j=h(R,2);{var J=b=>{var M=Uc(),w=h(d(M),2),O=d(w);q(()=>L(O,t.message.thinking)),S(b,M)};F(j,b=>{t.message.thinking&&b(J)})}var V=h(j,2);{var ne=b=>{var M=qc(),w=d(M);{var O=D=>{var H=Fc(),Q=d(H);q(()=>L(Q,t.message.content)),S(D,H)},E=D=>{Ri(D,{get content(){return t.message.content}})};F(w,D=>{s(n)?D(O):D(E,!1)})}S(b,M)};F(V,b=>{t.message.content&&b(ne)})}var de=h(V,2),pe=d(de),Z=h(u,2);{var se=b=>{var M=jc(),w=d(M),O=h(w,2);q(()=>Zt(w,"src",s(i))),te("click",M,l),te("keydown",M,E=>E.key==="Escape"&&l()),te("click",O,l),S(b,M)};F(Z,b=>{s(i)&&b(se)})}q(b=>{f=Se(u,1,"chat-msg",null,f,{user:s(n),assistant:!s(n)}),v=Se(_,1,"chat-avatar",null,v,{user:s(n),agent:!s(n)}),L(pe,b)},[()=>Yl(t.message.timestamp)]),S(e,c),je()}ft(["click","keydown"]);bo();var Wc=N('<span class="dots svelte-76byqe"><span class="dot svelte-76byqe"></span> <span class="dot svelte-76byqe"></span> <span class="dot svelte-76byqe"></span></span>');function Kc(e){var t=Wc();S(e,t)}var Vc=N('<div class="empty-emoji svelte-12m7xaa"> </div>'),Zc=N('<div class="empty-initials svelte-12m7xaa"> </div>'),Yc=N('<div class="empty-state svelte-12m7xaa"><!> <p class="svelte-12m7xaa">Send a message to start a conversation.</p></div>'),Jc=N('<span class="chat-avatar-emoji svelte-12m7xaa"> </span>'),Xc=N('<span class="chat-avatar-text svelte-12m7xaa"> </span>'),Qc=N('<details class="thinking-stream svelte-12m7xaa" open=""><summary class="thinking-summary svelte-12m7xaa">Thinking...</summary> <div class="thinking-content svelte-12m7xaa"> </div></details>'),$c=N('<div class="chat-content svelte-12m7xaa"><!></div>'),eu=N('<div class="chat-msg assistant streaming svelte-12m7xaa"><div class="chat-avatar agent svelte-12m7xaa"><!></div> <div class="chat-body svelte-12m7xaa"><!> <!> <!></div></div>'),tu=N("<!> <!>",1),nu=N('<button class="scroll-btn svelte-12m7xaa">New messages below</button>'),au=N('<div class="message-list svelte-12m7xaa"><!> <!></div>');function ru(e,t){qe(t,!0);let n=Qt(t,"thinkingText",3,""),a=K(()=>t.agentName?t.agentName.slice(0,2).toUpperCase():"AI"),r=G(null),i=G(!0);function o(){if(!s(r))return;I(i,s(r).scrollHeight-s(r).scrollTop-s(r).clientHeight<100)}function l(){s(r)&&(s(r).scrollTop=s(r).scrollHeight)}bt(()=>{t.messages.length,t.streamingText,n(),t.activeToolCalls.length,s(i)&&requestAnimationFrame(l)});var c=au(),u=d(c);{var f=p=>{var T=Yc(),m=d(T);{var C=P=>{var R=Vc(),B=d(R);q(()=>L(B,t.agentEmoji)),S(P,R)},z=P=>{var R=Zc(),B=d(R);q(()=>L(B,s(a))),S(P,R)};F(m,P=>{t.agentEmoji?P(C):P(z,!1)})}S(p,T)},_=p=>{var T=tu(),m=ze(T);st(m,17,()=>t.messages,P=>P.id,(P,R)=>{Gc(P,{get message(){return s(R)},get agentName(){return t.agentName},get agentEmoji(){return t.agentEmoji},get onToolClick(){return t.onToolClick}})});var C=h(m,2);{var z=P=>{var R=eu(),B=d(R),j=d(B);{var J=O=>{var E=Jc(),D=d(E);q(()=>L(D,t.agentEmoji)),S(O,E)},V=O=>{var E=Xc(),D=d(E);q(()=>L(D,s(a))),S(O,E)};F(j,O=>{t.agentEmoji?O(J):O(V,!1)})}var ne=h(B,2),de=d(ne);{var pe=O=>{var E=Qc(),D=h(d(E),2),H=d(D);q(()=>L(H,n())),S(O,E)};F(de,O=>{n()&&O(pe)})}var Z=h(de,2);{var se=O=>{Ii(O,{get tools(){return t.activeToolCalls},onclick:()=>{var E;return(E=t.onToolClick)==null?void 0:E.call(t,t.activeToolCalls)}})};F(Z,O=>{t.activeToolCalls.length>0&&O(se)})}var b=h(Z,2);{var M=O=>{var E=$c(),D=d(E);Ri(D,{get content(){return t.streamingText}}),S(O,E)},w=O=>{Kc(O)};F(b,O=>{t.streamingText?O(M):t.activeToolCalls.length===0&&!n()&&O(w,1)})}S(P,R)};F(C,P=>{t.isStreaming&&P(z)})}S(p,T)};F(u,p=>{t.messages.length===0&&!t.isStreaming?p(f):p(_,!1)})}var v=h(u,2);{var k=p=>{var T=nu();te("click",T,l),S(p,T)};F(v,p=>{!s(i)&&t.isStreaming&&p(k)})}Ta(c,p=>I(r,p),()=>s(r)),sn("scroll",c,o),S(e,c),je()}ft(["click"]);var su=N('<div class="context-bar svelte-dgb2n2"><div class="context-fill svelte-dgb2n2"></div></div>'),iu=N('<button><span class="slash-cmd svelte-dgb2n2"> </span> <span class="slash-desc svelte-dgb2n2"> </span></button>'),ou=N('<div class="slash-menu svelte-dgb2n2"></div>'),lu=N('<div class="queued-indicator svelte-dgb2n2"><span class="queued-text svelte-dgb2n2"> </span> <button class="queued-cancel svelte-dgb2n2" aria-label="Cancel queued message">×</button></div>'),cu=N('<img class="svelte-dgb2n2"/>'),uu=N('<span class="file-emoji svelte-dgb2n2">📄</span>'),du=N('<span class="file-emoji svelte-dgb2n2">📝</span>'),fu=N('<span class="file-emoji svelte-dgb2n2">📎</span>'),vu=N('<div class="file-icon svelte-dgb2n2"><!></div>'),gu=N('<span class="attachment-name svelte-dgb2n2"> </span>'),mu=N('<div class="attachment-thumb svelte-dgb2n2"><!> <button class="remove-btn svelte-dgb2n2" aria-label="Remove attachment">×</button> <!></div>'),pu=N('<div class="attachment-preview svelte-dgb2n2"></div>'),hu=N('<button class="stop-btn svelte-dgb2n2" aria-label="Stop generating" title="Stop generating (Esc)"><span class="stop-icon svelte-dgb2n2">■</span></button>'),_u=N('<div class="drag-overlay svelte-dgb2n2"><div class="drag-label svelte-dgb2n2">Drop file to attach</div></div>'),bu=N('<div><!> <div class="input-area svelte-dgb2n2"><!> <!> <!> <div><!> <button class="attach-btn svelte-dgb2n2" title="Attach file (images, PDFs, text, code)" aria-label="Attach file"><svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21.44 11.05l-9.19 9.19a6 6 0 01-8.49-8.49l9.19-9.19a4 4 0 015.66 5.66l-9.2 9.19a2 2 0 01-2.83-2.83l8.49-8.48"></path></svg></button> <textarea rows="1" class="svelte-dgb2n2"></textarea> <button> </button></div> <input type="file" accept="image/*,application/pdf,.json,.xml,.csv,.md,.txt,.html,.yaml,.yml,.toml,.log,.py,.js,.ts,.sh,.sql,.css,.rs,.go,.java,.c,.cpp,.h,.rb,.swift" multiple="" class="hidden-file-input svelte-dgb2n2"/></div> <!></div>');function yu(e,t){qe(t,!0);let n=Qt(t,"contextPercent",3,0),a=Qt(t,"slashCommands",19,()=>[]),r=G(""),i=G(null),o=G(null),l=G(!1),c=G(0),u=G(Ne([])),f=G(null),_=G(!1);const v=25*1024*1024,k=["image/jpeg","image/png","image/gif","image/webp"],p=["application/pdf"],T=["text/plain","text/csv","text/markdown","text/html","text/xml","application/json","application/xml"],m=[...k,...p,...T];function C(A){return T.includes(A)||A.startsWith("text/")}function z(A){return k.includes(A)}let P=K(()=>s(r).startsWith("/")?a().filter(A=>A.command.startsWith(s(r).trim())):[]);bt(()=>{I(l,s(P).length>0&&s(r).startsWith("/"),!0),s(l)&&I(c,0)}),bt(()=>{if(!t.isStreaming&&s(i)){const A=s(i);I(i,null),t.onSend(A)}});function R(A){var re;if(A.type&&(m.includes(A.type)||A.type.startsWith("text/")))return A.type;const W=(re=A.name.split(".").pop())==null?void 0:re.toLowerCase(),ae={pdf:"application/pdf",json:"application/json",xml:"application/xml",csv:"text/csv",md:"text/markdown",txt:"text/plain",html:"text/html",htm:"text/html",yaml:"text/yaml",yml:"text/yaml",toml:"text/plain",log:"text/plain",py:"text/plain",js:"text/plain",ts:"text/plain",sh:"text/plain",sql:"text/plain",css:"text/plain",rs:"text/plain",go:"text/plain",java:"text/plain",c:"text/plain",cpp:"text/plain",h:"text/plain",rb:"text/plain",swift:"text/plain"};return W&&ae[W]?ae[W]:null}function B(A){return new Promise(W=>{const ae=R(A);if(!ae){W(null);return}if(A.size>v){W(null);return}const re=new FileReader;re.onload=()=>{const Te=re.result,ke=Te.match(/^data:[^;]+;base64,(.+)$/),we=ke?ke[1]:Te;W({contentType:ae,data:we,filename:A.name})},re.onerror=()=>W(null),re.readAsDataURL(A)})}async function j(A){const W=Array.from(A);for(const ae of W){if(s(u).length>=4)break;const re=await B(ae);re&&I(u,[...s(u),re],!0)}}function J(A){I(u,s(u).filter((W,ae)=>ae!==A),!0)}function V(){var A;(A=s(f))==null||A.click()}function ne(A){const W=A.target;W.files&&(j(W.files),W.value="")}function de(A){A.preventDefault(),I(_,!0)}function pe(A){A.preventDefault(),I(_,!1)}function Z(A){var W;A.preventDefault(),I(_,!1),(W=A.dataTransfer)!=null&&W.files&&j(A.dataTransfer.files)}function se(A){var re;const W=(re=A.clipboardData)==null?void 0:re.items;if(!W)return;const ae=[];for(const Te of W)if(Te.kind==="file"){const ke=Te.getAsFile();ke&&R(ke)&&ae.push(ke)}ae.length>0&&(A.preventDefault(),j(ae))}function b(A){if(s(l)){if(A.key==="ArrowDown"){A.preventDefault(),I(c,(s(c)+1)%s(P).length);return}if(A.key==="ArrowUp"){A.preventDefault(),I(c,(s(c)-1+s(P).length)%s(P).length);return}if(A.key==="Tab"||A.key==="Enter"&&!A.shiftKey){A.preventDefault();const W=s(P)[s(c)];W&&(I(r,W.command,!0),I(l,!1),A.key==="Enter"&&M());return}if(A.key==="Escape"){A.preventDefault(),I(l,!1);return}}A.key==="Enter"&&!A.shiftKey&&(A.preventDefault(),M())}function M(){const A=s(r).trim();if(!(A||s(u).length>0))return;if(t.isStreaming){A&&(I(i,A,!0),I(r,""),s(o)&&(s(o).style.height="40px"));return}const ae=s(u).length>0?[...s(u)]:void 0,Te=(ae==null?void 0:ae.some(we=>z(we.contentType)))?"What's in this image?":"Please review this file.",ke=A||(ae?Te:"");t.onSend(ke,ae),I(r,""),I(u,[],!0),I(l,!1),s(o)&&(s(o).style.height="40px")}function w(){s(o)&&(s(o).style.height="40px",s(o).style.height=Math.min(s(o).scrollHeight,200)+"px")}function O(A){const W=s(P)[A];W&&(I(r,W.command,!0),I(l,!1),M())}bt(()=>{!t.isStreaming&&s(o)&&s(o).focus()});let E=K(()=>n()>80?"var(--red)":n()>60?"var(--yellow)":"var(--accent)"),D=K(()=>s(r).trim().length>0||s(u).length>0);var H=bu();let Q;var g=d(H);{var y=A=>{var W=su(),ae=d(W);q(()=>{Zt(W,"title",`Context window: ${n()??""}% used`),xa(ae,`width: ${n()??""}%; background: ${s(E)??""};`)}),S(A,W)};F(g,A=>{n()>0&&A(y)})}var Y=h(g,2),X=d(Y);{var he=A=>{var W=ou();st(W,21,()=>s(P),gn,(ae,re,Te)=>{var ke=iu();let we;var ee=d(ke),_e=d(ee),xe=h(ee,2),Pe=d(xe);q(()=>{we=Se(ke,1,"slash-item svelte-dgb2n2",null,we,{selected:Te===s(c)}),L(_e,s(re).command),L(Pe,s(re).description)}),te("click",ke,()=>O(Te)),S(ae,ke)}),S(A,W)};F(X,A=>{s(l)&&A(he)})}var be=h(X,2);{var ye=A=>{var W=lu(),ae=d(W),re=d(ae),Te=h(ae,2);q(ke=>L(re,`Queued: ${ke??""}`),[()=>s(i).length>60?s(i).slice(0,60)+"…":s(i)]),te("click",Te,()=>{I(i,null)}),S(A,W)};F(be,A=>{s(i)&&A(ye)})}var it=h(be,2);{var Ke=A=>{var W=pu();st(W,21,()=>s(u),gn,(ae,re,Te)=>{var ke=mu(),we=d(ke);{var ee=Ve=>{var Ze=cu();q(()=>{Zt(Ze,"src",`data:${s(re).contentType??""};base64,${s(re).data??""}`),Zt(Ze,"alt",s(re).filename??"attachment")}),S(Ve,Ze)},_e=K(()=>z(s(re).contentType)),xe=Ve=>{var Ze=vu(),ot=d(Ze);{var en=It=>{var Hn=uu();S(It,Hn)},Fa=It=>{var Hn=du();S(It,Hn)},qa=K(()=>C(s(re).contentType)),Oi=It=>{var Hn=fu();S(It,Hn)};F(ot,It=>{s(re).contentType==="application/pdf"?It(en):s(qa)?It(Fa,1):It(Oi,!1)})}S(Ve,Ze)};F(we,Ve=>{s(_e)?Ve(ee):Ve(xe,!1)})}var Pe=h(we,2),wn=h(Pe,2);{var En=Ve=>{var Ze=gu(),ot=d(Ze);q(()=>L(ot,s(re).filename)),S(Ve,Ze)};F(wn,Ve=>{s(re).filename&&Ve(En)})}te("click",Pe,()=>J(Te)),S(ae,ke)}),S(A,W)};F(it,A=>{s(u).length>0&&A(Ke)})}var ie=h(it,2);let U;var $=d(ie);{var ce=A=>{var W=hu();te("click",W,function(...ae){var re;(re=t.onAbort)==null||re.apply(this,ae)}),S(A,W)};F($,A=>{t.isStreaming&&A(ce)})}var ve=h($,2),ge=h(ve,2);Ta(ge,A=>I(o,A),()=>s(o));var Ee=h(ge,2);let Oe;var He=d(Ee),De=h(ie,2);Ta(De,A=>I(f,A),()=>s(f));var Re=h(Y,2);{var $e=A=>{var W=_u();S(A,W)};F(Re,A=>{s(_)&&A($e)})}q((A,W)=>{Q=Se(H,1,"input-bar svelte-dgb2n2",null,Q,{"drag-over":s(_)}),U=Se(ie,1,"input-wrapper svelte-dgb2n2",null,U,{streaming:t.isStreaming}),Zt(ge,"placeholder",t.isStreaming?"Type to queue a message...":"Type a message... (/ for commands)"),Oe=Se(Ee,1,"send-btn svelte-dgb2n2",null,Oe,A),Ee.disabled=!s(D),L(He,W)},[()=>({queuing:t.isStreaming&&s(r).trim().length>0}),()=>t.isStreaming&&s(r).trim().length>0?"Queue":"Send"]),sn("dragover",H,de),sn("dragleave",H,pe),sn("drop",H,Z),te("click",ve,V),te("keydown",ge,b),te("input",ge,w),sn("paste",ge,se),za(ge,()=>s(r),A=>I(r,A)),te("click",Ee,M),te("change",De,ne),S(e,H),je()}ft(["click","keydown","input","change"]);var wu=N('<span class="stat running svelte-8tq4pr"><!> </span>'),Eu=N('<span class="stat ok svelte-8tq4pr"> </span>'),Su=N('<span class="stat err svelte-8tq4pr"> </span>'),ku=N('<span class="stat time svelte-8tq4pr"> </span>'),xu=N('<span class="tool-raw svelte-8tq4pr"> </span>'),Tu=N('<span class="tool-time svelte-8tq4pr"> </span>'),Au=N('<button class="collapse-toggle svelte-8tq4pr"> </button>'),Nu=N('<div class="tool-detail svelte-8tq4pr"><pre><!></pre> <!></div>'),Cu=N('<div class="tool-preview svelte-8tq4pr"> </div>'),Ru=N('<div><button class="tool-row svelte-8tq4pr"><span class="tool-idx svelte-8tq4pr"> </span> <span><!></span> <span class="tool-label svelte-8tq4pr"><span class="tool-name svelte-8tq4pr"> </span> <!></span> <!> <span class="tool-chevron svelte-8tq4pr"> </span></button> <!></div>'),Iu=N('<div class="tool-panel svelte-8tq4pr"><div class="panel-header svelte-8tq4pr"><div class="header-top svelte-8tq4pr"><span class="panel-title svelte-8tq4pr">Tool Activity</span> <button class="close-btn svelte-8tq4pr" aria-label="Close panel">×</button></div> <div class="header-stats svelte-8tq4pr"><!> <!> <!> <!> <span class="stat-spacer svelte-8tq4pr"></span> <button class="toggle-btn svelte-8tq4pr" title="Expand all">⊞</button> <button class="toggle-btn svelte-8tq4pr" title="Collapse all">⊟</button></div></div> <div class="panel-body svelte-8tq4pr"></div></div>');function Ou(e,t){qe(t,!0);let n=G(Ne(new Set));bt(()=>{const g=t.tools.filter(y=>y.status==="error").map(y=>y.id);g.length>0&&I(n,new Set([...s(n),...g]),!0)});function a(g){const y=new Set(s(n));y.has(g)?y.delete(g):y.add(g),I(n,y,!0)}function r(){I(n,new Set(t.tools.map(g=>g.id)),!0)}function i(){I(n,new Set,!0)}let o=K(()=>t.tools.filter(g=>g.status==="complete").length),l=K(()=>t.tools.filter(g=>g.status==="error").length),c=K(()=>t.tools.filter(g=>g.status==="running").length),u=K(()=>t.tools.reduce((g,y)=>g+(y.durationMs??0),0));function f(g){switch(g){case"exec":return"Run command";case"read":return"Read file";case"write":return"Write file";case"edit":return"Edit file";case"grep":return"Search files";case"find":return"Find files";case"ls":return"List directory";case"web_search":return"Search web";case"web_fetch":return"Fetch page";case"mem0_search":return"Search memory";case"blackboard":return"Blackboard";case"sessions_send":return"Message agent";case"sessions_ask":return"Ask agent";case"sessions_spawn":return"Spawn worker";case"message":return"Send message";case"enable_tool":return"Enable tool";default:return g}}function _(g){switch(g){case"running":return"";case"error":return"✕";default:return"✓"}}function v(g){if(!g)return"";const y=g.trim();return y.length<=120?y:y.slice(0,120)+"…"}const k=20;let p=G(Ne(new Set));function T(g){const y=new Set(s(p));y.has(g)?y.delete(g):y.add(g),I(p,y,!0)}function m(g){return g?g.split(`
`).length:0}function C(g){return m(g.result)>k}function z(g){return C(g)&&!s(p).has(g.id)}function P(g){if(g.name==="edit")return!0;if(!g.result)return!1;const y=g.result;return y.startsWith("---")&&y.includes("+++")||y.includes("@@ ")}function R(g){return g.split(`
`).map(Y=>{const X=Y.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;");return Y.startsWith("+")&&!Y.startsWith("+++")?`<span class="diff-add">${X}</span>`:Y.startsWith("-")&&!Y.startsWith("---")?`<span class="diff-del">${X}</span>`:Y.startsWith("@@")?`<span class="diff-hunk">${X}</span>`:X}).join(`
`)}function B(g){if(!g.result)return"";if(P(g))return Sa.sanitize(R(g.result),{ADD_ATTR:["class"]});const y=kc(g.name,g.result);return y?Sa.sanitize(Lr(g.result,y),{ADD_ATTR:["class"]}):g.result.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}var j=Iu(),J=d(j),V=d(J),ne=h(d(V),2),de=h(V,2),pe=d(de);{var Z=g=>{var y=wu(),Y=d(y);hn(Y,{size:10});var X=h(Y);q(()=>L(X,` ${s(c)??""} running`)),S(g,y)};F(pe,g=>{s(c)>0&&g(Z)})}var se=h(pe,2);{var b=g=>{var y=Eu(),Y=d(y);q(()=>L(Y,`✓ ${s(o)??""}`)),S(g,y)};F(se,g=>{s(o)>0&&g(b)})}var M=h(se,2);{var w=g=>{var y=Su(),Y=d(y);q(()=>L(Y,`✕ ${s(l)??""}`)),S(g,y)};F(M,g=>{s(l)>0&&g(w)})}var O=h(M,2);{var E=g=>{var y=ku(),Y=d(y);q(X=>L(Y,X),[()=>es(s(u))]),S(g,y)};F(O,g=>{s(u)>0&&g(E)})}var D=h(O,4),H=h(D,2),Q=h(J,2);st(Q,23,()=>t.tools,g=>g.id,(g,y,Y)=>{var X=Ru();let he;var be=d(X),ye=d(be),it=d(ye),Ke=h(ye,2);let ie;var U=d(Ke);{var $=ee=>{hn(ee,{size:11})},ce=ee=>{var _e=ta();q(xe=>L(_e,xe),[()=>_(s(y).status)]),S(ee,_e)};F(U,ee=>{s(y).status==="running"?ee($):ee(ce,!1)})}var ve=h(Ke,2),ge=d(ve),Ee=d(ge),Oe=h(ge,2);{var He=ee=>{var _e=xu(),xe=d(_e);q(()=>L(xe,s(y).name)),S(ee,_e)},De=K(()=>s(y).name!==f(s(y).name));F(Oe,ee=>{s(De)&&ee(He)})}var Re=h(ve,2);{var $e=ee=>{var _e=Tu(),xe=d(_e);q(Pe=>L(xe,Pe),[()=>es(s(y).durationMs)]),S(ee,_e)};F(Re,ee=>{s(y).durationMs!=null&&ee($e)})}var A=h(Re,2),W=d(A),ae=h(be,2);{var re=ee=>{var _e=Nu(),xe=d(_e);let Pe;var wn=d(xe);Nr(wn,()=>B(s(y)));var En=h(xe,2);{var Ve=ot=>{var en=Au(),Fa=d(en);q(qa=>L(Fa,qa),[()=>z(s(y))?`Show all ${m(s(y).result)} lines`:"Show less"]),te("click",en,()=>T(s(y).id)),S(ot,en)},Ze=K(()=>C(s(y)));F(En,ot=>{s(Ze)&&ot(Ve)})}q(ot=>Pe=Se(xe,1,"tool-result svelte-8tq4pr",null,Pe,ot),[()=>({collapsed:z(s(y))})]),S(ee,_e)},Te=K(()=>s(n).has(s(y).id)&&s(y).result),ke=ee=>{var _e=Cu(),xe=d(_e);q(Pe=>L(xe,Pe),[()=>v(s(y).result)]),S(ee,_e)},we=K(()=>!s(n).has(s(y).id)&&s(y).result);F(ae,ee=>{s(Te)?ee(re):s(we)&&ee(ke,1)})}q((ee,_e,xe)=>{he=Se(X,1,"tool-item svelte-8tq4pr",null,he,ee),L(it,s(Y)+1),ie=Se(Ke,1,"tool-status-icon svelte-8tq4pr",null,ie,{running:s(y).status==="running",complete:s(y).status==="complete",error:s(y).status==="error"}),L(Ee,_e),L(W,xe)},[()=>({running:s(y).status==="running",error:s(y).status==="error",expanded:s(n).has(s(y).id)}),()=>f(s(y).name),()=>s(n).has(s(y).id)?"−":"+"]),te("click",be,()=>a(s(y).id)),S(g,X)}),te("click",ne,function(...g){var y;(y=t.onClose)==null||y.apply(this,g)}),te("click",D,r),te("click",H,i),S(e,j),je()}ft(["click"]);var Mu=N('<span class="risk-badge destructive svelte-1wb4jwe"> </span>'),Lu=N('<span class="risk-badge irreversible svelte-1wb4jwe"> </span>'),Du=N('<div class="approval-error svelte-1wb4jwe"> </div>'),Pu=N('<div class="approval-card svelte-1wb4jwe"><div class="approval-header svelte-1wb4jwe"><span class="approval-icon"><!></span> <span class="approval-title svelte-1wb4jwe"> </span></div> <div class="approval-reason svelte-1wb4jwe"> </div> <pre class="approval-input svelte-1wb4jwe"> </pre> <!> <div class="approval-actions svelte-1wb4jwe"><label class="always-allow svelte-1wb4jwe"><input type="checkbox" class="svelte-1wb4jwe"/> Always allow <code class="svelte-1wb4jwe"> </code></label> <div class="approval-buttons svelte-1wb4jwe"><button class="btn-deny svelte-1wb4jwe"><!></button> <button class="btn-approve svelte-1wb4jwe"><!></button></div></div></div>');function Bu(e,t){qe(t,!0);let n=G(!1),a=G(!1),r=G(null);function i(g){switch(g){case"exec":return"Run command";case"file_write":return"Write file";case"file_edit":return"Edit file";case"message":return"Send message";case"voice_reply":return"Voice reply";case"fact_retract":return"Delete memory";case"sessions_send":return"Message agent";default:return g}}function o(g){switch(g){case"destructive":return"Destructive";case"irreversible":return"Irreversible";default:return"Risky"}}function l(g){if(!g||typeof g!="object")return String(g??"");const y=g;if("command"in y)return String(y.command);if("path"in y){const Y=String(y.path);if("content"in y){const X=String(y.content);return`${Y}
${X.length>500?X.slice(0,500)+"...":X}`}return Y}try{return JSON.stringify(g,null,2).slice(0,1e3)}catch{return String(g)}}async function c(){I(n,!0),I(r,null);try{await Ol(t.approval.turnId,t.approval.toolId,s(a)),t.onResolved()}catch(g){I(r,g instanceof Error?g.message:String(g),!0),I(n,!1)}}async function u(){I(n,!0),I(r,null);try{await Ml(t.approval.turnId,t.approval.toolId),t.onResolved()}catch(g){I(r,g instanceof Error?g.message:String(g),!0),I(n,!1)}}var f=Pu(),_=d(f),v=d(_),k=d(v);{var p=g=>{var y=Mu(),Y=d(y);q(X=>L(Y,X),[()=>o(t.approval.risk)]),S(g,y)},T=g=>{var y=Lu(),Y=d(y);q(X=>L(Y,X),[()=>o(t.approval.risk)]),S(g,y)};F(k,g=>{t.approval.risk==="destructive"?g(p):g(T,!1)})}var m=h(v,2),C=d(m),z=h(_,2),P=d(z),R=h(z,2),B=d(R),j=h(R,2);{var J=g=>{var y=Du(),Y=d(y);q(()=>L(Y,s(r))),S(g,y)};F(j,g=>{s(r)&&g(J)})}var V=h(j,2),ne=d(V),de=d(ne),pe=h(de,2),Z=d(pe),se=h(ne,2),b=d(se),M=d(b);{var w=g=>{hn(g,{size:12})},O=g=>{var y=ta("Deny");S(g,y)};F(M,g=>{s(n)?g(w):g(O,!1)})}var E=h(b,2),D=d(E);{var H=g=>{hn(g,{size:12})},Q=g=>{var y=ta("Approve");S(g,y)};F(D,g=>{s(n)?g(H):g(Q,!1)})}q((g,y)=>{L(C,`Approve ${g??""}?`),L(P,t.approval.reason),L(B,y),de.disabled=s(n),L(Z,t.approval.toolName),b.disabled=s(n),E.disabled=s(n)},[()=>i(t.approval.toolName),()=>l(t.approval.input)]),vl(de,()=>s(a),g=>I(a,g)),te("click",b,u),te("click",E,c),S(e,f),je()}ft(["click"]);var zu=N('<button class="dismiss svelte-1mejfyq" aria-label="Dismiss error">×</button>'),Uu=N('<div class="error-banner svelte-1mejfyq" role="alert"><span class="error-text svelte-1mejfyq"> </span> <!></div>');function Fu(e,t){var n=Uu(),a=d(n),r=d(a),i=h(a,2);{var o=l=>{var c=zu();te("click",c,function(...u){var f;(f=t.onDismiss)==null||f.apply(this,u)}),S(l,c)};F(i,l=>{t.onDismiss&&l(o)})}q(()=>L(r,t.message)),S(e,n)}ft(["click"]);async function*qu(e,t,n,a,r){const i=window.location.origin,o=jn(),l=await fetch(`${i}/api/sessions/stream`,{method:"POST",headers:{"Content-Type":"application/json",...o?{Authorization:`Bearer ${o}`}:{}},body:JSON.stringify({agentId:e,message:t,sessionKey:n,...r!=null&&r.length?{media:r}:{}}),signal:a});if(!l.ok){const _=await l.text();yield{type:"error",message:`HTTP ${l.status}: ${_}`};return}if(!l.body){yield{type:"error",message:"No response body"};return}const c=l.body.getReader(),u=new TextDecoder;let f="";try{for(;;){const{done:_,value:v}=await c.read();if(_)break;f+=u.decode(v,{stream:!0});const k=f.split(`
`);f=k.pop()??"";let p=null,T=null;for(const m of k)if(m.startsWith("event: "))p=m.slice(7).trim();else if(m.startsWith("data: "))T=m.slice(6);else if(m===""&&p&&T){try{yield JSON.parse(T)}catch{}p=null,T=null}else m.startsWith(":")}}finally{c.releaseLock()}}let Jn=Ne({});const ju={messages:[],isStreaming:!1,remoteStreaming:!1,streamingText:"",thinkingText:"",activeToolCalls:[],error:null,abortController:null,pendingApproval:null};function $t(e){return Jn[e]??ju}function yn(e){return Jn[e]||(Jn[e]={messages:[],isStreaming:!1,remoteStreaming:!1,streamingText:"",thinkingText:"",activeToolCalls:[],error:null,abortController:null,pendingApproval:null}),Jn[e]}function Hu(e){return $t(e).messages}function as(e){const t=$t(e);return t.isStreaming||t.remoteStreaming}function Ya(e,t){yn(e).remoteStreaming=t}function Gu(e){return $t(e).streamingText}function Wu(e){return $t(e).thinkingText}function Ku(e){return $t(e).activeToolCalls}function rs(e){return $t(e).error}function Vu(e){return $t(e).pendingApproval}function Zu(e){yn(e).pendingApproval=null}function Yu(e){yn(e).error=null}async function Ja(e,t){const n=yn(e);try{const a=await Al(t);n.messages=$u(a)}catch(a){n.error=a instanceof Error?a.message:String(a)}}function Xa(e){const t=yn(e);t.messages=[],t.streamingText="",t.activeToolCalls=[],t.error=null,t.pendingApproval=null}function Sn(e,t){const n=yn(e),a={id:`system-${Date.now()}`,role:"assistant",content:t,timestamp:new Date().toISOString()};n.messages=[...n.messages,a]}async function Ju(e,t,n,a){const r=yn(e);if(r.isStreaming)return;r.error=null;const i={id:`user-${Date.now()}`,role:"user",content:t,timestamp:new Date().toISOString(),...a!=null&&a.length?{media:a}:{}};r.messages=[...r.messages,i],r.isStreaming=!0,r.streamingText="",r.thinkingText="",r.activeToolCalls=[],r.abortController=new AbortController;let o=!1;try{for await(const l of qu(e,t,n,r.abortController.signal,a))switch(l.type){case"thinking_delta":r.thinkingText+=l.text;break;case"text_delta":o&&r.streamingText&&(r.streamingText+=`

`,o=!1),r.streamingText+=l.text;break;case"tool_start":r.activeToolCalls=[...r.activeToolCalls,{id:l.toolId,name:l.toolName,status:"running"}];break;case"tool_result":r.activeToolCalls=r.activeToolCalls.map(c=>c.id===l.toolId?{...c,status:l.isError?"error":"complete",result:l.result,durationMs:l.durationMs}:c),o=!0;break;case"tool_approval_required":r.pendingApproval={turnId:l.turnId,toolName:l.toolName,toolId:l.toolId,input:l.input,risk:l.risk,reason:l.reason};break;case"tool_approval_resolved":r.pendingApproval=null;break;case"turn_complete":{const c={id:`assistant-${Date.now()}`,role:"assistant",content:r.streamingText||l.outcome.text,timestamp:new Date().toISOString(),toolCalls:r.activeToolCalls.length>0?[...r.activeToolCalls]:void 0,...r.thinkingText?{thinking:r.thinkingText}:{}};r.messages=[...r.messages,c],r.streamingText="",r.thinkingText="",r.activeToolCalls=[],r.isStreaming=!1,o=!1;break}case"turn_abort":{if(r.remoteStreaming=!1,r.streamingText){const c={id:`assistant-${Date.now()}`,role:"assistant",content:r.streamingText,timestamp:new Date().toISOString(),toolCalls:r.activeToolCalls.length>0?[...r.activeToolCalls]:void 0};r.messages=[...r.messages,c],r.streamingText="",r.activeToolCalls=[]}break}case"error":r.error=l.message;break}}catch(l){l.name!=="AbortError"&&(r.error=l instanceof Error?l.message:String(l))}finally{if(r.streamingText){const l={id:`assistant-${Date.now()}`,role:"assistant",content:r.streamingText,timestamp:new Date().toISOString(),toolCalls:r.activeToolCalls.length>0?[...r.activeToolCalls]:void 0,...r.thinkingText?{thinking:r.thinkingText}:{}};r.messages=[...r.messages,l]}r.isStreaming=!1,r.remoteStreaming=!1,r.streamingText="",r.thinkingText="",r.activeToolCalls=[],r.abortController=null,r.pendingApproval=null}}function Xu(e){return $t(e).abortController!==null}function Qu(e){var n;const t=Jn[e];t&&((n=t.abortController)==null||n.abort(),t.remoteStreaming=!1)}function $u(e){var a;const t=[];let n=[];for(const r of e)if(r.role==="user")t.push({id:r.id,role:"user",content:r.content,timestamp:r.createdAt});else if(r.role==="assistant"){try{const i=JSON.parse(r.content);if(Array.isArray(i)&&i.length>0&&((a=i[0])!=null&&a.type)){const o=i.filter(c=>c.type==="text"),l=i.filter(c=>c.type==="tool_use");if(l.length>0&&(n=l.map(c=>({id:c.id,name:c.name,status:"complete"}))),o.length>0&&l.length>0){const c=o.map(u=>u.text).join(`
`).trim();c&&t.push({id:r.id,role:"assistant",content:c,timestamp:r.createdAt})}if(l.length>0)continue;if(o.length>0){const c=o.map(u=>u.text).join(`
`).trim();t.push({id:r.id,role:"assistant",content:c,timestamp:r.createdAt,toolCalls:n.length>0?[...n]:void 0}),n=[];continue}}}catch{}t.push({id:r.id,role:"assistant",content:r.content,timestamp:r.createdAt,toolCalls:n.length>0?[...n]:void 0}),n=[]}else if(r.role==="tool_result"){const i=n.find(o=>o.id===r.toolCallId);i&&(i.result=r.content.slice(0,2e3))}return t}var ed=N('<div class="chat-view svelte-1ktw27c"><!> <div class="chat-area svelte-1ktw27c"><!> <!></div> <!> <!></div>');function td(e,t){qe(t,!0);let n=G(!1),a=G(Ne([])),r=null;Ua(()=>{Rl().then(w=>{I(a,w,!0)}).catch(()=>{}),r=li((w,O)=>{const E=We();if(E){if(w==="init"){const H=O.activeTurns??{};H[E]&&H[E]>0&&Ya(E,!0)}if(w==="turn:after"&&O.nousId===E){if(Ya(E,!1),!Xu(E)){const H=ma();H&&Ja(E,H)}Za(E)}w==="turn:before"&&O.nousId===E&&Ya(E,!0)}})}),ml(()=>{r==null||r()});let i=null,o=!1;bt(()=>{const w=ma(),O=We();w&&O&&w!==i?(i=w,o?o=!1:Ja(O,w)):!w&&i&&(i=null,O&&Xa(O))});const l={"/new":{description:"Start a fresh conversation",handler:()=>{const w=We();w&&(nc(),Xa(w))}},"/clear":{description:"Clear message display (keeps server history)",handler:()=>{const w=We();w&&Xa(w)}},"/switch":{description:"Switch agent — /switch <name>",handler:w=>{if(!w)return;const O=w.toLowerCase().trim(),E=Ir().find(D=>D.name.toLowerCase()===O||D.id.toLowerCase()===O);E&&(fi(E.id),Aa(E.id))}},"/compact":{description:"Compress context — distill older messages into memory",handler:async()=>{const w=We(),O=ma();if(!(!w||!O)&&!s(n)){I(n,!0),Sn(w,"*Compacting context...*");try{await Nl(O),Sn(w,"*Context compacted. Older messages distilled into long-term memory.*"),Ja(w,O),Za(w)}catch(E){Sn(w,`*Compaction failed: ${E instanceof Error?E.message:String(E)}*`)}finally{I(n,!1)}}}},"/help":{description:"Show available commands",handler:()=>{const w=We();if(!w)return;const O=R().map(({command:E,description:D})=>`\`${E}\` — ${D}`).join(`
`);Sn(w,`**Available commands:**
${O}`)}}};function c(w,O){const E=w.trim();if(E.startsWith("/")){const Q=E.indexOf(" "),g=Q>0?E.slice(0,Q):E,y=Q>0?E.slice(Q+1):void 0,Y=l[g];if(Y){Y.handler(y);return}if(s(a).find(he=>{var be;return`/${he.name}`===g||((be=he.aliases)==null?void 0:be.some(ye=>`/${ye}`===g))})){const he=We();if(!he)return;const be=ma();Il(E,be??void 0).then(ye=>{Sn(he,ye)}).catch(ye=>{Sn(he,`*Command failed: ${ye instanceof Error?ye.message:String(ye)}*`)});return}return}const D=We();if(!D)return;const H=tc();Ju(D,w,H,O).then(()=>{o=!0,Za(D)})}let u=K(di),f=K(We),_=K(()=>s(f)?jl(s(f)):null),v=K(gi),k=K(()=>()=>{var E;const w=((E=s(v))==null?void 0:E.tokenCountEstimate)??0;return Math.min(100,Math.round(w/2e5*100))}),p=K(()=>s(f)?Vu(s(f)):null);function T(){s(f)&&Zu(s(f))}let m=G(null);function C(w){I(m,w,!0)}function z(){I(m,null)}function P(){const w=We();w&&Qu(w)}function R(){const w=Object.entries(l).map(([D,{description:H}])=>({command:D,description:H})),O=new Set(w.map(D=>D.command.slice(1))),E=s(a).filter(D=>!O.has(D.name)).map(D=>({command:`/${D.name}`,description:D.description}));return[...w,...E]}var B=ed(),j=d(B);{var J=w=>{{let O=K(()=>rs(s(f)));Fu(w,{get message(){return s(O)},onDismiss:()=>{s(f)&&Yu(s(f))}})}},V=K(()=>s(f)&&rs(s(f)));F(j,w=>{s(V)&&w(J)})}var ne=h(j,2),de=d(ne);{let w=K(()=>s(f)?Hu(s(f)):[]),O=K(()=>s(f)?Gu(s(f)):""),E=K(()=>s(f)?Wu(s(f)):""),D=K(()=>s(f)?Ku(s(f)):[]),H=K(()=>s(f)?as(s(f)):!1),Q=K(()=>{var g;return(g=s(u))==null?void 0:g.name});ru(de,{get messages(){return s(w)},get streamingText(){return s(O)},get thinkingText(){return s(E)},get activeToolCalls(){return s(D)},get isStreaming(){return s(H)},get agentName(){return s(Q)},get agentEmoji(){return s(_)},onToolClick:C})}var pe=h(de,2);{var Z=w=>{Ou(w,{get tools(){return s(m)},onClose:z})};F(pe,w=>{s(m)&&w(Z)})}var se=h(ne,2);{var b=w=>{Bu(w,{get approval(){return s(p)},onResolved:T})};F(se,w=>{s(p)&&w(b)})}var M=h(se,2);{let w=K(()=>s(f)?as(s(f)):!1),O=K(()=>s(k)()),E=K(R);yu(M,{get isStreaming(){return s(w)},onSend:c,onAbort:P,get contextPercent(){return s(O)},get slashCommands(){return s(E)}})}S(e,B),je()}var nd=N("<span> </span>");function ad(e,t){let n=Qt(t,"variant",3,"default");var a=nd(),r=d(a);q(()=>{Se(a,1,`badge ${n()??""}`,"svelte-mhmmzz"),L(r,t.text)}),S(e,a)}var rd=N('<div class="error svelte-y174pi"> </div>'),sd=N('<div class="loading svelte-y174pi">Loading metrics...</div>'),id=N('<div class="card svelte-y174pi"><div class="card-label svelte-y174pi">Total Cost</div> <div class="card-value svelte-y174pi"> </div></div>'),od=N('<th class="svelte-y174pi">Cost</th>'),ld=N('<td class="svelte-y174pi"> </td>'),cd=N('<tr><td class="agent-name svelte-y174pi"> </td><td class="svelte-y174pi"> </td><td class="svelte-y174pi"> </td><td class="muted svelte-y174pi"> </td><td class="svelte-y174pi"> </td><td class="svelte-y174pi"> </td><!></tr>'),ud=N('<tr><td class="mono svelte-y174pi"> </td><td class="mono svelte-y174pi"> </td><td class="muted svelte-y174pi"> </td><td class="muted svelte-y174pi"> </td></tr>'),dd=N('<div class="section svelte-y174pi"><h3 class="svelte-y174pi">Cron Jobs</h3> <table class="svelte-y174pi"><thead><tr><th class="svelte-y174pi">Job</th><th class="svelte-y174pi">Schedule</th><th class="svelte-y174pi">Next Run</th><th class="svelte-y174pi">Last Run</th></tr></thead><tbody></tbody></table></div>'),fd=N('<div class="grid svelte-y174pi"><div class="card svelte-y174pi"><div class="card-label svelte-y174pi">Uptime</div> <div class="card-value svelte-y174pi"> </div></div> <div class="card svelte-y174pi"><div class="card-label svelte-y174pi">Tokens</div> <div class="card-value svelte-y174pi"> </div> <div class="card-sub svelte-y174pi"> </div></div> <div class="card svelte-y174pi"><div class="card-label svelte-y174pi">Cache Hit Rate</div> <div class="card-value svelte-y174pi"> </div> <div class="card-sub svelte-y174pi"> </div></div> <div class="card svelte-y174pi"><div class="card-label svelte-y174pi">Turns</div> <div class="card-value svelte-y174pi"> </div></div> <!> <div class="card svelte-y174pi"><div class="card-label svelte-y174pi">Services</div> <div class="card-value svelte-y174pi"><!></div> <div class="card-sub badges svelte-y174pi"></div></div></div> <div class="section svelte-y174pi"><h3 class="svelte-y174pi">Agents</h3> <table class="svelte-y174pi"><thead><tr><th class="svelte-y174pi">Agent</th><th class="svelte-y174pi">Sessions</th><th class="svelte-y174pi">Messages</th><th class="svelte-y174pi">Last Activity</th><th class="svelte-y174pi">Tokens In</th><th class="svelte-y174pi">Turns</th><!></tr></thead><tbody></tbody></table></div> <!>',1),vd=N('<div class="metrics-view svelte-y174pi"><!></div>');function gd(e,t){qe(t,!0);let n=G(null),a=G(null),r=G(null);async function i(){try{const[_,v]=await Promise.all([oi(),Cl()]);I(n,_,!0),I(a,v,!0)}catch(_){I(r,_ instanceof Error?_.message:String(_),!0)}}bt(()=>{i();const _=setInterval(i,15e3);return()=>clearInterval(_)});var o=vd(),l=d(o);{var c=_=>{var v=rd(),k=d(v);q(()=>L(k,s(r))),S(_,v)},u=_=>{var v=sd();S(_,v)},f=_=>{var v=fd(),k=ze(v),p=d(k),T=h(d(p),2),m=d(T),C=h(p,2),z=h(d(C),2),P=d(z),R=h(z,2),B=d(R),j=h(C,2),J=h(d(j),2),V=d(J),ne=h(J,2),de=d(ne),pe=h(j,2),Z=h(d(pe),2),se=d(Z),b=h(pe,2);{var M=ie=>{var U=id(),$=h(d(U),2),ce=d($);q(ve=>L(ce,ve),[()=>$r(s(a).totalCost)]),S(ie,U)};F(b,ie=>{s(a)&&ie(M)})}var w=h(b,2),O=h(d(w),2),E=d(O);{var D=ie=>{var U=ta();q($=>L(U,`${$??""}/${s(n).services.length??""}`),[()=>s(n).services.filter($=>$.healthy).length]),S(ie,U)},H=ie=>{var U=ta("-");S(ie,U)};F(E,ie=>{s(n).services.length>0?ie(D):ie(H,!1)})}var Q=h(O,2);st(Q,21,()=>s(n).services,gn,(ie,U)=>{{let $=K(()=>s(U).healthy?"success":"error");ad(ie,{get text(){return s(U).name},get variant(){return s($)}})}});var g=h(k,2),y=h(d(g),2),Y=d(y),X=d(Y),he=h(d(X),6);{var be=ie=>{var U=od();S(ie,U)};F(he,ie=>{s(a)&&ie(be)})}var ye=h(Y);st(ye,21,()=>s(n).nous,gn,(ie,U)=>{const $=K(()=>{var we;return(we=s(a))==null?void 0:we.agents.find(ee=>ee.agentId===s(U).id)});var ce=cd(),ve=d(ce),ge=d(ve),Ee=h(ve),Oe=d(Ee),He=h(Ee),De=d(He),Re=h(He),$e=d(Re),A=h(Re),W=d(A),ae=h(A),re=d(ae),Te=h(ae);{var ke=we=>{var ee=ld(),_e=d(ee);q(xe=>L(_e,xe),[()=>s($)?$r(s($).totalCost||s($).cost):"-"]),S(we,ee)};F(Te,we=>{s(a)&&we(ke)})}q((we,ee)=>{var _e;L(ge,s(U).name),L(Oe,s(U).activeSessions),L(De,s(U).totalMessages),L($e,we),L(W,ee),L(re,((_e=s(U).tokens)==null?void 0:_e.turns)??"-")},[()=>Ea(s(U).lastActivity),()=>s(U).tokens?Wn(s(U).tokens.input):"-"]),S(ie,ce)});var it=h(g,2);{var Ke=ie=>{var U=dd(),$=h(d(U),2),ce=h(d($));st(ce,21,()=>s(n).cron,gn,(ve,ge)=>{var Ee=ud(),Oe=d(Ee),He=d(Oe),De=h(Oe),Re=d(De),$e=h(De),A=d($e),W=h($e),ae=d(W);q((re,Te)=>{L(He,s(ge).id),L(Re,s(ge).cron),L(A,re),L(ae,Te)},[()=>Ea(s(ge).nextRun),()=>Ea(s(ge).lastRun)]),S(ve,Ee)}),S(ie,U)};F(it,ie=>{s(n).cron.length>0&&ie(Ke)})}q((ie,U,$,ce,ve)=>{L(m,ie),L(P,U),L(B,`${$??""} in / ${ce??""} out`),L(V,`${s(n).usage.cacheHitRate??""}%`),L(de,`${ve??""} cached`),L(se,s(n).usage.turnCount)},[()=>Zl(s(n).uptime),()=>Wn(s(n).usage.totalInputTokens+s(n).usage.totalOutputTokens),()=>Wn(s(n).usage.totalInputTokens),()=>Wn(s(n).usage.totalOutputTokens),()=>Wn(s(n).usage.totalCacheReadTokens)]),S(_,v)};F(l,_=>{s(r)?_(c):s(n)?_(f,!1):_(u,1)})}S(e,o),je()}var md=N('<div class="setting-row svelte-1e0kh9i"><span class="setting-label svelte-1e0kh9i">Uptime</span> <span class="setting-value svelte-1e0kh9i"> </span></div> <div class="setting-row svelte-1e0kh9i"><span class="setting-label svelte-1e0kh9i">Status</span> <span class="setting-value status-ok svelte-1e0kh9i"> </span></div>',1),pd=N('<span class="agent-emoji svelte-1e0kh9i"> </span>'),hd=N('<div class="setting-row svelte-1e0kh9i"><span class="setting-label svelte-1e0kh9i"><!> </span> <span class="setting-value mono svelte-1e0kh9i"> </span></div>'),_d=N('<div class="setting-row svelte-1e0kh9i"><span class="setting-label muted svelte-1e0kh9i">No agents configured</span></div>'),bd=N('<div class="setting-row svelte-1e0kh9i"><span class="setting-label svelte-1e0kh9i"> </span> <span> </span></div>'),yd=N('<section class="settings-section svelte-1e0kh9i"><h3 class="section-title svelte-1e0kh9i">Services</h3> <!></section>'),wd=N('<section class="settings-section svelte-1e0kh9i"><h3 class="section-title svelte-1e0kh9i">Usage</h3> <div class="setting-row svelte-1e0kh9i"><span class="setting-label svelte-1e0kh9i">Total turns</span> <span class="setting-value mono svelte-1e0kh9i"> </span></div> <div class="setting-row svelte-1e0kh9i"><span class="setting-label svelte-1e0kh9i">Input tokens</span> <span class="setting-value mono svelte-1e0kh9i"> </span></div> <div class="setting-row svelte-1e0kh9i"><span class="setting-label svelte-1e0kh9i">Output tokens</span> <span class="setting-value mono svelte-1e0kh9i"> </span></div> <div class="setting-row svelte-1e0kh9i"><span class="setting-label svelte-1e0kh9i">Cache hit rate</span> <span class="setting-value mono svelte-1e0kh9i"> </span></div></section> <!>',1),Ed=N('<div class="settings-view svelte-1e0kh9i"><div class="settings-container svelte-1e0kh9i"><h2 class="settings-heading svelte-1e0kh9i">Settings</h2> <section class="settings-section svelte-1e0kh9i"><h3 class="section-title svelte-1e0kh9i">General</h3> <div class="setting-row svelte-1e0kh9i"><span class="setting-label svelte-1e0kh9i">Instance</span> <span class="setting-value svelte-1e0kh9i"> </span></div> <!></section> <section class="settings-section svelte-1e0kh9i"><h3 class="section-title svelte-1e0kh9i">Agents</h3> <!> <!></section> <section class="settings-section svelte-1e0kh9i"><h3 class="section-title svelte-1e0kh9i">Appearance</h3> <div class="setting-row svelte-1e0kh9i"><span class="setting-label svelte-1e0kh9i">Theme</span> <div class="toggle-group svelte-1e0kh9i"><button>Dark</button> <button>Light</button></div></div> <div class="setting-row svelte-1e0kh9i"><span class="setting-label svelte-1e0kh9i">Font size</span> <div class="font-size-control svelte-1e0kh9i"><button class="size-btn svelte-1e0kh9i">−</button> <span class="size-value svelte-1e0kh9i"> </span> <button class="size-btn svelte-1e0kh9i">+</button></div></div></section> <section class="settings-section svelte-1e0kh9i"><h3 class="section-title svelte-1e0kh9i">Authentication</h3> <div class="auth-form svelte-1e0kh9i"><label class="settings-label svelte-1e0kh9i">Gateway Token <input type="password" class="settings-input svelte-1e0kh9i" placeholder="Enter gateway auth token"/></label> <div class="auth-actions svelte-1e0kh9i"><button class="btn-primary svelte-1e0kh9i">Save Token</button> <button class="btn-danger svelte-1e0kh9i">Logout</button></div></div></section> <!></div></div>');function Sd(e,t){qe(t,!0);const n="aletheia_theme",a="aletheia_font_size";let r=G(Ne(jn()??"")),i=G(Ne([])),o=G(null),l=G(Ne(localStorage.getItem(n)??"dark")),c=G(Ne(parseInt(localStorage.getItem(a)??"14",10)));Ua(async()=>{I(i,Ir(),!0);try{I(o,await oi(),!0)}catch{}});function u(){s(r).trim()&&(ii(s(r).trim()),location.reload())}function f(){wl(),location.reload()}function _(U){I(l,U,!0),localStorage.setItem(n,U),document.documentElement.setAttribute("data-theme",U)}function v(U){I(c,U,!0),localStorage.setItem(a,String(U)),document.documentElement.style.fontSize=`${U}px`}function k(U){const $=Math.floor(U/3600),ce=Math.floor(U%3600/60);return $>0?`${$}h ${ce}m`:`${ce}m`}var p=Ed(),T=d(p),m=h(d(T),2),C=h(d(m),2),z=h(d(C),2),P=d(z),R=h(C,2);{var B=U=>{var $=md(),ce=ze($),ve=h(d(ce),2),ge=d(ve),Ee=h(ce,2),Oe=h(d(Ee),2),He=d(Oe);q(De=>{L(ge,De),L(He,s(o).status)},[()=>k(s(o).uptime)]),S(U,$)};F(R,U=>{s(o)&&U(B)})}var j=h(m,2),J=h(d(j),2);st(J,17,()=>s(i),U=>U.id,(U,$)=>{var ce=hd(),ve=d(ce),ge=d(ve);{var Ee=Re=>{var $e=pd(),A=d($e);q(()=>L(A,s($).emoji)),S(Re,$e)};F(ge,Re=>{s($).emoji&&Re(Ee)})}var Oe=h(ge),He=h(ve,2),De=d(He);q(()=>{L(Oe,` ${s($).name??""}`),L(De,s($).model??"default")}),S(U,ce)});var V=h(J,2);{var ne=U=>{var $=_d();S(U,$)};F(V,U=>{s(i).length===0&&U(ne)})}var de=h(j,2),pe=h(d(de),2),Z=h(d(pe),2),se=d(Z);let b;var M=h(se,2);let w;var O=h(pe,2),E=h(d(O),2),D=d(E),H=h(D,2),Q=d(H),g=h(H,2),y=h(de,2),Y=h(d(y),2),X=d(Y),he=h(d(X)),be=h(X,2),ye=d(be),it=h(ye,2),Ke=h(y,2);{var ie=U=>{var $=wd(),ce=ze($),ve=h(d(ce),2),ge=h(d(ve),2),Ee=d(ge),Oe=h(ve,2),He=h(d(Oe),2),De=d(He),Re=h(Oe,2),$e=h(d(Re),2),A=d($e),W=h(Re,2),ae=h(d(W),2),re=d(ae),Te=h(ce,2);{var ke=we=>{var ee=yd(),_e=h(d(ee),2);st(_e,17,()=>s(o).services,xe=>xe.name,(xe,Pe)=>{var wn=bd(),En=d(wn),Ve=d(En),Ze=h(En,2);let ot;var en=d(Ze);q(()=>{L(Ve,s(Pe).name),ot=Se(Ze,1,"setting-value svelte-1e0kh9i",null,ot,{"status-ok":s(Pe).healthy,"status-err":!s(Pe).healthy}),L(en,s(Pe).healthy?"healthy":s(Pe).message??"down")}),S(xe,wn)}),S(we,ee)};F(Te,we=>{s(o).services.length>0&&we(ke)})}q((we,ee,_e)=>{L(Ee,we),L(De,ee),L(A,_e),L(re,`${s(o).usage.cacheHitRate??""}%`)},[()=>s(o).usage.turnCount.toLocaleString(),()=>s(o).usage.totalInputTokens.toLocaleString(),()=>s(o).usage.totalOutputTokens.toLocaleString()]),S(U,$)};F(Ke,U=>{s(o)&&U(ie)})}q(U=>{L(P,U),b=Se(se,1,"toggle-btn svelte-1e0kh9i",null,b,{active:s(l)==="dark"}),w=Se(M,1,"toggle-btn svelte-1e0kh9i",null,w,{active:s(l)==="light"}),L(Q,`${s(c)??""}px`)},[Or]),te("click",se,()=>_("dark")),te("click",M,()=>_("light")),te("click",D,()=>v(Math.max(11,s(c)-1))),te("click",g,()=>v(Math.min(20,s(c)+1))),za(he,()=>s(r),U=>I(r,U)),te("click",ye,u),te("click",it,f),S(e,p),je()}ft(["click"]);let mr=G(Ne([])),Dr=G(null),Xn=G(""),pr=G(!1),hr=G(!1),_r=G(Ne(new Map)),Ca=G(Ne(new Set));function ss(){return s(mr)}function pa(){return s(Dr)}function kd(){return s(Xn)}function xd(){return s(pr)}function Td(){return s(hr)}function Ad(e){return s(_r).get(e)}function is(e){return s(Ca).has(e)}function Nd(e){const t=new Set(s(Ca));t.has(e)?t.delete(e):t.add(e),I(Ca,t,!0)}async function os(e){I(pr,!0);try{const t=await Ll(e,void 0,3);I(mr,t.entries,!0),I(Ca,new Set(t.entries.filter(n=>n.type==="directory").map(n=>n.name)),!0)}catch{I(mr,[],!0)}finally{I(pr,!1)}}async function Cd(e,t){I(Dr,e,!0),I(Xn,""),I(hr,!0);try{const n=await Dl(e,t);I(Xn,n.content,!0)}catch(n){I(Xn,`Error: ${n instanceof Error?n.message:String(n)}`)}finally{I(hr,!1)}}async function ls(e){try{const t=await Pl(e),n=new Map;for(const a of t.files)n.set(a.path,a.status);I(_r,n,!0)}catch{I(_r,new Map,!0)}}function Qa(){I(Dr,null),I(Xn,"")}var Rd=N('<button class="tree-item dir svelte-zmikjr"><span class="tree-icon svelte-zmikjr"> </span> <span class="tree-name svelte-zmikjr"> </span></button> <!>',1),Id=N('<span class="tree-size svelte-zmikjr"> </span>'),Od=N("<span></span>"),Md=N('<button><span class="tree-file-icon svelte-zmikjr"> </span> <span class="tree-name svelte-zmikjr"> </span> <!> <!></button>'),Ld=N('<div class="tree-loading svelte-zmikjr"><!> Loading...</div>'),Dd=N('<div class="tree-empty svelte-zmikjr">No files found</div>'),Pd=N('<div class="preview-loading svelte-zmikjr"><!> Loading file...</div>'),Bd=N('<div class="preview-header svelte-zmikjr"><span class="preview-path svelte-zmikjr"> </span> <button class="close-btn svelte-zmikjr">×</button></div> <pre class="preview-content svelte-zmikjr"><!></pre>',1),zd=N('<div class="preview-empty svelte-zmikjr">Select a file to preview</div>'),Ud=N('<div class="file-explorer svelte-zmikjr"><div class="explorer-sidebar svelte-zmikjr"><div class="explorer-header svelte-zmikjr"><span class="explorer-title svelte-zmikjr">Files</span> <button class="refresh-btn svelte-zmikjr" title="Refresh">↻</button></div> <div class="filter-row svelte-zmikjr"><input type="text" class="filter-input svelte-zmikjr" placeholder="Filter files..."/></div> <div class="tree-container svelte-zmikjr"><!></div></div> <div class="file-preview svelte-zmikjr"><!></div></div>');function Fd(e,t){qe(t,!0);const n=(b,M=ha,w=ha,O=ha)=>{var E=Pt(),D=ze(E);{var H=g=>{var y=Rd(),Y=ze(y),X=d(Y),he=d(X),be=h(X,2),ye=d(be),it=h(Y,2);{var Ke=U=>{var $=Pt(),ce=ze($);st(ce,17,()=>M().children,ve=>ve.name,(ve,ge)=>{var Ee=Pt(),Oe=ze(Ee);{var He=Re=>{n(Re,()=>s(ge),()=>`${w()}/${s(ge).name}`,()=>O()+1)},De=K(()=>o(s(ge),`${w()}/${s(ge).name}`));F(Oe,Re=>{s(De)&&Re(He)})}S(ve,Ee)}),S(U,$)},ie=K(()=>is(w())&&M().children);F(it,U=>{s(ie)&&U(Ke)})}q(U=>{xa(Y,`padding-left: ${12+O()*16}px`),L(he,U),L(ye,M().name)},[()=>is(w())?"▾":"▸"]),te("click",Y,()=>Nd(w())),S(g,y)},Q=g=>{const y=K(()=>Ad(w()));var Y=Md();let X;var he=d(Y),be=d(he),ye=h(he,2),it=d(ye),Ke=h(ye,2);{var ie=ce=>{var ve=Id(),ge=d(ve);q(Ee=>L(ge,Ee),[()=>l(M().size)]),S(ce,ve)};F(Ke,ce=>{M().size!=null&&ce(ie)})}var U=h(Ke,2);{var $=ce=>{var ve=Od();let ge;q(Ee=>ge=Se(ve,1,"git-indicator svelte-zmikjr",null,ge,Ee),[()=>({modified:i(s(y))==="modified",added:i(s(y))==="added",deleted:i(s(y))==="deleted"})]),S(ce,ve)};F(U,ce=>{s(y)&&ce($)})}q((ce,ve)=>{X=Se(Y,1,"tree-item file svelte-zmikjr",null,X,ce),xa(Y,`padding-left: ${12+O()*16}px`),L(be,ve),L(it,M().name)},[()=>({selected:pa()===w(),modified:s(y)?i(s(y))==="modified":!1,added:s(y)?i(s(y))==="added":!1,deleted:s(y)?i(s(y))==="deleted":!1}),()=>r(M().name)]),te("click",Y,()=>c(w())),S(g,Y)};F(D,g=>{M().type==="directory"?g(H):g(Q,!1)})}S(b,E)};let a=G("");Ua(()=>{const b=We();os(b??void 0),ls(b??void 0)});function r(b){return b.endsWith(".ts")||b.endsWith(".tsx")?"TS":b.endsWith(".js")||b.endsWith(".jsx")?"JS":b.endsWith(".svelte")?"Sv":b.endsWith(".css")?"Cs":b.endsWith(".json")?"{}":b.endsWith(".md")?"Md":b.endsWith(".sql")?"SQ":b.endsWith(".py")?"Py":b.endsWith(".sh")?"Sh":b.endsWith(".yaml")||b.endsWith(".yml")?"Ym":"··"}function i(b){return b.includes("M")?"modified":b.includes("A")||b==="??"?"added":b.includes("D")?"deleted":""}function o(b,M){if(!s(a))return!0;const w=s(a).toLowerCase();return b.name.toLowerCase().includes(w)||M.toLowerCase().includes(w)?!0:b.type==="directory"&&b.children?b.children.some(O=>o(O,`${M}/${O.name}`)):!1}function l(b){return b<1024?`${b}B`:b<1024*1024?`${(b/1024).toFixed(1)}K`:`${(b/(1024*1024)).toFixed(1)}M`}function c(b){const M=We();Cd(b,M??void 0)}function u(b,M){const w=xc(M);return w?Sa.sanitize(Lr(b,w),{ADD_ATTR:["class"]}):b.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}var f=Ud(),_=d(f),v=d(_),k=h(d(v),2),p=h(v,2),T=d(p),m=h(p,2),C=d(m);{var z=b=>{var M=Ld(),w=d(M);hn(w,{size:16}),S(b,M)},P=K(()=>xd()),R=b=>{var M=Dd();S(b,M)},B=K(()=>ss().length===0),j=b=>{var M=Pt(),w=ze(M);st(w,17,ss,O=>O.name,(O,E)=>{var D=Pt(),H=ze(D);{var Q=y=>{n(y,()=>s(E),()=>s(E).name,()=>0)},g=K(()=>o(s(E),s(E).name));F(H,y=>{s(g)&&y(Q)})}S(O,D)}),S(b,M)};F(C,b=>{s(P)?b(z):s(B)?b(R,1):b(j,!1)})}var J=h(_,2),V=d(J);{var ne=b=>{var M=Pd(),w=d(M);hn(w,{size:16}),S(b,M)},de=K(()=>Td()),pe=b=>{var M=Bd(),w=ze(M),O=d(w),E=d(O),D=h(O,2),H=h(w,2),Q=d(H);Nr(Q,()=>u(kd(),pa())),q(g=>L(E,g),[pa]),te("click",D,function(...g){Qa==null||Qa.apply(this,g)}),S(b,M)},Z=K(()=>pa()),se=b=>{var M=zd();S(b,M)};F(V,b=>{s(de)?b(ne):s(Z)?b(pe,1):b(se,!1)})}te("click",k,()=>{const b=We();os(b??void 0),ls(b??void 0)}),za(T,()=>s(a),b=>I(a,b)),S(e,f),je()}ft(["click"]);var qd=N('<div class="token-setup svelte-12d5wnd"><div class="token-card svelte-12d5wnd"><h1 class="svelte-12d5wnd"> </h1> <p class="svelte-12d5wnd">Enter your gateway authentication token to get started.</p> <form class="svelte-12d5wnd"><input type="password" class="token-input svelte-12d5wnd" placeholder="Gateway token"/> <button type="submit" class="token-submit svelte-12d5wnd">Connect</button></form></div></div>'),jd=N('<button class="sidebar-overlay svelte-12d5wnd" aria-label="Close sidebar"></button>'),Hd=N('<div style="padding:2rem;color:var(--text-secondary)">Failed to load graph view</div>'),Gd=N('<!> <div class="main svelte-12d5wnd"><!> <!> <div class="content svelte-12d5wnd"><!></div></div>',1);function Wd(e,t){qe(t,!0);const n="aletheia_sidebar_collapsed";let a=G("chat");vi();let r=G(!!jn()),i=G(""),o=G(localStorage.getItem(n)==="true");function l(p){p.preventDefault(),s(i).trim()&&(ii(s(i).trim()),I(r,!0),location.reload())}function c(){I(o,!s(o)),localStorage.setItem(n,String(s(o)))}function u(){window.innerWidth<=768&&(I(o,!0),localStorage.setItem(n,String(s(o))))}var f=Pt(),_=ze(f);{var v=p=>{var T=qd(),m=d(T),C=d(m),z=d(C),P=h(C,4),R=d(P);q(B=>L(z,B),[Or]),sn("submit",P,l),za(R,()=>s(i),B=>I(i,B)),S(p,T)},k=p=>{var T=Gd(),m=ze(T);Vl(m,{onSetView:Z=>I(a,Z,!0),onToggleSidebar:c,get activeView(){return s(a)},get sidebarCollapsed(){return s(o)}});var C=h(m,2),z=d(C);rc(z,{get collapsed(){return s(o)},onAgentSelect:u});var P=h(z,2);{var R=Z=>{var se=jd();te("click",se,u),S(Z,se)};F(P,Z=>{s(o)||Z(R)})}var B=h(P,2),j=d(B);{var J=Z=>{gd(Z,{})},V=Z=>{var se=Pt(),b=ze(se);nl(b,()=>yl(()=>import("./GraphView-CGw6DYPc.js"),__vite__mapDeps([0,1,2,3])),null,(M,w)=>{var O=K(()=>{var{default:Q}=s(w);return{GraphView:Q}}),E=K(()=>s(O).GraphView),D=Pt(),H=ze(D);il(H,()=>s(E),(Q,g)=>{g(Q,{})}),S(M,D)},M=>{var w=Hd();S(M,w)}),S(Z,se)},ne=Z=>{Fd(Z,{})},de=Z=>{Sd(Z,{})},pe=Z=>{td(Z,{})};F(j,Z=>{s(a)==="metrics"?Z(J):s(a)==="graph"?Z(V,1):s(a)==="files"?Z(ne,2):s(a)==="settings"?Z(de,3):Z(pe,!1)})}S(p,T)};F(_,p=>{s(r)?p(k,!1):p(v)})}S(e,f),je()}ft(["click"]);function Kd(e,t){qe(t,!0),bt(()=>{jn()&&(vi(),ql(),Fl())});function n(r){var i,o,l;if((r.metaKey||r.ctrlKey)&&r.key==="n"&&(r.preventDefault(),(i=document.querySelector(".new-chat-btn"))==null||i.click()),r.key==="/"&&!a()&&(r.preventDefault(),(o=document.querySelector(".input-wrapper textarea"))==null||o.focus()),r.key==="Escape"){const c=document.querySelector(".abort-btn");c?c.click():(l=document.activeElement)==null||l.blur()}}function a(){const r=document.activeElement;return r instanceof HTMLInputElement||r instanceof HTMLTextAreaElement}sn("keydown",ur,n),Wd(e,{}),je()}Qo(Kd,{target:document.getElementById("app")});export{yl as _,G as a,qe as b,h as c,Se as d,st as e,Qd as f,s as g,xa as h,L as i,te as j,S as k,d as l,gn as m,F as n,Ua as o,Ne as p,Ta as q,Jd as r,I as s,q as t,Xd as u,je as v,K as w,N as x,ft as y};
