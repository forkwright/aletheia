# Changelog

All notable changes to Aletheia are documented here.

---

## [0.10.1](https://github.com/forkwright/aletheia/compare/v0.10.0...v0.10.1) (2026-02-22)


### Features

* adaptive routing, planning tools, and disagreement detection ([7aef0d4](https://github.com/forkwright/aletheia/commit/7aef0d411dcd4d43bb0ab88d2f7602ff378e90c7))
* agent export — portable AgentFile format (Spec 21 Phase 1) ([#100](https://github.com/forkwright/aletheia/issues/100)) ([d630d81](https://github.com/forkwright/aletheia/commit/d630d8180c095f63a234a097dd79c2f47eb81dd2))
* agent intelligence with temperature routing and self-observation ([ae29320](https://github.com/forkwright/aletheia/commit/ae29320362f24b59516509c8fbfd99152b6b9bc1))
* audit-tokens CLI — bootstrap token measurement (Spec 16 Phase 2a) ([a1bdbd6](https://github.com/forkwright/aletheia/commit/a1bdbd68f6f6a9d2b26bfe92320655501a635c56))
* auth and privacy module — JWT, RBAC, sessions, audit, retention, TLS ([5a43dad](https://github.com/forkwright/aletheia/commit/5a43dad97a730f29f2b654db5c3702a29c66afdd))
* backup script + hot-reload routing + Spec 16 close-out ([bc45f4a](https://github.com/forkwright/aletheia/commit/bc45f4a1a8118bd87c446448dff8b133059bff28))
* batch — efficiency, memory intelligence, sub-agent dispatch, UI polish ([f59737f](https://github.com/forkwright/aletheia/commit/f59737f6978d378f2f161190a9bcff2f7a8db221))
* CI/CD pipeline with PR gates and security scanning ([99bbf53](https://github.com/forkwright/aletheia/commit/99bbf53461823dad5b6c8038eb7b6b46f39ce275))
* code patching, evolutionary search, checkpoint fork ([#128](https://github.com/forkwright/aletheia/issues/128)) ([46cc709](https://github.com/forkwright/aletheia/commit/46cc709543b58162be931eec3fba1a279449efe1))
* collapsed reasoning in history ([#63](https://github.com/forkwright/aletheia/issues/63)) ([b7e8ac2](https://github.com/forkwright/aletheia/commit/b7e8ac23b51eb5ac9074b71516dea2837621935d))
* complete remaining quick-win spec phases ([#124](https://github.com/forkwright/aletheia/issues/124)) ([c01cbe6](https://github.com/forkwright/aletheia/commit/c01cbe6923626593746bd14ef4bb5f0cf16c6ca7))
* complete spec 5 (phases 5-6) + TUI spec ([#139](https://github.com/forkwright/aletheia/issues/139)) ([5558396](https://github.com/forkwright/aletheia/commit/55583962609d0b2ad5e0aed9d525bf690320b2c6))
* data privacy — retention, file hardening, encrypted export, sidecar auth ([#33](https://github.com/forkwright/aletheia/issues/33)) ([7237ddb](https://github.com/forkwright/aletheia/commit/7237ddbf6b3b6229c2775cf36b57dad9dc40ecaa))
* declarative hook system (Spec 18 Phase 1) ([#98](https://github.com/forkwright/aletheia/issues/98)) ([8512028](https://github.com/forkwright/aletheia/commit/8512028f1d7456ace7d352aa298172156bdfbce3))
* development workflow — Spec 14 Phases 1-3, 6 ([c6523b8](https://github.com/forkwright/aletheia/commit/c6523b8184b9789f1c3c19c2f9735bc4ca11a38b))
* development workflow — Spec 14 Phases 1-3, 6 ([#71](https://github.com/forkwright/aletheia/issues/71)) ([c6523b8](https://github.com/forkwright/aletheia/commit/c6523b8184b9789f1c3c19c2f9735bc4ca11a38b))
* distillation preservation, export API, and streaming recovery ([5465d15](https://github.com/forkwright/aletheia/commit/5465d15c84b2a4926cfa650235f6f7081850d58a))
* dynamic thinking budget (Spec 16 Phase 2d) ([27a8e24](https://github.com/forkwright/aletheia/commit/27a8e24558bfc440a4a59ce39af2fe2b7b0a3817))
* enforce coding standards via oxlint rules ([d6244de](https://github.com/forkwright/aletheia/commit/d6244de9c08f6a4706e7da5908a55189eff438e3))
* error taxonomy expansion + catch block sweep ([#60](https://github.com/forkwright/aletheia/issues/60)) ([a963116](https://github.com/forkwright/aletheia/commit/a9631167c8177851409c4c9b7ab6cf3c209da5af))
* evaluation framework with objective metrics ([68447ac](https://github.com/forkwright/aletheia/commit/68447ac921eea38d0b5608a31d1816385ada076f))
* event bus, dynamic tool loading, and skill learning ([82392fd](https://github.com/forkwright/aletheia/commit/82392fd1141979034313f5e9811c638eedec8892))
* file uploads and 3D graph visualization ([9a6b541](https://github.com/forkwright/aletheia/commit/9a6b541480032effc24cb20f989ce088daeee8dd))
* fork runtime and strip unused extensions ([4f82651](https://github.com/forkwright/aletheia/commit/4f82651c50a9d2563a8068a115ce4b53f5ae03ee))
* graph intelligence — Spec 09 Phases 8-13 ([8eacdd2](https://github.com/forkwright/aletheia/commit/8eacdd27c7ab41a1e091df3d5a09e028cc84ce3f))
* hot-reload, security hardening, cost UI, graph search (Specs 16, 20, 04, 09) ([7338e93](https://github.com/forkwright/aletheia/commit/7338e93735b4e3aaf9624bdfaa2413fbf4c75efa))
* knowledge graph with ontology and attention integration ([183a73b](https://github.com/forkwright/aletheia/commit/183a73ba40fe1ad304bae5051e0847329c93cf21))
* MCP server, causal tracing, and dual licensing ([2b5baab](https://github.com/forkwright/aletheia/commit/2b5baab9015620eb2c40789e4894156eea3546c6))
* Mem0 memory integration with federated search ([1a72b38](https://github.com/forkwright/aletheia/commit/1a72b38fc153528f36386a2f17467af578cefc74))
* memory evolution, cross-agent deliberation, and discovery engine ([3ddc278](https://github.com/forkwright/aletheia/commit/3ddc278df2694d75ecaca6735f61bd29ecb5ac94))
* **memory:** expand entity stopwords (611) + backfill script for existing corpus ([3072292](https://github.com/forkwright/aletheia/commit/3072292026c6bc4fc66048b8387e2b485fdebc17))
* **memory:** self-configuring LLM backend for memory sidecar ([#42](https://github.com/forkwright/aletheia/issues/42)) ([4e228f2](https://github.com/forkwright/aletheia/commit/4e228f2258606c0e363a6cf26256b805a0a417aa))
* **memory:** Spec 23 — Memory Pipeline — Complete (all 6 phases) ([e071863](https://github.com/forkwright/aletheia/commit/e071863e0852b41caf557f461b7f99f128eafb26))
* **memory:** working state + agent notes + test fix ([#55](https://github.com/forkwright/aletheia/issues/55)) ([5655a4f](https://github.com/forkwright/aletheia/commit/5655a4f5a1a52538299f2a6cf190ef909b49a237))
* migrate graph to Neo4j and modernize health tooling ([a4b12c1](https://github.com/forkwright/aletheia/commit/a4b12c1b46725f5c02803a73a534b5925a7a9bfa))
* narration suppression + neo4j degradation ([#70](https://github.com/forkwright/aletheia/issues/70)) ([3f575f8](https://github.com/forkwright/aletheia/commit/3f575f8e69feeb46d8b1abefdfd198c9d9f0f871))
* narration suppression filter + neo4j graceful degradation ([3f575f8](https://github.com/forkwright/aletheia/commit/3f575f8e69feeb46d8b1abefdfd198c9d9f0f871))
* OAuth authentication, group messaging, and history replay ([c10b7bc](https://github.com/forkwright/aletheia/commit/c10b7bc0b82edb9026d6c01efd582a20aae8620e))
* operational metrics for cache rates, tokens, and distillation ([a9cd8db](https://github.com/forkwright/aletheia/commit/a9cd8dbb9edbcb1e3c97384d2fecc514f2ad7696))
* parallel tools, full narration filter, UI thinking+input ([#72](https://github.com/forkwright/aletheia/issues/72)) ([9f72f81](https://github.com/forkwright/aletheia/commit/9f72f815e0793cb166d70e9452d93d74eb09cc4c))
* PII detection & redaction engine (Spec 20 Phase 1) ([6735165](https://github.com/forkwright/aletheia/commit/67351652a87954939baf7849a37dc72afe5de4c5))
* pipeline decomposition, tool approval, and MCP client support ([6ad64c1](https://github.com/forkwright/aletheia/commit/6ad64c1fff8f793bec53570a4813a3c00c90e8c3))
* pipeline self-config + custom commands (Spec 26 P4, Spec 18 P2) ([#107](https://github.com/forkwright/aletheia/issues/107)) ([2afcbc3](https://github.com/forkwright/aletheia/commit/2afcbc3f004f494acde86946771d9095cdaa915a))
* plan mode — multi-step execution proposals with human approval (Spec 04 Phase 3) ([#89](https://github.com/forkwright/aletheia/issues/89)) ([8fc1422](https://github.com/forkwright/aletheia/commit/8fc1422ea5e788193cd75b984f198084f39a1fa6))
* plan mode fixes + Spec 26 recursive self-improvement ([#106](https://github.com/forkwright/aletheia/issues/106)) ([aa17310](https://github.com/forkwright/aletheia/commit/aa17310e350dbb3f16e4f3c19a0e152649b39941))
* plug-and-play agent onboarding (spec 5, phases 1-4) ([3e4719d](https://github.com/forkwright/aletheia/commit/3e4719daac2800a374a20b8b5f48c4b050e45635))
* post-distillation priming + sufficiency gates + cache audit (Specs 12, 7, 16) ([66386ed](https://github.com/forkwright/aletheia/commit/66386edde491aae1a1346b4fa9d7cd9939c7d682))
* prosoche daemon for adaptive attention ([8e00211](https://github.com/forkwright/aletheia/commit/8e002114a047e862cf8c7ae9c802128cd9a851c3))
* **queue:** mid-turn message queue for course correction ([08d64db](https://github.com/forkwright/aletheia/commit/08d64db04549f0eaa81c3a532f3a452c8cc7c368))
* release workflow + aletheia-update + version tracking ([#50](https://github.com/forkwright/aletheia/issues/50)) ([a3f79d7](https://github.com/forkwright/aletheia/commit/a3f79d7df4ff246535db2f32f5389aeb1b23dfd0))
* research stack with scholar and evidence hierarchy ([4045045](https://github.com/forkwright/aletheia/commit/40450452d9a54b3d69952f52457689a52a262585))
* restore data tool integrations (redshift, hex) ([29abe51](https://github.com/forkwright/aletheia/commit/29abe511549f163dbf7fd767cf27e32cd226a648))
* restore gcal CLI + add sub-agent delegation to agent template ([7b3ddbd](https://github.com/forkwright/aletheia/commit/7b3ddbdf7f882bd28c8c89f7b0f8c9ee272fa2a1))
* runtime v2 clean-room rewrite and cutover ([d07e3e4](https://github.com/forkwright/aletheia/commit/d07e3e4f0558a445084e887c4ed91bc33620b8b8))
* search and embeddings upgrade with cross-agent hardening ([aee355d](https://github.com/forkwright/aletheia/commit/aee355d0f0128e3d58b5259adee345df0316dfad))
* semantic node cards for graph entity detail (Spec 09 Phase 5) ([7d48378](https://github.com/forkwright/aletheia/commit/7d483789337d94ce38794f8702573204c575fe7c))
* service watchdog and workspace cleanup ([2498fac](https://github.com/forkwright/aletheia/commit/2498facd8000c06b4302290cedc8ffb05dc94c9d))
* session continuity + sub-agent infrastructure (Specs 12+13) ([057a235](https://github.com/forkwright/aletheia/commit/057a23568c30924b12ecbaaf76c7a20e70bcf89c))
* session convergence — webchat resolves to canonical DM session ([#74](https://github.com/forkwright/aletheia/issues/74)) ([f1f914e](https://github.com/forkwright/aletheia/commit/f1f914e4ce553856f0076d29aebc8da6a5a1a9f2))
* session lifecycle + post-distillation verification (Spec 12 Phases 4, 7-9 + Spec 14 Phase 4) ([d774622](https://github.com/forkwright/aletheia/commit/d774622e773227efade09fa0aeec81d962f0fca5))
* sessions_dispatch — parallel sub-agent batch tool (Spec 16 Phase 3 + Spec 13 Phase 4) ([04c2053](https://github.com/forkwright/aletheia/commit/04c20537957fbd160ed70d2faced42d386e286aa))
* sleep-time compute — reflective memory (Spec 19, all 3 phases) ([#80](https://github.com/forkwright/aletheia/issues/80)) ([98cea45](https://github.com/forkwright/aletheia/commit/98cea450031ca1712b0233dd3a3eaf68784b9a46))
* **spawn:** model override and token budget for sub-agents ([b08b84f](https://github.com/forkwright/aletheia/commit/b08b84f492f171bf200dacaf6684970442a32e64))
* Spec 20 Phase 2 + Spec 3 + Spec 4 Phase 5 ([#99](https://github.com/forkwright/aletheia/issues/99)) ([18a17c4](https://github.com/forkwright/aletheia/commit/18a17c4844786bb08c050e16e6a54537653de3c8))
* structured logging, loop detection, and memory recall ([72d7ddc](https://github.com/forkwright/aletheia/commit/72d7ddcc2b48a6f8ceafe73ac89071021d73a746))
* sub-agent guards, doctor --fix, graph UI, tool memory, UI polish (Specs 13, 14, 7, 15, 11) ([fa03cb8](https://github.com/forkwright/aletheia/commit/fa03cb8be69d37814af721d52d37c66f03edfa0f))
* sub-agent role definitions — 5 typed specialists with structured result contracts ([195495a](https://github.com/forkwright/aletheia/commit/195495a797cfaf7cef2269b10bad1303415f5ed5))
* Svelte 5 web UI with streaming backend ([97d7e3f](https://github.com/forkwright/aletheia/commit/97d7e3fa6d74ffc0667ff8d68d0b6f2cca6f87ed))
* tool governance, env injection, and instance branding ([14666b7](https://github.com/forkwright/aletheia/commit/14666b7102a4519ea65904371728316cbc885b60))
* tool result truncation for storage (Spec 16 Phase 2c) ([436ab4d](https://github.com/forkwright/aletheia/commit/436ab4df2fa7c49a030f7e39162d0f3fc8edd011))
* TTS pipeline, self-authoring, and circuit breakers ([50e1ce6](https://github.com/forkwright/aletheia/commit/50e1ce62ae95e18623bb0f1f46d4380052afe5ea))
* turn safety — error propagation, distillation guards, orphan diagnostics ([#38](https://github.com/forkwright/aletheia/issues/38)) ([1ec0b83](https://github.com/forkwright/aletheia/commit/1ec0b83ccd1f9411709a22176d833a4965f71cc7))
* **ui:** 2D graph default, lazy 3D, progressive loading ([#56](https://github.com/forkwright/aletheia/issues/56)) ([d047e79](https://github.com/forkwright/aletheia/commit/d047e79d07b8782a891f5e3cb68af43dcd0ccb1f))
* **ui:** accessibility improvements and micro-interaction polish ([c416c5d](https://github.com/forkwright/aletheia/commit/c416c5d7473b9139bfcef7f9a0d91ca7a6735f47))
* **ui:** collapsible sidebar, slash commands, and parallel agents ([30794ca](https://github.com/forkwright/aletheia/commit/30794ca6f9634b76ee0b9d58378a962cfa8f1a41))
* **ui:** file explorer, settings view, diff rendering, and prompt caching ([27570df](https://github.com/forkwright/aletheia/commit/27570df6800c3651ca0db0cc091c8421e978f53b))
* **ui:** graph visualization and syntax highlighting ([2fe57c9](https://github.com/forkwright/aletheia/commit/2fe57c9df20dec42975da256bdc792d5d851ddc0))
* **ui:** syntax highlighting, tool activity feed, and mobile support ([3fbcad6](https://github.com/forkwright/aletheia/commit/3fbcad6047e378f35c99d1073e3b2ba6ae4ad440))
* **ui:** thinking UI — status pills + expandable detail panel ([#54](https://github.com/forkwright/aletheia/issues/54)) ([587a58d](https://github.com/forkwright/aletheia/commit/587a58dacc4d43cd1fc87e07e577a87d9815746d))
* **ui:** warm gold theme, proper favicon, refined empty state ([e65c396](https://github.com/forkwright/aletheia/commit/e65c396b31b7eddbe6acdb90246d2b53113613fb))
* unified slash commands, stop button fix, thinking mode ([80c2504](https://github.com/forkwright/aletheia/commit/80c250448a4ab778ede646e61779a766d44dc672))
* unified slash commands, stop button fix, thinking mode ([132e744](https://github.com/forkwright/aletheia/commit/132e74473cb6fcb6707c885e15831fa2f43401e8))
* unified thread model (all 4 phases) ([#32](https://github.com/forkwright/aletheia/issues/32)) ([a6abacb](https://github.com/forkwright/aletheia/commit/a6abacb3ae116c9ef6c120d739f80c4410796cdb))
* versioning, releases + update channel (Spec 14 Phase 5) ([#79](https://github.com/forkwright/aletheia/issues/79)) ([ff166db](https://github.com/forkwright/aletheia/commit/ff166db529ef9c06a83ade0218800ae465a9dafc))
* webchat UX — notifications, resilience, file editor ([#47](https://github.com/forkwright/aletheia/issues/47)) ([069b3d2](https://github.com/forkwright/aletheia/commit/069b3d218dceac069f851c88eb3d4fba22a120a1))
* wire session-based auth through gateway and UI ([0e97267](https://github.com/forkwright/aletheia/commit/0e972678aded4334f53df2852edfef0c7e772251))


### Bug Fixes

* /distill command, emergency context guard, configurable allowedRoots ([#35](https://github.com/forkwright/aletheia/issues/35)) ([7da8bc8](https://github.com/forkwright/aletheia/commit/7da8bc8ab2f0c56d9e93365081edfc5a458c6a26))
* /help shows all commands including server-side ([abcd2cc](https://github.com/forkwright/aletheia/commit/abcd2ccdd747d1546052e3856d1de744b0151a07))
* add debug logging to 14 silent catch blocks ([04d85aa](https://github.com/forkwright/aletheia/commit/04d85aaf8a4174df38acc06cfb1d172a0f57b0de))
* add missing getDistillationPriming mock to manager tests ([a1dbe46](https://github.com/forkwright/aletheia/commit/a1dbe46d05c0bbdabebb323f057d67409638640e))
* allow write/edit tools to use allowedRoots ([72eeb93](https://github.com/forkwright/aletheia/commit/72eeb93ee2520c053943c079f28e2b135a2f4c28))
* buildBetaHeader() merges all active betas into a single header. ([aa8035a](https://github.com/forkwright/aletheia/commit/aa8035ad19c36f43fab60aa36d387624314df1ab))
* chunked extraction prevents distillation overflow ([#61](https://github.com/forkwright/aletheia/issues/61)) ([bf5a477](https://github.com/forkwright/aletheia/commit/bf5a47791e7c1e51c64d954f7b75ae8662c8be3a))
* chunked extraction prevents distillation overflow ([#64](https://github.com/forkwright/aletheia/issues/64)) ([d88860c](https://github.com/forkwright/aletheia/commit/d88860cd67175c61594ecdf3ccb0a37687d64ade))
* comprehensive mobile UI overhaul ([869bcbc](https://github.com/forkwright/aletheia/commit/869bcbc4bfc9805e6a8d0c8db7e19d5cc4322adc))
* decouple watchdog probing from alerting ([#58](https://github.com/forkwright/aletheia/issues/58)) ([9701f14](https://github.com/forkwright/aletheia/commit/9701f14cd80cbfb76e53ec2d92c1119c8f402b9e))
* duplicate tool_result blocks causing API 400 errors ([#57](https://github.com/forkwright/aletheia/issues/57)) ([676c4dc](https://github.com/forkwright/aletheia/commit/676c4dc70e499a3295a752748d76a386d8da9643))
* eqeqeq lint error in aletheia.ts ([f8b0261](https://github.com/forkwright/aletheia/commit/f8b02611792bf8c6fcab49ff7fb6f9485b31020b))
* error handling sweep — structured error boundaries ([#52](https://github.com/forkwright/aletheia/issues/52)) ([a6c2557](https://github.com/forkwright/aletheia/commit/a6c2557fc8c53cba993dc449494a4c357e7bf845))
* file editor rendering — use tick() instead of $effect for CodeMirror init ([2b04ff7](https://github.com/forkwright/aletheia/commit/2b04ff7adfc772a501304e2728931de8893a8da8))
* manager-streaming test — disable narration filter in test config ([f91ec2e](https://github.com/forkwright/aletheia/commit/f91ec2ee44388ae5f40c56749943b7b4b9530a7e))
* markdown table rendering ([#105](https://github.com/forkwright/aletheia/issues/105)) ([f866faa](https://github.com/forkwright/aletheia/commit/f866faa5cc6c9fd746e2621954a7dcbf9f61611b))
* memory pipeline tuning and plugin loading ([4d3443f](https://github.com/forkwright/aletheia/commit/4d3443fae3cd4af1fed85e58e589585949b2376a))
* memory sidecar env var race + set slicing crash ([#82](https://github.com/forkwright/aletheia/issues/82)) ([05cf8c9](https://github.com/forkwright/aletheia/commit/05cf8c914aa36d5f18e63bf01111908c52872106))
* OAuth beta header overridden by per-request headers ([aa8035a](https://github.com/forkwright/aletheia/commit/aa8035ad19c36f43fab60aa36d387624314df1ab))
* object rendering, remove tool scope, complete spec 3 ([#127](https://github.com/forkwright/aletheia/issues/127)) ([42526f0](https://github.com/forkwright/aletheia/commit/42526f0e88c66044144515fe6b4b9f6acfc12ef6))
* preserve thinking block signatures for Anthropic API ([0230101](https://github.com/forkwright/aletheia/commit/02301019ed82a063b16ddbe3a06242f238444d7a))
* prevent duplicate tool_result blocks in message history ([#39](https://github.com/forkwright/aletheia/issues/39)) ([f5506d9](https://github.com/forkwright/aletheia/commit/f5506d975e0f9471381c1c3d38ba68839327234e))
* reactivate archived sessions instead of crashing on UNIQUE constraint ([a822d51](https://github.com/forkwright/aletheia/commit/a822d519a5f352990b6315c103e3f7e355761dd3))
* recover streaming indicator after page refresh ([#130](https://github.com/forkwright/aletheia/issues/130)) ([eca4c62](https://github.com/forkwright/aletheia/commit/eca4c621b65c05e191bbd2cbd074b24cfa5ad529))
* remove 'from __future__ import annotations' from memory sidecar routes ([9432a5d](https://github.com/forkwright/aletheia/commit/9432a5d47b384925e99700d72077889fc92fe09b))
* remove hardcoded paths for deployment portability ([84e94d3](https://github.com/forkwright/aletheia/commit/84e94d32bd7e9ffb08311da59266f83122fbf2f2))
* resolve chunk circular dependency breaking startup ([05707df](https://github.com/forkwright/aletheia/commit/05707df060a81986a3e88587736061a2e6b6bdc2))
* rich command formatting, /model bug, word wrapping ([#30](https://github.com/forkwright/aletheia/issues/30)) ([3be2833](https://github.com/forkwright/aletheia/commit/3be2833052b761b0b0c1305cc1d903ee16cfbad4))
* runtime hardening for plugins, models, and error handling ([1ed6e08](https://github.com/forkwright/aletheia/commit/1ed6e0819431f1900ad12ab87d079445e177b0e5))
* session integrity — prevent cross-agent leakage and stale distillation cascade ([#73](https://github.com/forkwright/aletheia/issues/73)) ([5b3ee9d](https://github.com/forkwright/aletheia/commit/5b3ee9d5d67273c1716cc1c460b9aab1e24da9da))
* session key redirect creates stable session, UI tracks server-assigned session ([a78af7a](https://github.com/forkwright/aletheia/commit/a78af7ad77884da14e6d6c65ccb8233a13830c2a))
* streaming events, credential loading, and entry point resolution ([9458233](https://github.com/forkwright/aletheia/commit/9458233d4bc3bd75bc33e130444706c332e3f9ef))
* strict equality in hooks.ts template substitution ([9720a3b](https://github.com/forkwright/aletheia/commit/9720a3be583e5a5e44729fd92cec59e81058456e))
* system audit with service hardening and crash recovery ([9b28041](https://github.com/forkwright/aletheia/commit/9b2804168835bc1f898c39b08223afdc144f1247))
* test performance — tiered testing, worker limits, CI split ([aecdeac](https://github.com/forkwright/aletheia/commit/aecdeac425662aa701d88799df324446b2bfd7bc))
* tool stats payload key mismatch + sidecar systemd dependency ([47aabc9](https://github.com/forkwright/aletheia/commit/47aabc909eac71e4ba292f7db0976c30a3780aa8))
* whitelist /api/commands endpoint from auth ([925c58e](https://github.com/forkwright/aletheia/commit/925c58e2e0d94aca64f2df3d3e63158af917af38))
* wire graph half-connections + memory quality ([0220e0d](https://github.com/forkwright/aletheia/commit/0220e0d7f6440feafa7709e0db1ff2d6405b3675))
* wire sub-agent roles to real role definitions ([966d8e6](https://github.com/forkwright/aletheia/commit/966d8e6ab1bc48f26af803c2cd3fc8536edbd998))


### Performance Improvements

* **recall:** vector-first search, graph-enhanced as fallback ([#49](https://github.com/forkwright/aletheia/issues/49)) ([82804f3](https://github.com/forkwright/aletheia/commit/82804f3031a2aa86bba8bec412badbabb3ecf5b1))

## [0.10.5] - 2026-02-22

### Added
- **Web UI agent creation** (Spec 5 P5) — "+" button in sidebar opens inline form to create agents. Calls `POST /api/agents` which scaffolds workspace, updates config, and hot-reloads the runtime. New agent is auto-selected for immediate onboarding.
- **`aletheia init` wizard** (Spec 5 P6) — First-run setup: prompts for Anthropic API key, gateway port, and first agent. Writes credentials, config, and scaffolds workspace in one flow.

### Specs Completed
- **Spec 5** Plug-and-Play Onboarding — 6/6 phases

---

## [0.10.4] - 2026-02-22

### Added
- **`aletheia agent create`** (Spec 5 P1-P3) — CLI command scaffolds a new agent workspace from `_example/` template with onboarding SOUL.md. Supports `--id`, `--name`, `--emoji` flags or interactive prompts. Automatically updates `aletheia.json` with agent entry and web binding.
- **Onboarding SOUL.md** (Spec 5 P4) — Scaffolded agents get an onboarding prompt as their initial SOUL.md. The agent interviews its operator to learn name, domain, working style, and boundaries, then writes its own `SOUL.md`, `USER.md`, and `MEMORY.md`. Zero runtime changes — the agent naturally transitions out of onboarding by overwriting SOUL.md via the write tool.

---

## [0.10.3] - 2026-02-22

### Added
- **Runtime code patching** (Spec 26 P5) — `propose_patch` and `rollback_patch` tools let agents modify their own source code with automated safety gates (tsc + vitest + backup/restore). Patchable dirs: `organon/`, `nous/`, `distillation/`, `daemon/`. Rate limited: 1/hr/agent, 3/day total.
- **Evolutionary config search** (Spec 26 P6) — `evolution:nightly` cron mutates pipeline configs (recall, tools, notes) via Haiku, benchmarks variants against approval-signal tasks, promotes winners with 24h auto-adopt window and Signal notification. Archive capped at 5 variants per agent.
- **Checkpoint time-travel** (Spec 21 P4) — `aletheia fork <session-id> --at <N>` creates a new session branched from distillation checkpoint N. API endpoints: `GET /api/sessions/:id/checkpoints`, `POST /api/sessions/:id/fork`.
- **Pipeline config save** — `savePipelineConfig()` function for writing validated configs back to disk

### Specs Completed
- **Spec 26** Recursive Self-Improvement — 6/6 phases
- **Spec 21** Agent Portability — 4/4 phases

---

## [0.10.2] - 2026-02-21

### Added
- **Update notification badge** (Spec 3 P3b) — TopBar polls `/api/system/update-status`, shows green version badge when update available
- **Update API endpoint** (Spec 3 P3c) — `POST /api/system/update` runs git pull + rebuild, returns status
- **Credential failover** (Spec 3 P4a) — `ProviderRouter.complete()` tries backup API keys from `~/.aletheia/credentials/anthropic.json` on recoverable errors (429/5xx)

### Fixed
- **`[object Object]` in webchat** — LLM sometimes returns structured objects in string arrays during distillation extraction and working state updates. Added `toStringArray()` filter to all 9 array fields across `extract.ts` and `working-state.ts`.

### Changed
- **Tool workspace scope removed** — file tools (read, write, edit, ls, grep, find) no longer constrained to workspace + allowedRoots via `safePath()`. Now use plain `resolve()`, matching `exec` tool behavior. Deleted `safe-path.ts` and tests.

### Specs Completed
- **Spec 3** Auth & Updates — all phases complete

---

## [0.10.1] - 2026-02-21

### Added
- **Plugin auto-discovery** (Spec 18 P4) — scans `shared/plugins/` for plugin directories, merges with explicitly configured paths, `aletheia plugins list` CLI command
- **Plugin path safety** (Spec 18 P5) — `realpathSync` traversal guard on auto-discovered plugins, symlink escape prevention. Explicit config paths bypass validation.
- **Loop guard hook template** (Spec 18 P6) — `shared/hooks/_templates/loop-guard.yaml` + `.sh`, detects stuck tool-call patterns via sentinel file
- **Encrypted memory init** (Spec 20 P4) — AES-256-GCM encryption wired at startup with salt persistence. `encryptIfEnabled`/`decryptIfNeeded` already in store; this adds `initEncryption()` call and salt management.
- **Agent file import** (Spec 21 P2) — `aletheia import <file.agent.json>` restores workspace files, sessions with ID remapping, messages, notes, working state, distillation priming
- **Scheduled backups** (Spec 21 P3) — `backup:all-agents` cron command, configurable destination and retention days via `BackupConfig` schema

### Changed
- CI streamlined: removed duplicate npm audit from nightly (kept in security.yml), fixed dependabot-auto-merge check name (`quality` not `typecheck`), staggered CodeQL to Wednesday, added zod major version ignore
- Dependencies: better-sqlite3 11→12, @types/node 22→25, @vitest/coverage-v8 3→4, actions/setup-python v5→v6

### Fixed
- **Rolldown chunk circular dependency** — dynamic `import("koina/fs.js")` in loader.ts created a chunk that referenced `__exportAll` from entry.mjs, causing `TypeError: __exportAll is not a function` at startup. Converted to static import.
- 96 lint warnings eliminated (unused imports, unsorted imports, unused parameters across 21 test files)
- Removed dead auth scaffolding (tls.ts, sanitize.ts, retention.ts — spec 3 stubs with zero consumers)
- Removed unused `StoreError` class

### Specs Completed
- **Spec 18** Extensibility — 6/6 phases
- **Spec 20** Security Hardening — 4/4 phases

---

## [0.10.0] - 2026-02-20

### Added
- **Session continuity hardening** (Spec 12) — pre-compaction memory flush with distillation log, background session aggressive distillation (50 msg / 10K token triggers), ephemeral session cleanup (nightly purge), post-distillation verification checks
- **Sub-agent workforce** (Spec 13) — 5 typed roles (coder, reviewer, researcher, explorer, runner) with structured JSON result contracts, parallel dispatch via `sessions_dispatch`, per-agent budget controls (turns, tokens, timeout)
- **Domain-scoped memory** — agents filter recall by configured domains, backwards-compatible (unscoped memories always included)
- **Memory confidence scoring** — Neo4j MemoryAccess decay/access counts weight search results, frequently accessed memories boosted, decayed memories penalized
- **Tool categorization UI** — 28 tools mapped to 6 categories (filesystem, search, execute, communication, system, web) with category badges in tool panel header and status line
- **Per-tool token estimates** — token consumption estimated per tool result, displayed in tool panel
- **Distillation progress indicator** — live progress bar in webchat showing pipeline stage (sanitize, extract, summarize, flush, verify)
- **Dynamic thinking budget** — thinking token budget scales with message complexity (2K-16K range)
- **Tool result truncation** — per-tool-type storage limits with head/tail preservation
- **Bootstrap token audit** — `aletheia audit-tokens [agent-id]` CLI command for per-section token breakdown
- **Release automation** — release-please for versioned releases with auto-generated changelogs

### Changed
- Release workflow switched from manual tag-push to release-please managed releases
- Cost injection now runs every 8th turn with session cost, sub-agent costs, budget remaining

### Fixed
- Auth mode "none" not recognized in UI auth flow
- TypeScript errors in audit.ts constructor and sessions-spawn unused parameter

---

## [0.9.1] - 2026-02-20

### Added
- **Working state extraction** - Post-turn LLM extraction of structured task context (current task, completed steps, next steps, decisions, open files). Persisted on session, injected into system prompt, survives distillation.
- **Agent notes tool** - Explicit `note` tool (add/list/delete) with categories (task, decision, preference, correction, context). Notes survive distillation and are injected into system prompt with 2K token cap.
- **Release workflow** - GitHub Releases on tag push with auto-generated changelogs
- **Self-update CLI** - `aletheia update [version]` with locking, rollback, and health-check. Supports `--edge` (latest main), `--check` (dry run), `--rollback`.
- **Version tracking** - Build-time version injection, `/api/status` includes version, 6h periodic update check daemon
- **Thinking UI** - Status pills showing thinking duration during streaming, expandable detail panel with full reasoning
- **2D graph visualization** - Force-graph 2D as default (faster, more readable), lazy-loaded 3D via dynamic import, progressive node loading (batches of 200)
- **Error handling sweep** - `trySafe`/`trySafeAsync` utilities in `koina/safe.ts`, catch block improvements across store, finalize, tools, listener, TTS

### Fixed
- **Duplicate tool_result blocks** - Loop detector was pushing additional `tool_result` blocks with the same `tool_use_id`, causing Anthropic API 400 errors. Now appends to existing result instead.
- **Recall timeouts** - Vector-first search as primary path (~200-500ms), graph-enhanced only as fallback when no vector hits above threshold. Timeout bumped 3s to 5s.
- **Manager test failures** - Restored 27 tests by adding missing store mocks (getThinkingConfig, getNotes, getWorkingState, etc.)

### Changed
- Session metrics (duration, context utilization, distillation count) moved to separate block, injected every 8th turn instead of replacing working state

---

## [0.9.0] - 2026-02-18

### Added
- **Web UI feature pack** - file explorer with syntax-highlighted preview, settings panel, diff rendering in tool results
- **Tool approval system** - risk classification (low/medium/high/critical) with UI approval gates for dangerous operations
- **MCP client support** - stdio, SSE, and HTTP transports for connecting to external MCP servers
- **Prompt caching** - `cache_control` breakpoints on tool definitions and conversation history. Uses 2 of 4 Anthropic cache slots (other 2 on system prompt). 60-80% input token savings during tool loops.
- **Pipeline decomposition** - `manager.ts` broken into composable stages for testability
- **Design specs** - auth/security, data privacy, tool governance, distillation persistence, modular runtime architecture (in `docs/specs/`)

### Fixed
- History endpoint returns newest messages instead of oldest
- WebGPU polyfill for Three.js in non-WebGPU browsers
- Lazy-load GraphView to prevent Three.js crash on startup

---

## [0.8.0] - 2026-02-17

### Added
- **Structured logging** - turn-level tracing with request IDs, tool call timing, cache hit rates
- **Smart loop detection** - warn at 3, halt at 5 identical tool calls (replaces hard cap)
- **Pre-turn memory recall** - Mem0 search injected into context before each agent turn
- **Prosoche signal collectors** - calendar, task, cross-agent signals feed the attention daemon
- **Conversation backfill** - script to import existing session transcripts into the memory pipeline
- **Local embeddings** - Voyage-3-large with Ollama fallback
- **Instance branding** - configurable name, tagline, logo via config
- **Tool governance** - timeouts, turn cancellation, structured approval flow
- **Distillation persistence** - summaries written to agent workspace memory files

### Fixed
- Config env injection via typed `applyEnv()`
- fd binary symlink on Ubuntu CI
- Streaming UI bugs (stuck stop button, collapsed formatting, disappearing messages)

---

## [0.7.0] - 2026-02-16

### Added
- **Graph visualization** - 3D force-directed graph with community detection, progressive loading, Three.js rendering
- **Syntax highlighting** - tree-shaken highlight.js in chat and tool panel
- **Collapsible tool results** - `/compact` command for dense tool output
- **File uploads** - images (vision), PDFs, text files, code files via drag-and-drop
- **3D memory graph** - interactive visualization of entity relationships in the web UI

### Fixed
- Streaming events unbuffered for real-time delivery
- Credential file supports `apiKey` field (not just `authToken`)
- Bootstrap entry point renamed for tsdown v0.20 compatibility

---

## [0.6.0] - 2026-02-15

### Added
- **Web UI** - Svelte 5 chat interface at `/ui`
  - Streaming responses via SSE
  - Real-time event push
  - Per-agent conversation switching
  - Markdown rendering, emoji support
  - Mobile-responsive with swipe sidebar
  - Dark theme
- **Streaming API** - `completeStreaming()` on AnthropicProvider and ProviderRouter
- **Collapsible sidebar** - slash commands (`/new`, `/switch`, `/help`), copy code blocks
- **Live tool activity feed** - real-time tool execution status in UI
- **Event bus to SSE bridge** - turn, tool, session events broadcast to web clients
- **Cost endpoints** - `/api/costs/summary`, `/api/costs/session/:id`

### Changed
- JS bundle: 1,031KB to 199KB (81% reduction via hljs tree-shaking)
- Runtime bundle: 293KB to 354KB
- Static file serving with SPA fallback, immutable caching for hashed assets

---

## [0.5.0] - 2026-02-14

### Added
- **Memory intelligence** - graph analytics (PageRank, Louvain), query rewriting, foresight signals
- **Self-observation tools** - check_calibration, what_do_i_know, recent_corrections
- **Cross-agent deliberation** - structured dialectic protocol between agents
- **Discovery engine** - cross-domain connection finding via shared memory
- **Memory evolution** - merge, reinforce, decay lifecycle for stored facts
- **Temporal memory layer** - Graphiti-style episodic memory in the sidecar
- **Research meta-tool** - memory search, web search, synthesize pipeline
- **Whisper transcription** - wraps whisper.cpp for voice message handling
- **Browser automation** - LLM-driven web browsing via Playwright

### Changed
- Temperature routing based on message content classification
- MCP security hardening (auth, rate limiting, scopes, CORS)
- Cross-agent blackboard (SQLite migration v6, TTL-based expiry)

---

## [0.4.0] - 2026-02-13

### Added
- **CI/CD pipeline** - PR gates, nightly quality checks, deploy pipeline
- **Security scanning** - Dependabot, CodeQL, npm audit, pip-audit, TruffleHog
- **P0 test suite** - git pre-commit hooks, vitest with coverage thresholds
- **TTS pipeline** - Piper voice synthesis for audio responses
- **Circuit breakers** - input/response quality gates on agent turns
- **Ephemeral agents** - spawn short-lived sub-agents for isolated tasks
- **Self-authoring tools** - agents can create new tools at runtime
- **Competence model** - per-agent skill tracking and confidence scoring

### Changed
- Tests: 287 to 689 (80%+ coverage across 68 files)
- Dual licensing: AGPL-3.0 (runtime) + Apache-2.0 (SDK/client)

---

## [0.3.0] - 2026-02-11

### Added
- **Capability rebuild** - Signal commands (10 built-in), link preprocessing, media understanding, CLI admin, contact pairing, skills directory
- **Adaptive routing** - complexity-based model selection with tiered routing
- **Planning tools** - multi-step task decomposition for agents
- **Disagreement detection** - flags conflicting agent responses
- **Session replay CLI** - replay and re-execute past sessions
- **Operational metrics** - `/api/metrics` with per-agent stats, token usage, cache rates, cron status
- **Concurrent agent turns** - fire-and-forget SSE dispatch

### Fixed
- Distillation amnesia: summary marked `isDistilled: true` made it invisible to future turns
- Tool results excluded from extraction/summarization
- Tool definition tokens not subtracted from history budget
- Watchdog pgrep regex never matched gateway process

### Changed
- Token counter: added safety margin (1.15x), per-tool overhead accounting
- Distillation trigger uses actual API-reported input tokens instead of heuristic
- Multi-stage summarization for large conversations
- Heartbeat uses Haiku (95% token savings)

---

## [0.2.0] - 2026-02-08

### Added
- **Runtime v2** - clean-room rewrite, removed all upstream dependencies (789k lines, 47 packages)
- **Stack**: Hono (gateway), better-sqlite3 (sessions), @anthropic-ai/sdk, Zod (config), Commander (CLI)
- **OAuth authentication** - Anthropic Max plan routing with Bearer tokens
- **Mem0 memory integration** - automatic fact extraction via Claude Haiku
  - Qdrant vector store for semantic search
  - Neo4j graph store for entity relationships
  - FastAPI sidecar service (port 8230)
  - Cross-agent shared memory + agent-specific domain memory
- **Federated memory search** - sqlite-vec + Mem0 queried in parallel, merged and deduplicated
- **Prosoche daemon** - adaptive attention engine with configurable signal weights
- **Evaluation framework** - objective metrics and bias monitoring

### Changed
- FalkorDB retired, data migrated to Neo4j
- Memory plugin hooks: before_agent_start (recall), agent_end (extract)
- Config paths: `.openclaw/` to `.aletheia/`

---

## [0.1.0] - 2026-02-05

### Added
- Initial fork from OpenClaw as Aletheia
- Multi-agent architecture with per-agent workspaces
- Signal messaging via signal-cli
- sqlite-vec local memory search
- Structured distillation (pre-compaction fact extraction)
- Context assembly pipeline
- Knowledge graph with ontology
- Research tools (scholar, wiki)
- Langfuse observability integration
