#!/usr/bin/env python3
"""
browse â€” Web automation for nous agents.

Uses Browser Use library for LLM-driven browser interaction.

Usage:
    browse "Go to example.com and extract the pricing table"
    browse --url "https://example.com" "Extract the main table data"
"""

import subprocess
import sys
import os

ALETHEIA_ROOT = os.environ.get("ALETHEIA_ROOT", "/mnt/ssd/aletheia")
VENV_PYTHON = os.path.join(ALETHEIA_ROOT, "infrastructure/browser-use/.venv/bin/python3")

RUNNER_SCRIPT = os.path.join(os.path.dirname(os.path.abspath(__file__)), "..", "..", "infrastructure", "browser-use", "run_task.py")


def main():
    if len(sys.argv) < 2:
        print(__doc__)
        sys.exit(1)

    task = " ".join(sys.argv[1:])

    result = subprocess.run(
        [VENV_PYTHON, RUNNER_SCRIPT],
        capture_output=False,
        env={**os.environ, "BROWSE_TASK": task},
    )
    sys.exit(result.returncode)

if __name__ == "__main__":
    main()
