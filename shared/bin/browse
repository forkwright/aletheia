#!/usr/bin/env python3
"""
browse â€” Web automation for nous agents.

Uses Browser Use library for LLM-driven browser interaction.
Primary user: Arbor (dashboards, web data).

Usage:
    browse "Go to the Summus dashboard and screenshot the ROI page"
    browse --url "https://example.com" "Extract the main table data"
"""

import subprocess
import sys
import os

VENV_PYTHON = "/mnt/ssd/aletheia/infrastructure/browser-use/.venv/bin/python3"

RUNNER_SCRIPT = os.path.join(os.path.dirname(os.path.abspath(__file__)), "..", "..", "infrastructure", "browser-use", "run_task.py")


def main():
    if len(sys.argv) < 2:
        print(__doc__)
        sys.exit(1)

    task = " ".join(sys.argv[1:])

    result = subprocess.run(
        [VENV_PYTHON, RUNNER_SCRIPT],
        capture_output=False,
        env={**os.environ, "BROWSE_TASK": task},
    )
    sys.exit(result.returncode)

if __name__ == "__main__":
    main()
